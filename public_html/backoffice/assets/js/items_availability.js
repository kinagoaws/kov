const someWords=JSON.parse(some_words);const LocaleLang={el:{pagination:{pagesize:"",total:someWords.total}}};const ComponentsPauseItems={props:["label","pause_time_list","default_time"],data(){return{modal:false,unavailable_until:this.default_time,formData:{days:"",hours:""},daysList:[],hoursList:[],message:"",itemName:null,item_token:null,loading_submit:false,dialogWidth:"50%"}},mounted(){this.generateDaysList(30);this.generateHoursList(23);this.message=this.label.pause_message;this.updateDialogWidth();window.addEventListener("resize",this.updateDialogWidth)},beforeDestroy(){window.removeEventListener("resize",this.updateDialogWidth)},computed:{formattedMessage(){return this.message.replace("{item_name}",this.itemName)}},methods:{updateDialogWidth(){const t=window.innerWidth;this.dialogWidth=t<768?"90%":"50%"},setData(t){console.log("setData",t);this.itemName=t.item_name;this.item_token=t.item_token;this.modal=true},generateDaysList(t){this.daysList=Array.from({length:t+1},(t,e)=>({value:e,label:`${e} ${e===1?this.label.day:this.label.days}`}))},generateHoursList(t){this.hoursList=Array.from({length:t+1},(t,e)=>({value:e,label:`${e} ${e===1?this.label.hour:this.label.hours}`}))},onSubmit(){this.loading_submit=true;let t="";t+="item_token="+this.item_token;t+="&unavailable_until="+this.unavailable_until;t+="&days="+this.formData.days;t+="&hours="+this.formData.hours;axios.post(apibackend+"/PauseItem",t).then(t=>{if(t.data.code==1){this.modal=false;this.$emit("afterSave",t.data.details)}else{ElementPlus.ElNotification({title:"",message:t.data.msg,position:"bottom-right",type:"warning"})}}).catch(t=>{}).then(t=>{this.loading_submit=false})}},template:"#xtemplate_pause_items"};const app_items_availability=Vue.createApp({components:{"pause-items":ComponentsPauseItems},data(){return{loading:false,list_data:null,current_page:1,query:null,searchTimeout:null,filter_pause:false,loading_search:false,page_size:parseInt(list_limit),pageSizes:JSON.parse(paginationSize)}},mounted(){this.getItemList(1)},computed:{getItems(){if(this.list_data){return this.list_data.items?this.list_data.items:null}return null},hasItems(){return this.list_data?.items&&Object.keys(this.list_data.items).length>0},getTotalItems(){if(this.list_data){return this.list_data.total_items?this.list_data.total_items:null}return 0},getTotalDisplay(){if(this.list_data){return this.list_data.total_display_items?this.list_data.total_display_items:null}return""}},methods:{getParams(){let t="&filter_pause="+(this.filter_pause?this.filter_pause:"");t+="&query="+(this.query?this.query:"");t+="&page_size="+this.page_size;return t},ApplyFilter(){this.getItemList(1)},ClearSearch(){this.getItemList(1)},filterPauseitems(){this.filter_pause=!this.filter_pause;this.loading_search=true;axios.get(apibackend+"/getItemList?"+this.getParams()).then(t=>{if(t.data.code==1){this.list_data=t.data.details;this.current_page=t.data.details.current_page}else{this.list_data=null}}).catch(t=>{console.error("Error:",t)}).then(t=>{this.loading_search=false})},getItemList(t){this.loading=true;const e=this.getParams();axios.get(apibackend+"/getItemList?page="+t+e).then(t=>{if(t.data.code==1){this.list_data=t.data.details;this.current_page=t.data.details.current_page}else{this.list_data=null}}).catch(t=>{console.error("Error:",t)}).then(t=>{this.loading=false})},paginationChange(t){this.getItemList(t)},OptionsPause(t){console.log("OptionsPause",t);if(!t.unavailable_until){this.$refs.ref_pause.setData(t)}else{this.ResumeItems(t)}},ResumeItems(t){t.loading=true;let e="";e+="item_token="+t.item_token;axios.post(apibackend+"/ResumeItem",e).then(t=>{if(t.data.code==1){this.updateItems(t.data.details)}else{ElementPlus.ElNotification({title:"",message:t.data.msg,position:"bottom-right",type:"warning"})}}).catch(t=>{}).then(t=>{})},updateItems(t){t.forEach(e=>{const t=this.list_data.items.findIndex(t=>t.item_id===e.item_id);if(t!==-1){this.list_data.items[t]=e}})},afterSave(t){this.updateItems(t)}}});app_items_availability.use(ElementPlus,{locale:LocaleLang});const vm_items_availability=app_items_availability.mount("#vue-items-availability");