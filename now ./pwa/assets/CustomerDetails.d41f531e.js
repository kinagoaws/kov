import{_ as S,aA as y,u as P,A as m,n as k,p as s,q as i,t as o,f as a,a4 as v,Z as h,$ as l,au as V,a0 as A,a1 as C,a2 as c,F as f,ar as d,a8 as w,a3 as p,aB as Q,a6 as T,a7 as D,ba as I}from"./index.c29f7992.js";import{Q as N}from"./QToolbarTitle.38b5862b.js";import{Q as z}from"./QToolbar.19752286.js";import{Q as $}from"./QHeader.8a0fa205.js";import{Q as E}from"./QInnerLoading.d034c390.js";import{Q as R}from"./QImg.a00dd4e9.js";import{Q as q}from"./QChip.5de2d333.js";import{Q as x}from"./QSpace.0d53e539.js";import{Q as j}from"./QSkeleton.81a2bab8.js";import{Q as U}from"./QTab.0d7719d3.js";import{Q as F}from"./QTabs.8a6f34eb.js";import{Q as g}from"./QItemLabel.1db45aa2.js";import{Q as B}from"./QList.04c37cb8.js";import{Q as H,a as Z}from"./QTabPanels.38ab23f8.js";import{Q as G}from"./QPage.1b02519d.js";import{Q as J}from"./QPullToRefresh.9f003a0c.js";import"./QResizeObserver.0e413222.js";import"./rtl.276c3f1b.js";import"./use-panel.777e53e3.js";import"./touch.9135741d.js";import"./selection.53b1fe34.js";import"./use-render-cache.3aae9b27.js";import"./TouchPan.5fac99c8.js";import"./format.de7e9769.js";const K={data(){return{loading:!1,data:[],client_id:0,tab:"",tab_menu:[{label:this.$t("Order History"),value:"order_history"},{label:this.$t("Addresses"),value:"address"}],loading_summary:!1,data_summary:[],data_orders:[],loading_orders:!1,block_from_ordering:!1}},components:{ListNoData:y(()=>Q(()=>import("./ListNoData.bed29db8.js"),["assets/ListNoData.bed29db8.js","assets/index.c29f7992.js","assets/index.8924bfb8.css"])),ConfirmDialog:y(()=>Q(()=>import("./ConfirmDialog.f7360be1.js"),["assets/ConfirmDialog.f7360be1.js","assets/QToolbarTitle.38b5862b.js","assets/index.c29f7992.js","assets/index.8924bfb8.css","assets/QToolbar.19752286.js"])),ListLoading:y(()=>Q(()=>import("./ListLoading.159fbe89.js"),["assets/ListLoading.159fbe89.js","assets/index.c29f7992.js","assets/index.8924bfb8.css"]))},setup(){return{DataStore:P()}},created(){this.client_id=this.$route.query.client_id,this.client_id>0&&(this.getCustomerDetails(),this.getCustomerSummary(),this.getCustomerOrders()),this.tab=this.DataStore.customer_tab},watch:{tab(e,r){this.DataStore.customer_tab=this.tab}},computed:{hasData(){return Object.keys(this.data).length>0},hasOrders(){return Object.keys(this.data_orders).length>0},hasAddress(){return Object.keys(this.data).length>0&&Object.keys(this.data.addresses).length>0}},methods:{confirmBlock(){this.block_from_ordering?this.blockCustomer(0):this.$refs.confirm_dialog.dialog=!0},refresh(e){this.getCustomerDetails(e),this.getCustomerSummary(e),this.getCustomerOrders(e)},getCustomerDetails(e){this.loading=!0,m.fetchDataByTokenPost("getCustomerDetails","client_id="+this.client_id).then(r=>{this.data=r.details,this.block_from_ordering=r.details.block_from_ordering}).catch(r=>{this.data=[]}).then(r=>{this.loading=!1,m.empty(e)||e()})},getCustomerSummary(e){this.loading_summary=!0,m.fetchDataByTokenPost("getCustomerSummary","client_id="+this.client_id).then(r=>{this.data_summary=r.details}).catch(r=>{this.data_summary=[]}).then(r=>{this.loading_summary=!1,m.empty(e)||e()})},getCustomerOrders(e){this.loading_orders=!0,m.fetchDataByTokenPost("getCustomerOrders","client_id="+this.client_id).then(r=>{this.data_orders=r.details}).catch(r=>{this.data_orders=[]}).then(r=>{this.loading_orders=!1,m.empty(e)||e()})},afterConfirm(){this.blockCustomer(1)},blockCustomer(e){this.$refs.confirm_dialog.dialog=!1,m.showLoadingBox("",this.$q),m.fetchDataByTokenPost("blockCustomer","client_id="+this.client_id+"&block="+e).then(r=>{this.block_from_ordering=r.details}).catch(r=>{m.notify("dark",r,"error",this.$q)}).then(r=>{m.hideLoadingBox(this.$q)})}}},M={class:"text-center"},W={class:"text-weight-bold"},X={class:"col-2 text-center"},Y={class:"text-weight-bold font16 ellipsis"},ee={class:"font12 text-blue-grey-2"},te={class:"col text-center"},ae={class:"text-weight-bold font16 ellipsis"},re={class:"font12 text-blue-grey-2"},oe={class:"col text-center"},se={class:"text-weight-bold font16 ellipsis"},le={class:"font12 text-blue-grey-2"},ie={class:"col text-center"},de={class:"text-weight-bold font16 ellipsis"},ne={class:"font12 text-blue-grey-2"};function ue(e,r,me,ce,t,_){const L=k("ListLoading"),b=k("ListNoData"),O=k("ConfirmDialog");return s(),i(J,{onRefresh:_.refresh},{default:o(()=>[a($,{class:C({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:o(()=>[a(z,null,{default:o(()=>[a(v,{onClick:r[0]||(r[0]=n=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),_.hasData&&!t.loading?(s(),i(N,{key:0,class:"text-weight-bold"},{default:o(()=>[h(l(e.$t("Customer ID"))+" #"+l(t.data.customer.client_id),1)]),_:1})):V("",!0)]),_:1}),a(A)]),_:1},8,["class"]),a(G,{class:C([{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode},"q-pa-md"])},{default:o(()=>[t.loading?(s(),i(E,{key:0,showing:!0,color:"primary",size:"md","label-class":"dark",class:"transparent"})):(s(),c(f,{key:1},[_.hasData&&!t.loading?(s(),c(f,{key:0},[d("div",M,[a(w,{size:"70px"},{default:o(()=>[a(R,{src:t.data.customer.avatar,"spinner-color":"white","placeholder-src":"placeholder.png",fit:"cover",style:{height:"70px",width:"70px"}},null,8,["src"])]),_:1}),d("div",W,l(t.data.customer.first_name)+" "+l(t.data.customer.last_name),1),d("div",null,[a(v,{"no-caps":"",size:"sm",flat:"",label:t.block_from_ordering==!0?this.$t("Unblock Customer"):this.$t("Block Customer"),color:"blue-grey-4",class:"q-pa-none",onClick:_.confirmBlock},null,8,["label","onClick"])]),a(q,{size:"sm",color:e.$q.dark.mode?"grey600":"white"},{default:o(()=>[a(w,{icon:"phone",color:"red","text-color":"white"}),h(" "+l(t.data.customer.contact_phone),1)]),_:1},8,["color"]),a(q,{size:"sm",color:e.$q.dark.mode?"grey600":"white"},{default:o(()=>[a(w,{icon:"email",color:"blue","text-color":"white"}),h(" "+l(t.data.customer.email_address),1)]),_:1},8,["color"])]),a(x,{class:"q-pa-sm"}),t.loading_summary?(s(),i(j,{key:0,height:"50px",square:"",class:"radius8"})):(s(),c("div",{key:1,class:C(["q-pa-sm radius8 row",{"bg-grey600 text-white":e.$q.dark.mode,"bg-grey-1 text-dark":!e.$q.dark.mode}])},[d("div",X,[d("div",Y,l(t.data_summary.orders),1),d("div",ee,l(e.$t("Orders")),1)]),d("div",te,[d("div",ae,l(t.data_summary.order_cancel),1),d("div",re,l(e.$t("Cancel")),1)]),d("div",oe,[d("div",se,l(t.data_summary.total_refund),1),d("div",le,l(e.$t("Refund")),1)]),d("div",ie,[d("div",de,l(t.data_summary.total),1),d("div",ne,l(e.$t("Total")),1)])],2)),a(x,{class:"q-pa-sm"}),a(F,{modelValue:t.tab,"onUpdate:modelValue":r[1]||(r[1]=n=>t.tab=n),dense:"","no-caps":"","active-color":"primary","indicator-color":e.$q.dark.mode?"mydark":"white",align:"justify","narrow-indicator":"",shrink:"","switch-indicator":"false",class:"text-grey"},{default:o(()=>[(s(!0),c(f,null,p(t.tab_menu,n=>(s(),i(U,{key:n,name:n.value,"no-caps":"",class:"no-wrap q-pa-none"},{default:o(()=>[a(v,{label:n.label,unelevated:"","no-caps":"",color:t.tab==n.value?"primary":"mygrey","text-color":t.tab==n.value?"white":"dark",class:"radius28"},null,8,["label","color","text-color"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","indicator-color"]),a(x,{class:"q-pa-xs"}),a(H,{modelValue:t.tab,"onUpdate:modelValue":r[2]||(r[2]=n=>t.tab=n),animated:"","transition-prev":"fade","transition-next":"fade"},{default:o(()=>[(s(!0),c(f,null,p(t.tab_menu,n=>(s(),i(Z,{key:n,name:n.value,class:"q-pa-none"},{default:o(()=>[n.value=="order_history"?(s(),c(f,{key:0},[t.loading_orders?(s(),i(L,{key:0})):!t.loading_orders&&!_.hasOrders?(s(),i(b,{key:1,title:e.$t("No transactions"),subtitle:e.$t("new transactions will show here")},null,8,["title","subtitle"])):(s(),i(B,{key:2,separator:""},{default:o(()=>[(s(!0),c(f,null,p(t.data_orders,u=>(s(),i(T,{key:u,clickable:"",to:{path:"/orderview",query:{order_uuid:u.order_uuid}}},{default:o(()=>[a(D,null,{default:o(()=>[a(g,{class:"text-weight-medium"},{default:o(()=>[h("Order #"+l(u.order_id),1)]),_:2},1024),a(g,{caption:"",class:"font11"},{default:o(()=>[h(l(u.date_created),1)]),_:2},1024)]),_:2},1024),a(D,{side:"",class:"text-weight-medium"},{default:o(()=>[a(g,null,{default:o(()=>[h(l(u.total),1)]),_:2},1024),a(g,null,{default:o(()=>[a(q,{size:"xs",color:"primary","text-color":"white",style:I(`color:${u.status.font_color_hex} !important; background-color:${u.status.background_color_hex} !important; `)},{default:o(()=>[h(l(u.status.status),1)]),_:2},1032,["style"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"]))),128))]),_:2},1024))],64)):(s(),c(f,{key:1},[t.loading?(s(),i(L,{key:0})):!t.loading&&!_.hasData?(s(),i(b,{key:1,title:e.$t("No available data"),subtitle:e.$t("if there is address it will show here")},null,8,["title","subtitle"])):(s(),i(B,{key:2,separator:""},{default:o(()=>[(s(!0),c(f,null,p(t.data.addresses,u=>(s(),i(T,{key:u},{default:o(()=>[a(D,null,{default:o(()=>[a(g,{caption:""},{default:o(()=>[h(l(u.address),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024))],64))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])],64)):(s(),i(b,{key:1,title:e.$t("No available data"),subtitle:e.$t("Customer information not found")},null,8,["title","subtitle"]))],64))]),_:1},8,["class"]),a(O,{ref:"confirm_dialog",data:{title:this.$t("Block Customer"),subtitle:this.$t("block_user"),cancel:this.$t("Cancel"),confirm:this.$t("Confirm")},onAfterConfirm:_.afterConfirm},null,8,["data","onAfterConfirm"])]),_:1},8,["onRefresh"])}var Ne=S(K,[["render",ue]]);export{Ne as default};
