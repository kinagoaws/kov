import{_ as q,u as k,X as o,be as Q,p as B,q as r,t as _,v as l,j as t,ae as i,a4 as c,Z as h,a1 as n,F as m,ak as D,V as g,a6 as u,a7 as d,a0 as y,a2 as T,bq as S}from"./index.5da0f878.js";import{Q as N}from"./QBtnGroup.29bfca95.js";import{Q as f}from"./QSpace.334d24e5.js";import{Q as x}from"./QSkeleton.846fbbc5.js";import{Q as b}from"./QList.d63bde81.js";import{Q as C}from"./QPage.ab42a258.js";import{Q as E}from"./QPullToRefresh.b2c7d1c7.js";import{m as L}from"./vue3-apexcharts.81bd5527.js";import"./TouchPan.b989d673.js";import"./selection.a405500a.js";import"./format.de7e9769.js";const O={name:"EarningsDashboard",components:{apexchart:L},data(){return{loading:!1,first_loading:!1,loading_earnings:!1,date_start:"",date_end:"",chart_type:"",balance:[],can_cashout:!0,earnings:[],charts_data:[],max_cashout:0,summary:[],date_range:"",payload:[],chartOptions:{chart:{id:"vuechart",type:"bar",height:"auto",toolbar:{show:!1},parentHeightOffset:0},plotOptions:{bar:{colors:{ranges:[{from:-999999,to:0,color:"#f44336"}]}}},dataLabels:{enabled:!1,position:"bottom"},colors:["#81c784"],axisBorder:{show:!1},grid:{show:!1,padding:{left:0,right:0}},xaxis:{categories:["M","T","W","T","F"]},yaxis:{show:!1}},series:[{name:"series-1",data:[1,-2,3,4,5]}]}},setup(){return{Activity:k()}},created(){this.date_start=o.getDateNow(),this.date_end=o.getDateNow(),this.chart_type="daily",this.Activity.setTitle(this.$t("Earnings")),this.refresh(null)},computed:{},methods:{setDate(e){this.chart_type=e,e=="daily"?(this.date_start=o.getDateNow(),this.date_end=o.getDateNow()):(this.date_start=Q.now().minus({days:6}).toFormat("yyyy-MM-dd"),this.date_end=o.getDateNow()),this.refresh(null)},refresh(e){this.getWalletBalance(e),this.getEarning(e)},getEarning(e){this.first_loading?o.showLoadingBox("",this.$q):this.loading_earnings=!0,o.fetchDataByTokenPost("getEarnings","date_start="+this.date_start+"&date_end="+this.date_end+"&chart_type="+this.chart_type).then(a=>{this.first_loading=!0,this.date_range=a.details.date_range,this.earnings=a.details.balance,this.charts_data=a.details.charts_data,this.max_cashout=a.details.max_cashout,this.summary=a.details.summary,this.chartOptions={chart:{id:"vuechart",type:"bar",height:"auto",toolbar:{show:!1},parentHeightOffset:0},plotOptions:{bar:{colors:{ranges:[{from:-999999,to:0,color:"#f44336"}]}}},dataLabels:{enabled:!1,position:"bottom"},colors:["#81c784"],axisBorder:{show:!1},grid:{show:!1,padding:{left:0,right:0}},xaxis:{categories:this.charts_data.date_range},yaxis:{show:!1}},this.series=[{name:this.$t("Sale"),data:this.charts_data.data}]}).catch(a=>{this.summary=[]}).then(a=>{this.first_loading&&o.hideLoadingBox(this.$q),this.loading_earnings=!1,o.empty(e)||e()})},getWalletBalance(e){this.first_loading?o.showLoadingBox("",this.$q):this.loading=!0,o.fetchDataByTokenPost2("getWalletBalance",{payload:this.payload}).then(a=>{this.balance=a.details.balance,this.cashout_miximum=a.details.cashout_miximum,this.balance.raw>0&&(this.can_cashout=!1)}).catch(a=>{}).then(a=>{this.first_loading&&o.hideLoadingBox(this.$q),this.loading=!1,o.empty(e)||e()})}}},z={class:"q-pl-md q-pr-md q-pt-xs"},A={class:"row q-col-gutter-md"},P={class:"col"},V={key:1,class:"text-white q-pa-sm radius8 bg-blue row items-center cursor-pointer"},W={class:"font12"},F={class:"text-weight-bold text-h6"},I={class:"col text-right"},M={class:"q-pl-md q-pr-md"},R={key:0,class:"flex flex-center full-width q-pa-xl",style:{"min-height":"calc(25vh)"}},H={class:"q-pl-md q-pr-md q-mt-sm"},j={class:"font12 text-dark"},G={class:"text-center q-pa-md"},X={key:0,class:"flex flex-center full-width q-pa-xl",style:{"min-height":"calc(20vh)"}},Z={class:"text-h7"},J={class:"font13"};function K(e,a,U,Y,s,p){const v=B("apexchart");return r(),_(E,{onRefresh:p.refresh},{default:l(()=>[t(C,null,{default:l(()=>[i("div",z,[i("div",A,[i("div",P,[t(N,{unelevated:""},{default:l(()=>[t(c,{color:s.chart_type=="daily"?"primary":"white","text-color":s.chart_type=="daily"?"white":"dark",label:e.$t("Daily"),"no-caps":"",size:"sm",onClick:a[0]||(a[0]=w=>p.setDate("daily"))},null,8,["color","text-color","label"]),t(c,{color:s.chart_type=="daily"?"white":"primary","text-color":s.chart_type=="daily"?"dark":"white",label:e.$t("Weekly"),"no-caps":"",size:"sm",onClick:a[1]||(a[1]=w=>p.setDate("weekly"))},null,8,["color","text-color","label"])]),_:1}),t(f,{class:"q-pa-xs"}),s.loading_earnings?(r(),_(x,{key:0,height:"65px",square:""})):(r(),h("div",V,[i("div",null,[i("div",W,n(e.$t("Total earnings")),1),i("div",F,n(s.earnings.pretty),1)])]))]),i("div",I,[s.loading_earnings?(r(),h(m,{key:0},[a[2]||(a[2]=i("div",{style:{height:"34px"}},null,-1)),t(x,{height:"65px",square:""})],64)):(r(),_(v,{key:1,type:"bar",options:s.chartOptions,series:s.series,height:"112"},null,8,["options","series"]))])])]),t(f,{class:"q-pa-xs"}),i("div",M,[t(D,{class:"no-shadow q-pt-sm"},{default:l(()=>[s.loading_earnings?(r(),h("div",R,[t(g,{color:"primary",size:"2em"})])):(r(),h(m,{key:1},[i("div",H,[i("div",j,n(s.date_range),1)]),t(b,{separator:"",dense:""},{default:l(()=>[t(u,null,{default:l(()=>[t(d,null,{default:l(()=>[y(n(e.$t("Total Trips")),1)]),_:1}),t(d,{side:""},{default:l(()=>[y(n(s.summary.total_trip),1)]),_:1})]),_:1})]),_:1}),i("div",G,[t(c,{outline:"",flat:"",label:e.$t("View details"),"no-caps":"",color:"primary",to:{name:"earning-details",query:{start:s.date_start,end:s.date_end,chart_type:s.chart_type}}},null,8,["label","to"])])],64)),t(T),t(S,null,{default:l(()=>[s.loading_earnings?(r(),h("div",X,[t(g,{color:"primary",size:"2em"})])):(r(),h(m,{key:1},[t(b,{class:"dense"},{default:l(()=>[t(u,{class:"q-ma-none q-pa-none",clickable:"",to:"/account/cashout-history"},{default:l(()=>[t(d,null,{default:l(()=>[i("div",Z,n(e.$t("Balance"))+" : "+n(s.balance.pretty),1)]),_:1}),t(d,{side:""},{default:l(()=>[t(c,{round:"",color:"dark",icon:"las la-angle-right",flat:"",size:"sm"})]),_:1})]),_:1})]),_:1}),t(c,{label:e.$t("Cash out"),"no-caps":"",color:"primary",unelevated:"",size:"lg",to:"/account/cashout",disable:s.can_cashout,class:"q-pl-lg q-pr-lg"},null,8,["label","disable"]),t(f,{class:"q-pa-xs"}),i("p",J,n(s.max_cashout),1)],64))]),_:1})]),_:1})])]),_:1})]),_:1},8,["onRefresh"])}var ct=q(O,[["render",K]]);export{ct as default};
