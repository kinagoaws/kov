import{_ as f,A as m,p as l,a2 as n,f as t,t as a,a1 as g,F as c,a4 as u,Z as k,$ as o,a0 as b,ar as d,q as y,av as w,ae as q}from"./index.c29f7992.js";import{Q}from"./QToolbarTitle.38b5862b.js";import{Q as _}from"./QToolbar.19752286.js";import{Q as T}from"./QHeader.8a0fa205.js";import{Q as p}from"./QSpace.0d53e539.js";import{Q as $}from"./QForm.32515fc9.js";import{Q as v}from"./QPage.1b02519d.js";import"./QResizeObserver.0e413222.js";const C={name:"ForgotPassword",data(){return{loading:!1,email_address:"",steps:1,data:[],maxCounter:20,counter:this.maxCounter,timer:void 0}},watch:{counter(e,r){e<=0&&this.stopTimer()}},beforeUnmount(){this.stopTimer()},methods:{onSubmit(){this.loading=!0,m.fetchDataPost("ForgotPassword","email_address="+this.email_address).then(e=>{this.steps=2,this.startTimer(),this.data=e}).catch(e=>{m.notify("dark",e,"error",this.$q)}).then(e=>{this.loading=!1})},stopTimer(){clearInterval(this.timer)},startTimer(){this.stopTimer(),this.counter=this.maxCounter,this.timer=setInterval(()=>{this.counter--},1e3)},resendEmail(){this.loading=!0,m.fetchDataPost("resendResetEmail","uuid="+this.data.details.uuid).then(e=>{this.steps=2,this.startTimer()}).catch(e=>{m.notify("red-5",e,"error_outline",this.$q)}).then(e=>{this.loading=!1})}}},P={class:"full-width text-center"},x={class:"text-weight-bold no-margin"},E={key:0,class:"text-weight-medium q-ma-none text-grey"},F={key:1,class:"rounded-borders border-green q-pa-sm"},S={key:1,class:"font11 q-ma-none"};function V(e,r,B,I,s,h){return l(),n(c,null,[t(T,{class:g({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:a(()=>[t(_,null,{default:a(()=>[t(u,{onClick:r[0]||(r[0]=i=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),t(Q,{class:"text-weight-bold"},{default:a(()=>[k(o(e.$t("Forgot Password")),1)]),_:1})]),_:1}),t(b)]),_:1},8,["class"]),t(v,{class:"flex flex-center q-pl-md q-pr-md"},{default:a(()=>[d("div",P,[d("h6",x,o(e.$t("Let's Get your account back"))+"! ",1),s.steps==1?(l(),n("p",E,o(e.$t("Enter your email to receive instructions for resetting your password"))+". ",1)):(l(),n("p",F,o(s.data.msg),1)),t(p,{class:"q-pa-sm"}),s.steps==1?(l(),y($,{key:2,onSubmit:h.onSubmit},{default:a(()=>[t(w,{modelValue:s.email_address,"onUpdate:modelValue":r[1]||(r[1]=i=>s.email_address=i),label:e.$t("Email"),outlined:"","stack-label":"",color:"grey-5","lazy-rules":"",rules:[i=>i&&i.length>0||this.$t("This field is required")]},{prepend:a(()=>[t(q,{name:"las la-envelope",color:"grey"})]),_:1},8,["modelValue","label","rules"]),t(u,{type:"submit",color:"primary","text-color":"white",label:e.$t("Reset Password"),unelevated:"",class:"full-width",size:"lg","no-caps":"",loading:s.loading},null,8,["label","loading"])]),_:1},8,["onSubmit"])):(l(),n(c,{key:3},[t(p,{class:"q-pa-xs"}),s.counter===0?(l(),n(c,{key:0},[t(u,{onClick:h.resendEmail,flat:"",dense:"",color:"myblue","no-caps":"",class:"font13 q-ma-none"},{default:a(()=>[d("u",null,o(e.$t("Resend reset email")),1)]),_:1},8,["onClick"]),t(u,{onClick:r[2]||(r[2]=i=>s.steps=1),flat:"",dense:"",color:"secondary","no-caps":"",class:"font13 q-ma-none"},{default:a(()=>[d("u",null,o(e.$t("Enter email again")),1)]),_:1})],64)):(l(),n("p",S,[d("u",null,o(e.$t("Resend Code in"))+" "+o(s.counter),1)]))],64))])]),_:1})],64)}var L=f(C,[["render",V]]);export{L as default};
