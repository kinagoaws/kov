import{_ as C,aA as U,u as Q,A as s,n as P,p as i,q as f,t as u,f as o,a4 as m,Z as w,$ as _,a0 as D,a1 as y,ar as n,a2 as p,ae as V,au as q,at as z,av as d,aB as A}from"./index.c29f7992.js";import{Q as S}from"./QToolbarTitle.38b5862b.js";import{Q as I}from"./QToolbar.19752286.js";import{Q as T}from"./QHeader.8a0fa205.js";import{Q as F}from"./QInnerLoading.d034c390.js";import{Q as k}from"./QImg.a00dd4e9.js";import{Q as b}from"./QSelect.ae814dfc.js";import{Q as H}from"./QFooter.478b051a.js";import{Q as B}from"./QForm.32515fc9.js";import{Q as E}from"./QPage.1b02519d.js";import{Q as L}from"./QPullToRefresh.9f003a0c.js";import{A as c}from"./AppCamera.b25b6351.js";import"./QResizeObserver.0e413222.js";import"./QChip.5de2d333.js";import"./QItemLabel.1db45aa2.js";import"./QMenu.074d3579.js";import"./selection.53b1fe34.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";import"./TouchPan.5fac99c8.js";import"./touch.9135741d.js";const N={components:{UploaderFile:U(()=>A(()=>import("./UploaderFile.f34f6cc5.js"),["assets/UploaderFile.f34f6cc5.js","assets/QUploader.ee8da2fc.js","assets/index.c29f7992.js","assets/index.8924bfb8.css","assets/QCircularProgress.bcda6a33.js","assets/format.de7e9769.js"]))},data(){return{loading:!1,loading2:!1,is_ready:!1,upload_enabled:!1,logo:"",logo_url:"",upload_path:"",featured_data:"",cuisine:[],services:[],featured:[],distance_unit:"",tags:[],restaurant_name:"",restaurant_slug:"",contact_name:"",contact_phone:"",contact_email:"",description:"",short_description:"",delivery_distance_covered:"",header_image:"",upload_header_enabled:!1,path2:"",header_image_url:"",featured_data2:[]}},setup(e){return{DataStore:Q()}},created(){this.getInformation()},computed:{hasPhoto(){return!s.empty(this.logo)},hasPhoto2(){return!s.empty(this.header_image)},hasFeaturedData(){return Object.keys(this.featured_data).length>0},hasHeader(){return Object.keys(this.featured_data2).length>0}},methods:{clearLogo(){this.logo="",this.logo_url="",this.upload_path="",this.upload_enabled=!1},clearHeaderImage(){this.header_image="",this.path2="",this.header_image_url="",this.upload_header_enabled=!1},refresh(e){this.getInformation(e)},getInformation(e){this.loading=!0,s.fetchDataByTokenPost("getInformation").then(t=>{this.is_ready=t.details.is_ready,this.restaurant_name=t.details.restaurant_name,this.restaurant_slug=t.details.restaurant_slug,this.contact_name=t.details.contact_name,this.contact_phone=t.details.contact_phone,this.contact_email=t.details.contact_email,this.description=t.details.description,this.short_description=t.details.short_description,this.delivery_distance_covered=t.details.delivery_distance_covered,this.distance_unit=t.details.distance_unit,this.cuisine=t.details.cuisine,this.services=t.details.services,this.tags=t.details.tags,this.featured=t.details.featured,this.logo=t.details.logo,this.logo_url=t.details.logo_url,this.upload_path=t.details.path,this.header_image=t.details.header_image,this.header_image_url=t.details.header_image_url,this.path2=t.details.path2}).catch(t=>{s.notify("dark",t,"error",this.$q)}).then(t=>{this.loading=!1,s.empty(e)||e()})},onSubmit(){this.loading2=!0,s.fetchDataByToken("updateInformation",{is_ready:this.is_ready==!0?2:1,restaurant_name:this.restaurant_name,restaurant_slug:this.restaurant_slug,contact_name:this.contact_name,contact_email:this.contact_email,description:this.description,short_description:this.short_description,cuisine:this.cuisine,services:this.services,tags:this.tags,featured:this.featured,delivery_distance_covered:this.delivery_distance_covered,distance_unit:this.distance_unit,logo:this.logo,upload_path:this.upload_path,featured_data:this.hadFeaturedData()?this.featured_data.data:"",image_type:this.hadFeaturedData()?this.featured_data.format:"",header_image_data:this.hadHeader()?this.featured_data2.data:"",header_image_type:this.hadHeader()?this.featured_data2.format:"",header_image:this.header_image,path2:this.path2}).then(e=>{s.notify("light-green",e.msg,"check_circle",this.$q)}).catch(e=>{s.notify("dark",e,"error",this.$q)}).then(e=>{this.loading2=!1})},takePhoto(){this.$q.capacitor?c.isCameraEnabled().then(e=>{c.isFileAccessEnabled().then(t=>{c.getPhoto(1).then(h=>{this.featured_data=h}).catch(h=>{this.featured_data=[]})}).catch(t=>{s.notify("dark",t,"error",this.$q)})}).catch(e=>{s.notify("dark",e,"error",this.$q)}):this.upload_enabled=!this.upload_enabled},takePhoto2(){this.$q.capacitor?c.isCameraEnabled().then(e=>{c.isFileAccessEnabled().then(t=>{c.getPhoto(1).then(h=>{this.featured_data2=h}).catch(h=>{this.featured_data2=[]})}).catch(t=>{s.notify("dark",t,"error",this.$q)})}).catch(e=>{s.notify("dark",e,"error",this.$q)}):this.upload_header_enabled=!this.upload_header_enabled},afterUploadfile(e){this.logo=e.filename,this.logo_url=e.url_image,this.upload_path=e.upload_path},afterUploadfile2(e){this.header_image=e.filename,this.header_image_url=e.url_image,this.path2=e.upload_path},afterInput(e){this.translation_data=e},hadFeaturedData(){return Object.keys(this.featured_data).length>0},hadHeader(){return Object.keys(this.featured_data2).length>0}}},$={class:"q-pa-md q-gutter-md"},j={class:"row q-gutter-sm"},M={key:1,class:"col-3 relative-position"},R={class:"col"},O={class:"font12 line-normal"},G={key:0,class:"q-pl-sm"},J={class:"row items-center"},Z={class:"row q-gutter-sm"},K={key:1,class:"col-3 relative-position"},W={class:"col"},X={class:"font12 line-normal"},Y={key:1,class:"q-pl-sm"};function x(e,t,h,g,l,r){const v=P("UploaderFile");return i(),f(L,{onRefresh:r.refresh},{default:u(()=>[o(T,{class:y({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:u(()=>[o(I,null,{default:u(()=>[o(m,{onClick:t[0]||(t[0]=a=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),o(S,{class:"text-weight-bold"},{default:u(()=>[w(_(e.$t("Information")),1)]),_:1})]),_:1}),o(D)]),_:1},8,["class"]),o(E,{class:y({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:u(()=>[l.loading?(i(),f(F,{key:0,showing:!0,color:"primary",size:"md","label-class":"dark",class:"transparent"})):(i(),f(B,{key:1,onSubmit:r.onSubmit},{default:u(()=>[n("div",$,[n("div",j,[r.hasFeaturedData?(i(),f(k,{key:0,src:l.featured_data.path,"spinner-color":"primary","spinner-size":"sm",fit:"cover",style:{height:"70px"},class:"col-3 radius8"},null,8,["src"])):r.hasPhoto?(i(),p("div",M,[o(m,{round:"",color:e.$q.dark.mode?"grey600":"mygrey","text-color":e.$q.dark.mode?"grey300":"dark",icon:"las la-trash",unelevated:"",size:"sm",class:"absolute-top-right z-tap",style:{top:"-10px",right:"-10px"},onClick:r.clearLogo},null,8,["color","text-color","onClick"]),o(k,{src:this.logo_url,"spinner-color":"primary","spinner-size":"sm",fit:"cover",style:{height:"70px"},class:"radius8"},null,8,["src"])])):(i(),p("div",{key:2,class:y(["col-3 row items-center justify-center radius8",{"bg-grey600 ":e.$q.dark.mode,"bg-mygrey ":!e.$q.dark.mode}]),style:{height:"70px"}},[o(V,{name:"las la-image",class:"text-grey",size:"xl"})],2)),n("div",R,[n("div",O,_(e.$t("Items with quality photos are often more popular. Maximum 2 MB"))+". "+_(e.$t("Accepted types: PNG. JPG")),1),o(m,{label:r.hasPhoto?this.$t("Change Logo"):r.hasFeaturedData?this.$t("Change Logo"):this.$t("Add Logo"),flat:"",color:"primary","no-caps":"",class:"q-pl-none q-pr-none",onClick:r.takePhoto},null,8,["label","onClick"])])]),l.upload_enabled?(i(),p("div",G,[o(v,{ref:"uploader_file",onAfterUploadfile:r.afterUploadfile},null,8,["onAfterUploadfile"])])):q("",!0),o(z,{modelValue:l.is_ready,"onUpdate:modelValue":t[1]||(t[1]=a=>l.is_ready=a),label:e.$t("Published Merchant")},null,8,["modelValue","label"]),o(d,{outlined:"",modelValue:l.restaurant_name,"onUpdate:modelValue":t[2]||(t[2]=a=>l.restaurant_name=a),label:e.$t("Restaurant name"),"stack-label":"",color:"grey-5","lazy-rules":"",rules:[a=>a&&a.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),o(d,{outlined:"",modelValue:l.restaurant_slug,"onUpdate:modelValue":t[3]||(t[3]=a=>l.restaurant_slug=a),label:e.$t("Restaurant Slug"),"stack-label":"",color:"grey-5","lazy-rules":"",rules:[a=>a&&a.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),o(d,{outlined:"",modelValue:l.contact_name,"onUpdate:modelValue":t[4]||(t[4]=a=>l.contact_name=a),label:e.$t("Contact Name"),"stack-label":"",color:"grey-5"},null,8,["modelValue","label"]),o(d,{outlined:"",modelValue:l.contact_phone,"onUpdate:modelValue":t[5]||(t[5]=a=>l.contact_phone=a),label:e.$t("Contact Phone"),"stack-label":"",color:"grey-5","lazy-rules":"",rules:[a=>a&&a.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),o(d,{outlined:"",modelValue:l.contact_email,"onUpdate:modelValue":t[6]||(t[6]=a=>l.contact_email=a),label:e.$t("Contact email"),"stack-label":"",color:"grey-5","lazy-rules":"",rules:[a=>a&&a.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),o(d,{outlined:"",modelValue:l.description,"onUpdate:modelValue":t[7]||(t[7]=a=>l.description=a),label:e.$t("About"),"stack-label":"",color:"grey-5","lazy-rules":"",type:"textarea"},null,8,["modelValue","label"]),o(d,{outlined:"",modelValue:l.short_description,"onUpdate:modelValue":t[8]||(t[8]=a=>l.short_description=a),label:e.$t("Short About"),"stack-label":"",color:"grey-5","lazy-rules":"",type:"textarea"},null,8,["modelValue","label"]),o(b,{outlined:"",modelValue:l.cuisine,"onUpdate:modelValue":t[9]||(t[9]=a=>l.cuisine=a),label:e.$t("Cuisine"),color:"grey-5",options:g.DataStore.cuisine,multiple:"",behavior:"dialog","transition-show":"fade","transition-hide":"fade","options-html":"","map-options":"","emit-value":""},null,8,["modelValue","label","options"]),o(b,{outlined:"",modelValue:l.services,"onUpdate:modelValue":t[10]||(t[10]=a=>l.services=a),label:e.$t("Services"),color:"grey-5",options:g.DataStore.services,multiple:"",behavior:"dialog","transition-show":"fade","transition-hide":"fade",rules:[a=>a&&a.length>0||this.$t("This field is required")],"options-html":"","map-options":"","emit-value":""},null,8,["modelValue","label","options","rules"]),o(b,{outlined:"",modelValue:l.tags,"onUpdate:modelValue":t[11]||(t[11]=a=>l.tags=a),label:e.$t("Tags"),color:"grey-5",options:g.DataStore.tags,multiple:"",behavior:"dialog","transition-show":"fade","transition-hide":"fade","options-html":"","map-options":"","emit-value":""},null,8,["modelValue","label","options"]),o(b,{outlined:"",modelValue:l.featured,"onUpdate:modelValue":t[12]||(t[12]=a=>l.featured=a),label:e.$t("Featured"),color:"grey-5",options:g.DataStore.featured,multiple:"",behavior:"dialog","transition-show":"fade","transition-hide":"fade","options-html":"","map-options":"","emit-value":""},null,8,["modelValue","label","options"]),n("div",J,[o(d,{type:"number",outlined:"",modelValue:l.delivery_distance_covered,"onUpdate:modelValue":t[13]||(t[13]=a=>l.delivery_distance_covered=a),label:e.$t("Delivery Distance Covered"),"stack-label":"",color:"grey-5",class:"col q-mr-sm"},null,8,["modelValue","label"]),o(b,{outlined:"",modelValue:l.distance_unit,"onUpdate:modelValue":t[14]||(t[14]=a=>l.distance_unit=a),options:g.DataStore.unit,label:e.$t("Distance Unit"),color:"grey-5","stack-label":"",class:"col","map-options":"","emit-value":""},null,8,["modelValue","options","label"])]),n("div",Z,[r.hasHeader?(i(),f(k,{key:0,src:l.featured_data2.path,"spinner-color":"primary","spinner-size":"sm",fit:"cover",style:{height:"70px"},class:"col-3 radius8"},null,8,["src"])):r.hasPhoto2?(i(),p("div",K,[o(m,{round:"",color:e.$q.dark.mode?"grey600":"mygrey","text-color":e.$q.dark.mode?"grey300":"dark",icon:"las la-trash",unelevated:"",size:"sm",class:"z-top absolute-top-right",style:{top:"-10px",right:"-10px"},onClick:r.clearHeaderImage},null,8,["color","text-color","onClick"]),o(k,{src:this.header_image_url,"spinner-color":"primary","spinner-size":"sm",fit:"cover",style:{height:"70px"},class:"radius8"},null,8,["src"])])):(i(),p("div",{key:2,class:y(["col-3 row items-center justify-center radius8",{"bg-grey600 ":e.$q.dark.mode,"bg-mygrey ":!e.$q.dark.mode}]),style:{height:"70px"}},[o(V,{name:"las la-image",class:"text-grey",size:"xl"})],2)),n("div",W,[n("div",X,_(e.$t("Items with quality photos are often more popular. Maximum 2 MB"))+". "+_(e.$t("Accepted types: PNG. JPG")),1),o(m,{label:r.hasPhoto2?this.$t("Change Header"):r.hasHeader?this.$t("Change Header"):this.$t("Add Header"),flat:"",color:"primary","no-caps":"",class:"q-pl-none q-pr-none",onClick:r.takePhoto2},null,8,["label","onClick"])])]),l.upload_header_enabled?(i(),p("div",Y,[o(v,{ref:"uploader_file2",onAfterUploadfile:r.afterUploadfile2},null,8,["onAfterUploadfile"])])):q("",!0)]),o(H,{class:y(["q-pl-md q-pr-md q-pb-xs",{"bg-mydark ":e.$q.dark.mode,"bg-white ":!e.$q.dark.mode}])},{default:u(()=>[o(m,{type:"submit",color:"primary","text-color":"white",label:e.$t("Save"),unelevated:"",class:"full-width radius8",size:"lg","no-caps":"",loading:l.loading2},null,8,["label","loading"])]),_:1},8,["class"])]),_:1},8,["onSubmit"]))]),_:1},8,["class"])]),_:1},8,["onRefresh"])}var ve=C(N,[["render",x]]);export{ve as default};
