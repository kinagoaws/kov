import{_ as x,ar as b,X as R,p as P,q as r,Z as o,j as e,v as t,F as d,a4 as I,a0 as m,a1 as n,ae as u,aj as T,a3 as v,t as g,a6 as Q,a7 as s,au as C,a8 as L,ah as A}from"./index.5da0f878.js";import{Q as B}from"./QToolbarTitle.56a1528c.js";import{Q as D}from"./QToolbar.b7ddade1.js";import{Q as O}from"./QHeader.6b7f1431.js";import{Q as N}from"./QImg.bfa83115.js";import{Q as w}from"./QItemLabel.6219c46e.js";import{Q as y}from"./QList.d63bde81.js";import{Q as i}from"./QSkeleton.846fbbc5.js";import{Q as S}from"./QInfiniteScroll.fdf8cbfc.js";import{Q as V}from"./QPage.ab42a258.js";import{Q as $}from"./QPullToRefresh.b2c7d1c7.js";import"./QResizeObserver.21f20b80.js";import"./TouchPan.b989d673.js";import"./selection.a405500a.js";import"./format.de7e9769.js";const j={data(){return{loading:!1,data:[],page:0,is_refresh:!1}},components:{ReviewOverview:b(()=>C(()=>import("./ReviewOverview.406613fe.js"),["assets/ReviewOverview.406613fe.js","assets/index.5da0f878.js","assets/index.96a3fb36.css","assets/QLinearProgress.c2c7b76c.js","assets/QSpace.334d24e5.js","assets/QSkeleton.846fbbc5.js","assets/ReviewOverviewStore.eba0605f.js"]))},computed:{hasData(){return Object.keys(this.data).length>0},hasDataSummary(){return Object.keys(this.data_summary).length>0}},methods:{getReview(a,c){this.loading=!0,R.fetchDataByTokenPost("getReview","page="+a).then(h=>{this.page=a,this.data.push(h.details.data)}).catch(h=>{this.data_done=!0,this.$refs.nscroll.stop()}).then(h=>{c(),this.loading=!1})},changeColor(a){return a>0?"primary":"dark"},refresh(a){this.resetPagination(),this.page=0,this.is_refresh=!0,setTimeout(()=>{this.is_refresh=!1,a()},1e3)},resetPagination(){this.page=0,this.data=[],this.$refs.nscroll.reset(),this.$refs.nscroll.resume(),this.$refs.nscroll.trigger()}}},q={key:0,class:"flex flex-center q-pa-xl"},E={class:"text-center"},F={class:"font16 text-weight-bold"},z={class:"font11"},H={class:"flex flex-center q-gutter-sm"},X={class:"font13"};function Z(a,c,h,G,_,p){const k=P("ReviewOverview");return r(),o(d,null,[e(O,{class:"bg-white",reveal:"","reveal-offset":"50"},{default:t(()=>[e(D,null,{default:t(()=>[e(I,{onClick:c[0]||(c[0]=f=>a.$router.back()),flat:"",round:"",dense:"",icon:"arrow_back",color:"dark"}),e(B,{class:"text-grey-10"},{default:t(()=>[m(n(a.$t("Reviews")),1)]),_:1})]),_:1})]),_:1}),e($,{onRefresh:p.refresh},{default:t(()=>[e(V,{padding:"",class:"bg-grey-1"},{default:t(()=>[e(k,{overview:!0,refresh:_.is_refresh},null,8,["refresh"]),!p.hasData&&!_.loading?(r(),o("div",q,[u("div",E,[u("div",F,n(a.$t("No available data")),1),u("p",z,n(a.$t("Pull down the page to refresh")),1)])])):T("",!0),e(S,{ref:"nscroll",onLoad:p.getReview,offset:250},{default:t(()=>[e(y,{separator:"",class:"bg-white"},{default:t(()=>[(r(!0),o(d,null,v(_.data,f=>(r(),o(d,{key:f},[(r(!0),o(d,null,v(f,l=>(r(),g(Q,{key:l},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(L,null,{default:t(()=>[e(N,{src:l.avatar,style:{height:"50px","max-width":"50px"},fit:"cover"},null,8,["src"])]),_:2},1024)]),_:2},1024),e(s,null,{default:t(()=>[e(w,null,{default:t(()=>[m(n(l.review),1)]),_:2},1024),e(w,{class:"font11",caption:""},{default:t(()=>[m(n(l.date_created),1)]),_:2},1024)]),_:2},1024),e(s,{side:""},{default:t(()=>[u("div",H,[u("div",X,n(l.rating),1),e(A,{name:"las la-star",size:"15px",color:p.changeColor(l.rating)},null,8,["color"])])]),_:2},1024)]),_:2},1024))),128))],64))),128))]),_:1})]),loading:t(()=>[_.page<=0?(r(),g(y,{key:0},{default:t(()=>[(r(),o(d,null,v(6,f=>e(Q,{key:f},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(i,{type:"QAvatar"})]),_:1}),e(s,null,{default:t(()=>[e(i,{type:"text"}),e(i,{type:"text",style:{width:"100px"}})]),_:1})]),_:2},1024)),64))]),_:1})):(r(),g(y,{key:1},{default:t(()=>[e(Q,null,{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(i,{type:"QAvatar"})]),_:1}),e(s,null,{default:t(()=>[e(i,{type:"text"}),e(i,{type:"text",style:{width:"100px"}})]),_:1})]),_:1})]),_:1}))]),_:1},8,["onLoad"])]),_:1})]),_:1},8,["onRefresh"])],64)}var fe=x(j,[["render",Z]]);export{fe as default};
