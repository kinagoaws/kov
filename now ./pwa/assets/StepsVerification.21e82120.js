import{Q as f}from"./QSpace.0d53e539.js";import{_ as p,A as m,p as n,q as c,t as r,f as o,b8 as g,a4 as u,b9 as b,ar as d,$ as i,a2 as h,au as y,av as _,aS as w}from"./index.c29f7992.js";import{Q as C}from"./QToolbar.19752286.js";import{Q as k}from"./QForm.32515fc9.js";import{Q}from"./QInnerLoading.d034c390.js";const V={name:"StepsVerification",props:["sent_message"],data(){return{show_modal:!1,loading:!1,visible:!1,code:"",counter:20,timer:void 0,sent_message2:""}},computed:{hasCode(){return!!m.empty(this.code)}},updated(){this.code=""},watch:{counter(e,s){e<=0&&this.stopTimer()},show_modal(e,s){e&&this.startTimer()},sent_message(e,s){this.sent_message2=e}},methods:{onSubmit(){this.$emit("afterVerifycode",this.code)},stopTimer(){clearInterval(this.timer)},startTimer(){this.stopTimer(),this.counter=20,this.timer=setInterval(()=>{this.counter--},1e3)},resendCode(){this.loading=!0,m.fetchDataByTokenPost("RequestEmailCode","").then(e=>{this.sent_message2=e.msg,this.startTimer()}).catch(e=>{m.notify("red-5",e,"error_outline",this.$q)}).then(e=>{this.loading=!1})}}},q={class:"text-weight-bold q-mt-none"},v={class:"text-weight-medium line-normal"},S={key:0,class:"text-weight-bold font11"},T={class:"q-mb-sm text-center"},x={key:1,class:"font11 q-ma-none"};function B(e,s,z,I,t,a){return n(),c(w,{modelValue:t.show_modal,"onUpdate:modelValue":s[2]||(s[2]=l=>t.show_modal=l),persistent:"",position:"bottom"},{default:r(()=>[o(g,null,{default:r(()=>[o(C,{class:"text-primary top-toolbar q-pl-md",dense:""},{default:r(()=>[o(f),o(u,{onClick:s[0]||(s[0]=l=>t.show_modal=!1),color:"white",square:"",unelevated:"","text-color":"grey",icon:"las la-times",dense:"","no-caps":"",size:"sm",class:"border-grey radius8"})]),_:1}),o(k,{onSubmit:a.onSubmit},{default:r(()=>[o(b,{class:"text-center"},{default:r(()=>[d("h5",q,i(e.$t("2-Step Verification")),1),d("p",v,i(e.$t("For your security, we want to make sure it's really you"))+". ",1),t.sent_message2?(n(),h("p",S,i(t.sent_message2),1)):y("",!0),o(_,{"bg-color":e.$q.dark.mode?"grey600":"mygrey",color:e.$q.dark.mode?"grey300":"primary",outlined:"",modelValue:t.code,"onUpdate:modelValue":s[1]||(s[1]=l=>t.code=l),label:e.$t("Code"),maxlength:"6","lazy-rules":"",rules:[l=>l&&l.length>0||this.$t("Code is required")],mask:"######"},null,8,["bg-color","color","modelValue","label","rules"]),o(u,{type:"submit",unelevated:"","no-caps":"",class:"full-width q-mb-md radius8",label:e.$t("Submit"),size:"lg",disabled:a.hasCode,loading:t.loading,color:a.hasCode==!1?"primary":"grey-5","text-color":a.hasCode==!1?"white":"dark"},null,8,["label","disabled","loading","color","text-color"]),d("div",T,[t.counter===0?(n(),c(u,{key:0,onClick:a.resendCode,flat:"",color:"blue","no-caps":"",label:e.$t("Resend"),dense:"",size:"md"},null,8,["onClick","label"])):(n(),h("p",x,[d("u",null,i(e.$t("Resend Code in"))+" "+i(t.counter),1)]))])]),_:1})]),_:1},8,["onSubmit"]),o(Q,{showing:t.visible,color:"primary",size:"md","label-class":"dark"},null,8,["showing"])]),_:1})]),_:1},8,["modelValue"])}var F=p(V,[["render",B]]);export{F as default};
