import{_ as b,aA as C,A as _,n as L,p as r,a2 as d,f as e,t as a,F as m,a1 as y,a4 as P,q as h,Z as u,$ as o,au as w,a0 as $,a3 as Q,ar as v,aB as q,a6 as x,a7 as k,a8 as A}from"./index.c29f7992.js";import{Q as I}from"./QToolbarTitle.38b5862b.js";import{Q as V}from"./QToolbar.19752286.js";import{Q as B}from"./QHeader.8a0fa205.js";import{Q as D}from"./QImg.a00dd4e9.js";import{Q as p}from"./QItemLabel.1db45aa2.js";import{Q as T}from"./QChip.5de2d333.js";import{Q as z}from"./QRating.d40e6323.js";import{Q as N}from"./QList.04c37cb8.js";import{Q as S}from"./QInnerLoading.d034c390.js";import{Q as E}from"./QSpinnerDots.f880c3c3.js";import{Q as j}from"./QInfiniteScroll.894949b1.js";import{Q as F}from"./QPage.1b02519d.js";import{Q as O}from"./QPullToRefresh.9f003a0c.js";import"./QResizeObserver.0e413222.js";import"./format.de7e9769.js";import"./TouchPan.5fac99c8.js";import"./touch.9135741d.js";import"./selection.53b1fe34.js";const H={name:"ReviewList",components:{ReviewReply:C(()=>q(()=>import("./ReviewReply.2ecf13ff.js"),["assets/ReviewReply.2ecf13ff.js","assets/QToolbarTitle.38b5862b.js","assets/index.c29f7992.js","assets/index.8924bfb8.css","assets/QSpace.0d53e539.js","assets/QToolbar.19752286.js","assets/QCircularProgress.bcda6a33.js","assets/format.de7e9769.js","assets/QFooter.478b051a.js","assets/QResizeObserver.0e413222.js","assets/QForm.32515fc9.js","assets/ClosePopup.ab93d23e.js"]))},data(){return{loading:!0,data:[],page:0,data_done:!1,is_refresh:void 0,selected_items:[],total_items:0}},computed:{hasData(){return Object.keys(this.data).length>0}},created(){},methods:{initReply(t){this.selected_items=t,this.$refs.review_reply.dialog=!0},refresh(t){this.resetPagination(),this.is_refresh=t},getCustomerReview(t,i){this.loading=!0,_.fetchDataByTokenPost("getCustomerReview","page="+t).then(f=>{this.page=t,this.total_items=f.details.total_items,this.data.push(f.details.data)}).catch(f=>{this.data_done=!0,this.$refs.nscroll.stop()}).then(f=>{i(),this.loading=!1,_.empty(this.is_refresh)||this.is_refresh()})},resetPagination(){this.page=0,this.data=[],this.$refs.nscroll.reset(),this.$refs.nscroll.resume(),this.$refs.nscroll.trigger()},afterReply(){this.$refs.review_reply.dialog=!1,this.resetPagination()}}},U={key:1,class:"row justify-center q-my-md"},Z={key:0,class:"full-width text-center"},G={class:"text-weight-bold"},J={class:"text-grey font12"};function K(t,i,f,M,l,n){const R=L("ReviewReply");return r(),d(m,null,[e(O,{onRefresh:n.refresh},{default:a(()=>[e(B,{class:y({"bg-mydark text-white":t.$q.dark.mode,"bg-white text-dark":!t.$q.dark.mode})},{default:a(()=>[e(V,null,{default:a(()=>[e(P,{onClick:i[0]||(i[0]=c=>t.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:t.$q.dark.mode?"white":"dark"},null,8,["color"]),l.loading?w("",!0):(r(),h(I,{key:0,class:"text-weight-bold"},{default:a(()=>[u(o(t.$t("Customer reviews"))+" ("+o(l.total_items)+")",1)]),_:1}))]),_:1}),e($)]),_:1},8,["class"]),e(F,{class:y({"bg-mydark text-white":t.$q.dark.mode,"bg-white text-dark":!t.$q.dark.mode,"flex flex-center":!l.loading&&!n.hasData})},{default:a(()=>[e(j,{ref:"nscroll",onLoad:n.getCustomerReview,offset:250},{loading:a(()=>[l.page<=0?(r(),h(S,{key:0,showing:!0,color:"primary",size:"md"})):(r(),d("div",U,[e(E,{color:"primary",size:"40px"})]))]),default:a(()=>[e(N,{separator:""},{default:a(()=>[(r(!0),d(m,null,Q(l.data,c=>(r(),d(m,{key:c},[(r(!0),d(m,null,Q(c,s=>(r(),h(x,{key:s,clickable:"",onClick:g=>n.initReply(s)},{default:a(()=>[e(k,{avatar:""},{default:a(()=>[e(A,null,{default:a(()=>[e(D,{src:s.avatar,"spinner-color":"white","placeholder-src":"placeholder.png"},null,8,["src"])]),_:2},1024)]),_:2},1024),e(k,{side:""},{default:a(()=>[e(p,{class:"text-weight-bold"},{default:a(()=>[u(o(s.customer_fullname),1)]),_:2},1024),e(p,{caption:""},{default:a(()=>[u(o(s.review),1)]),_:2},1024),e(p,{caption:"",class:"font11"},{default:a(()=>[u(o(s.date_created),1)]),_:2},1024),e(p,null,{default:a(()=>[e(T,{label:s.status,size:"sm"},null,8,["label"]),e(z,{modelValue:t.rating,"onUpdate:modelValue":i[1]||(i[1]=g=>t.rating=g),"model-value":s.rating,size:"13px",max:5,color:"grey","color-selected":"yellow-14",readonly:"",class:"q-mb-xs no-shadow"},null,8,["modelValue","model-value"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))],64))),128))]),_:1})]),_:1},8,["onLoad"]),!l.loading&&!n.hasData?(r(),d("div",Z,[v("div",G,o(t.$t("No data available")),1),v("p",J,o(t.$t("new review will show here")),1)])):w("",!0)]),_:1},8,["class"])]),_:1},8,["onRefresh"]),e(R,{ref:"review_reply",data:l.selected_items,onAfterReply:n.afterReply},null,8,["data","onAfterReply"])],64)}var ge=b(H,[["render",K]]);export{ge as default};
