import{_ as x,aA as g,u as T,A as y,n as Q,p as a,q as f,t as r,f as t,a4 as b,Z as S,$ as d,a0 as V,a1 as v,ar as p,av as B,ae as P,au as h,a2 as o,F as i,a3 as w,aB as C,a6 as E,a7 as I,a8 as L}from"./index.c29f7992.js";import{Q as N}from"./QToolbarTitle.38b5862b.js";import{Q as R}from"./QToolbar.19752286.js";import{Q as j}from"./QHeader.8a0fa205.js";import{Q as z}from"./QSpace.0d53e539.js";import{Q as F}from"./QImg.a00dd4e9.js";import{Q as _}from"./QItemLabel.1db45aa2.js";import{Q as O}from"./QList.04c37cb8.js";import{Q as $}from"./QAjaxBar.c9f7e53a.js";import{Q as H}from"./QPage.1b02519d.js";import{Q as M}from"./QPullToRefresh.9f003a0c.js";import{u as U}from"./SearchStore.674246eb.js";import{u as Z}from"./CartStore.99e9bb86.js";import"./QResizeObserver.0e413222.js";import"./format.de7e9769.js";import"./TouchPan.5fac99c8.js";import"./touch.9135741d.js";import"./selection.53b1fe34.js";const G={name:"SearchTables",components:{TableSkeleton:g(()=>C(()=>import("./TableSkeleton.3238dea0.js"),["assets/TableSkeleton.3238dea0.js","assets/QSkeleton.81a2bab8.js","assets/index.c29f7992.js","assets/index.8924bfb8.css","assets/QItemLabel.1db45aa2.js","assets/QList.04c37cb8.js"])),ItemDetails:g(()=>C(()=>import("./ItemDetails.8b10d0d4.js"),["assets/ItemDetails.8b10d0d4.js","assets/index.c29f7992.js","assets/index.8924bfb8.css","assets/QImg.a00dd4e9.js","assets/QItemLabel.1db45aa2.js","assets/QList.04c37cb8.js","assets/QSelect.ae814dfc.js","assets/QChip.5de2d333.js","assets/QMenu.074d3579.js","assets/selection.53b1fe34.js","assets/rtl.276c3f1b.js","assets/format.de7e9769.js","assets/QSpace.0d53e539.js","assets/ClosePopup.ab93d23e.js"]))},setup(){const e=U(),l=T(),k=Z();return{SearchStore:e,DataStore:l,CartStore:k}},data(){return{q:"",loading:!1}},created(){this.SearchStore.data=""},computed:{hasSearch(){return!y.empty(this.q)}},methods:{viewItems(e){let l=this.$refs.bar;this.$refs.item_details.getMenuItem(e,l)},refresh(e){this.clearSearch(),e()},clearSearch(){this.SearchStore.is_submit=!1,this.q="",this.SearchStore.data=[]},doSearch(){this.loading=!0,this.SearchStore.data=[],this.SearchStore.status=[],this.SearchStore.is_submit=!0,y.fetchDataByTokenPost("searchfooditems","q="+this.q).then(e=>{this.SearchStore.data=e.details.data}).catch(e=>{}).then(e=>{this.loading=!1})},afterAddtocart(){this.CartStore.getCart(this.DataStore.cart_uuid)}}},J={class:"q-pa-md full-width"},K={key:0,class:"full-width text-center"},W={key:1,class:"full-width text-center"},X={class:"text-weight-bold"},Y={class:"text-weight-light text-grey"};function ee(e,l,k,n,m,c){const q=Q("TableSkeleton"),A=Q("ItemDetails");return a(),f(M,{onRefresh:c.refresh},{default:r(()=>[t(j,{class:v({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode}),reveal:"","reveal-offset":"50"},{default:r(()=>[t(R,null,{default:r(()=>[t(b,{onClick:l[0]||(l[0]=s=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),t(N,{class:"text-weight-bold"},{default:r(()=>[S(d(e.$t("Search items")),1)]),_:1})]),_:1}),t(V)]),_:1},8,["class"]),t(H,{class:v([{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode},"flex justify-start"])},{default:r(()=>[p("div",J,[t(B,{outlined:"",modelValue:m.q,"onUpdate:modelValue":l[1]||(l[1]=s=>m.q=s),label:e.$t("Search"),color:"grey-5"},{append:r(()=>[n.SearchStore.hasData?(a(),f(P,{key:0,class:"cursor-pointer",name:"close",color:"grey",onClick:c.clearSearch},null,8,["onClick"])):h("",!0),n.SearchStore.hasData?h("",!0):(a(),f(b,{key:1,icon:"search",unelevated:"",color:"dark-grey","no-caps":"",loading:m.loading,round:"",flat:"",onClick:c.doSearch,disable:!c.hasSearch},null,8,["loading","onClick","disable"]))]),_:1},8,["modelValue","label"]),n.SearchStore.hasData?(a(),o(i,{key:0},[t(z,{class:"q-mt-md"}),t(O,{separator:""},{default:r(()=>[(a(!0),o(i,null,w(n.SearchStore.data,s=>(a(),f(E,{key:s,clickable:"",onClick:u=>c.viewItems(s)},{default:r(()=>[t(I,{avatar:"",top:""},{default:r(()=>[t(L,{size:"50px"},{default:r(()=>[t(F,{src:s.url_image,style:{width:"50px",height:"50px"}},null,8,["src"])]),_:2},1024)]),_:2},1024),t(I,null,{default:r(()=>[t(_,{class:"text-dark"},{default:r(()=>[S(d(s.item_name),1)]),_:2},1024),t(_,{caption:"",lines:"2"},{default:r(()=>[S(d(s.item_description),1)]),_:2},1024),t(_,{caption:""},{default:r(()=>[(a(!0),o(i,null,w(s.price,(u,D)=>(a(),o(i,{key:u},[D<=0?(a(),o(i,{key:0},[u.discount>0?(a(),o(i,{key:0},[S(d(u.pretty_price_after_discount),1)],64)):(a(),o(i,{key:1},[S(d(u.pretty_price),1)],64))],64)):h("",!0)],64))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})],64)):h("",!0),m.loading?(a(),f(q,{key:1,rows:10})):h("",!0)]),n.SearchStore.is_submit?(a(),o("div",W,[!n.SearchStore.hasData&&!m.loading?(a(),o(i,{key:0},[p("div",X,d(e.$t("No data available")),1),p("div",Y,d(e.$t("Sorry, we couldn't find any results")),1)],64)):h("",!0)])):(a(),o("div",K)),t(A,{ref:"item_details",onAfterAddtocart:c.afterAddtocart},null,8,["onAfterAddtocart"]),t($,{ref:"bar",position:"top",color:"primary",size:"2px","skip-hijack":""},null,512)]),_:1},8,["class"])]),_:1},8,["onRefresh"])}var ge=x(G,[["render",ee]]);export{ge as default};
