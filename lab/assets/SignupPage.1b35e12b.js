import{_ as B,aA as y,A as S,u as M,n as v,p as o,a2 as m,f as a,t as s,a1 as V,F as p,a4 as D,Z as h,$ as i,a0 as U,q as u,ar as d,av as A,au as g,a3 as q,aB as k,a5 as L,a6 as C,a7 as f,a9 as F,aa as R,aC as w}from"./index.c29f7992.js";import{Q as N}from"./QToolbarTitle.38b5862b.js";import{Q as O}from"./QToolbar.19752286.js";import{Q as z}from"./QHeader.8a0fa205.js";import{Q}from"./QSpace.0d53e539.js";import{Q as H}from"./QSelect.ae814dfc.js";import{Q as b}from"./QItemLabel.1db45aa2.js";import{Q as I}from"./QList.04c37cb8.js";import{Q as j}from"./QFooter.478b051a.js";import{Q as G}from"./QForm.32515fc9.js";import{Q as Z}from"./QPage.1b02519d.js";import"./QResizeObserver.0e413222.js";import"./QChip.5de2d333.js";import"./QMenu.074d3579.js";import"./selection.53b1fe34.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";const J={name:"SignupPage",data(){return{restaurant_name:"",loading:!1,membership_type:"1",address:"",contact_email:"",phone:[],latitude:"",lontitude:"",services:[],currency:""}},components:{ListLoading:y(()=>k(()=>import("./ListLoading.159fbe89.js"),["assets/ListLoading.159fbe89.js","assets/index.c29f7992.js","assets/index.8924bfb8.css"])),SearchAddress:y(()=>k(()=>import("./SearchAddress.5fe485bf.js"),["assets/SearchAddress.5fe485bf.js","assets/index.c29f7992.js","assets/index.8924bfb8.css","assets/QItemLabel.1db45aa2.js","assets/QSelect.ae814dfc.js","assets/QChip.5de2d333.js","assets/QMenu.074d3579.js","assets/selection.53b1fe34.js","assets/rtl.276c3f1b.js","assets/format.de7e9769.js"])),MobilePhone:y(()=>k(()=>import("./MobilePhone.866ca051.js"),["assets/MobilePhone.866ca051.js","assets/QImg.a00dd4e9.js","assets/index.c29f7992.js","assets/index.8924bfb8.css","assets/QItemLabel.1db45aa2.js","assets/QSelect.ae814dfc.js","assets/QChip.5de2d333.js","assets/QMenu.074d3579.js","assets/selection.53b1fe34.js","assets/rtl.276c3f1b.js","assets/format.de7e9769.js"]))},computed:{hasData(){return!S.empty(this.DataStore.registration_settings)&&Object.keys(this.DataStore.registration_settings).length>0}},setup(){return{DataStore:M()}},methods:{afterSelectaddress(e){this.address=e.address.formatted_address,this.latitude=e.latitude,this.lontitude=e.longitude},afterInput(e){this.phone=e},onSubmit(){this.loading=!0,S.fetchData("CreateAccountMerchant",{address:this.address,contact_email:this.contact_email,membership_type:this.membership_type,phone:this.phone,restaurant_name:this.restaurant_name,latitude:this.latitude,lontitude:this.lontitude,services:this.services,currency:this.currency}).then(e=>{this.$router.push({path:"/signup/create-user",query:{uuid:e.details.merchant_uuid}})}).catch(e=>{S.notify("dark",e,"error",this.$q)}).then(e=>{this.loading=!1})}}},K={class:"q-pl-md q-pr-md"},W={class:"text-weight-bold no-margin"},X={class:"text-weight-light q-ma-none"},Y={key:0,class:"q-pl-md q-pr-md"},$={class:"text-subtitle2"},x={class:"q-pl-md q-pr-md"},ee={class:"no-margin"},te={key:2,class:"q-pl-md q-pr-md q-mb-md"},ae={class:"text-subtitle2 q-pb-sm"},se={class:"text-subtitle2 q-pl-md q-pr-md q-pb-sm"},re={class:"q-pl-md q-pr-md"},oe={class:"font11"},le=["innerHTML"];function ie(e,l,ne,n,r,_){const T=v("ListLoading"),P=v("SearchAddress"),E=v("MobilePhone");return o(),m(p,null,[a(z,{class:V({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:s(()=>[a(O,null,{default:s(()=>[a(D,{onClick:l[0]||(l[0]=t=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),a(N,{class:"text-weight-bold"},{default:s(()=>[h(i(e.$t("Signup")),1)]),_:1})]),_:1}),a(U)]),_:1},8,["class"]),a(Z,{class:"q-pt-md"},{default:s(()=>[n.DataStore.loading?(o(),u(T,{key:0})):(o(),u(G,{key:1,onSubmit:_.onSubmit},{default:s(()=>[d("div",K,[d("h6",W,i(e.$t("Become Restaurant partner")),1),d("p",X,i(e.$t("Get a sales boost of up to 30% from takeaways")),1),a(Q,{class:"q-pa-sm"}),a(A,{modelValue:r.restaurant_name,"onUpdate:modelValue":l[1]||(l[1]=t=>r.restaurant_name=t),label:e.$t("Store name"),outlined:"","stack-label":"",color:"grey-5","lazy-rules":"",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),a(P,{ref:"search_address",onAfterSelectaddress:_.afterSelectaddress,placeholder:e.$t("Store address")},null,8,["onAfterSelectaddress","placeholder"]),a(Q,{class:"q-pa-sm"}),a(A,{modelValue:r.contact_email,"onUpdate:modelValue":l[2]||(l[2]=t=>r.contact_email=t),label:e.$t("Email address"),outlined:"","stack-label":"",color:"grey-5",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),a(E,{ref:"mobile_phone",onAfterInput:_.afterInput},null,8,["onAfterInput"])]),n.DataStore.getRegistrationSettings.multicurrency_enabled?(o(),m("div",Y,[d("div",$,i(e.$t("Select your currency")),1),a(H,{modelValue:r.currency,"onUpdate:modelValue":l[3]||(l[3]=t=>r.currency=t),label:e.$t("Currency"),options:n.DataStore.getRegistrationSettings.currency_list,"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5","emit-value":"","map-options":"",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","label","options","rules"])])):g("",!0),d("div",x,[d("p",ee,i(e.$t("Choose your membership program")),1)]),_.hasData?(o(),u(I,{key:1,dense:"",class:"q-mb-sm"},{default:s(()=>[(o(!0),m(p,null,q(n.DataStore.registration_settings.membership_list,t=>(o(),m(p,{key:t},[n.DataStore.registration_settings.registration_program.includes(t.type_id)?L((o(),u(C,{key:0,tag:"label"},{default:s(()=>[a(f,{avatar:""},{default:s(()=>[a(F,{modelValue:r.membership_type,"onUpdate:modelValue":l[4]||(l[4]=c=>r.membership_type=c),val:t.type_id,color:"secondary"},null,8,["modelValue","val"])]),_:2},1024),a(f,null,{default:s(()=>[a(b,null,{default:s(()=>[h(i(t.type_name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[R]]):g("",!0)],64))),128))]),_:1})):g("",!0),r.membership_type==1?(o(),m("div",te,[d("div",ae,i(e.$t("Choose your services")),1),(o(!0),m(p,null,q(n.DataStore.getRegistrationSettings.services_list,t=>(o(),u(w,{key:t,modelValue:r.services,"onUpdate:modelValue":l[5]||(l[5]=c=>r.services=c),val:t.service_code,label:t.service_name,color:"primary"},null,8,["modelValue","val","label"]))),128))])):(o(),m(p,{key:3},[d("div",se,i(e.$t("Choose your services")),1),a(I,{dense:""},{default:s(()=>[(o(!0),m(p,null,q(n.DataStore.getRegistrationSettings.services_list,t=>L((o(),u(C,{key:t,tag:"label",class:"q-mb-sm"},{default:s(()=>[a(f,{avatar:"",top:""},{default:s(()=>[a(w,{modelValue:r.services,"onUpdate:modelValue":l[6]||(l[6]=c=>r.services=c),val:t.service_code,color:"primary"},null,8,["modelValue","val"])]),_:2},1024),a(f,{top:""},{default:s(()=>[a(b,null,{default:s(()=>[h(i(t.service_name),1)]),_:2},1024),a(b,{caption:""},{default:s(()=>[h(i(e.$t(t.description,{site_name:n.DataStore.getRegistrationSettings.site_name,transaction_type:t.service_name})),1)]),_:2},1024),n.DataStore.getRegistrationSettings.membership_commission[r.membership_type]?(o(),u(b,{key:0,caption:""},{default:s(()=>[h(i(n.DataStore.getRegistrationSettings.membership_commission[r.membership_type][t.service_code].commission)+"% "+i(e.$t("fee per order")),1)]),_:2},1024)):g("",!0)]),_:2},1024)]),_:2},1024)),[[R]])),128))]),_:1}),a(Q,{class:"q-pa-sm"})],64)),d("div",re,[d("p",oe,[d("span",{innerHTML:n.DataStore.registration_settings.terms},null,8,le)])]),a(j,{class:V(["q-pa-md",{"bg-mydark ":e.$q.dark.mode,"bg-white ":!e.$q.dark.mode}])},{default:s(()=>[a(D,{type:"submit",color:"primary","text-color":"white",label:e.$t("Submit"),unelevated:"",class:"full-width",size:"lg","no-caps":"",loading:r.loading},null,8,["label","loading"])]),_:1},8,["class"])]),_:1},8,["onSubmit"]))]),_:1})],64)}var De=B(J,[["render",ie]]);export{De as default};
