import{_ as S,aA as D,u as $,A as v,n as B,p as r,a2 as o,f as t,t as s,a1 as n,F as i,ar as l,q as I,a3 as u,au as f,$ as g,a4 as L,aB as P,a6 as p,a7 as C,a8 as z,Z as _}from"./index.c29f7992.js";import{Q as k}from"./QSkeleton.81a2bab8.js";import{Q}from"./QList.04c37cb8.js";import{Q as q}from"./QImg.a00dd4e9.js";import{Q as y}from"./QItemLabel.1db45aa2.js";import{Q as N}from"./QSpace.0d53e539.js";import{Q as V}from"./QPageScroller.43c9aad6.js";import{Q as j}from"./QPage.1b02519d.js";import{Q as O}from"./QAjaxBar.c9f7e53a.js";import{u as T}from"./MenuStore.cd99501e.js";import{u as E}from"./CartStore.99e9bb86.js";import"./use-page-sticky.3a081baa.js";import"./format.de7e9769.js";const M={name:"CreateOrder",components:{ItemDetails:D(()=>P(()=>import("./ItemDetails.8b10d0d4.js"),["assets/ItemDetails.8b10d0d4.js","assets/index.c29f7992.js","assets/index.8924bfb8.css","assets/QImg.a00dd4e9.js","assets/QItemLabel.1db45aa2.js","assets/QList.04c37cb8.js","assets/QSelect.ae814dfc.js","assets/QChip.5de2d333.js","assets/QMenu.074d3579.js","assets/selection.53b1fe34.js","assets/rtl.276c3f1b.js","assets/format.de7e9769.js","assets/QSpace.0d53e539.js","assets/ClosePopup.ab93d23e.js"]))},data(){return{selected_category:void 0,category:[],category_loading:!0,items:[],items_loading:!0,dialog_items:!0}},setup(e){const h=T(),x=E(),b=$();return{MenuStore:h,CartStore:x,DataStore:b}},mounted(){this.CartStore.posAttributes(),this.getCategoryList()},computed:{getCategory(){return this.category},getItems(){return this.items},hasItems(){return Object.keys(this.items).length>0}},methods:{viewItems(e){let h=this.$refs.bar;e.cat_id=this.selected_category,this.$refs.item_details.getMenuItem(e,h)},getCategoryList(){this.category_loading=!0,v.fetchDataByTokenPost("CategoryList").then(e=>{this.category=e.details.data,this.selected_category=this.category[0].cat_id,this.categoryItems()}).catch(e=>{this.category=[],this.selected_category="",this.items_loading=!1}).then(e=>{this.category_loading=!1})},loadItems(e){this.selected_category=e,this.categoryItems()},categoryItems(){this.items_loading=!0,this.items=[],this.$refs.bar.start(),v.fetchDataByTokenPost("categoryItems","cat_id="+this.selected_category).then(e=>{this.items=e.details.data}).catch(e=>{this.items=[]}).then(e=>{this.items_loading=!1,this.$refs.bar&&this.$refs.bar.stop()})},afterAddtocart(){this.CartStore.getCart(this.DataStore.cart_uuid)}}},F={key:0,class:"row q-gutter-y-sm q-gutter-x-md"},R={key:1,style:{"min-height":"calc(70vh)"},class:"flex flex-center"},Z={class:"text-grey"},G={class:"row q-gutter-y-sm q-gutter-x-md"};function H(e,h,x,b,m,c){const w=B("ItemDetails");return r(),o(i,null,[t(j,{class:n([{"bg-mydark text-white":e.$q.dark.mode,"bg-grey-1 text-dark":!e.$q.dark.mode},"q-pr-md q-pl-md flex row items-stretch q-gutter-sm"])},{default:s(()=>[l("div",{class:n(["col-md-1 col-sm-2 col-xs-3 bg-whitex radius8",{"bg-grey600 text-white":e.$q.dark.mode,"bg-white":!e.$q.dark.mode}])},[m.category_loading?(r(),I(Q,{key:0},{default:s(()=>[(r(),o(i,null,u(8,a=>t(p,{key:a},{default:s(()=>[t(k,{type:"circle",size:"40px"})]),_:1})),64))]),_:1})):f("",!0),t(Q,null,{default:s(()=>[(r(!0),o(i,null,u(c.getCategory,a=>(r(),I(p,{key:a,clickable:"",onClick:d=>c.loadItems(a.cat_id)},{default:s(()=>[t(C,{avatar:""},{default:s(()=>[t(z,{class:n({"bg-primary":a.cat_id==m.selected_category})},{default:s(()=>[t(q,{src:a.url_image,fit:"cover","spinner-size":"sm","spinner-color":"primary",style:{height:"30px",width:"30px"},class:"radius28"},null,8,["src"])]),_:2},1032,["class"]),t(y,{caption:"",class:n(["text-center",{"text-primary":a.cat_id==m.selected_category}])},{default:s(()=>[_(g(a.category_name),1)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})],2),l("div",{class:n(["col bg-grey-1x radius8 q-pa-smx",{"bg-grey600 text-white":e.$q.dark.mode,"bg-grey-1":!e.$q.dark.mode}])},[m.items_loading?(r(),o("div",F,[(r(),o(i,null,u(12,a=>l("div",{key:a,class:"col-md-2 col-sm-3 col-xs-5"},[t(k,{height:"50px",square:"",class:"radius8",animation:"pulse"}),t(k,{type:"text",animation:"fade"})])),64))])):f("",!0),!c.hasItems&&!m.items_loading?(r(),o("div",R,[l("div",Z,[l("p",null,g(e.$t("No data available")),1)])])):f("",!0),l("div",G,[(r(!0),o(i,null,u(c.getItems,a=>(r(),o("div",{key:a,class:"col-md-2 col-sm-3 col-xs-5"},[l("div",{class:n(["bg-whitex radius8",{"bg-grey600 text-white":e.$q.dark.mode,"bg-white":!e.$q.dark.mode}])},[t(p,{clickable:"",onClick:d=>c.viewItems(a)},{default:s(()=>[t(C,null,{default:s(()=>[t(y,null,{default:s(()=>[t(q,{src:a.url_image,fit:"cover",style:{height:"50px"},"spinner-size":"sm","spinner-color":"primary",class:"full-width radius8"},null,8,["src"])]),_:2},1024),t(y,null,{default:s(()=>[_(g(a.item_name),1)]),_:2},1024),t(y,{caption:""},{default:s(()=>[(r(!0),o(i,null,u(a.price,(d,A)=>(r(),o(i,{key:d},[A<=0?(r(),o(i,{key:0},[d.discount>0?(r(),o(i,{key:0},[_(g(d.pretty_price_after_discount),1)],64)):(r(),o(i,{key:1},[_(g(d.pretty_price),1)],64))],64)):f("",!0)],64))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])],2)]))),128))]),t(N,{class:"q-pa-xl"})],2),t(V,{position:"bottom-right","scroll-offset":150,offset:[18,18]},{default:s(()=>[t(L,{fab:"",icon:"keyboard_arrow_up",color:"mygrey","text-color":"dark",dense:"",padding:"4px"})]),_:1})]),_:1},8,["class"]),t(w,{ref:"item_details",onAfterAddtocart:c.afterAddtocart},null,8,["onAfterAddtocart"]),t(O,{ref:"bar",position:"top",color:"primary",size:"2px","skip-hijack":""},null,512)],64)}var le=S(M,[["render",H]]);export{le as default};
