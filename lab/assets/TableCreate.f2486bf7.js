import{_ as v,u as q,A as s,p as r,a2 as d,f as l,t as n,a1 as f,F as m,a4 as h,Z as g,$ as b,q as c,au as k,a0 as T,ar as V,av as p,at as _}from"./index.c29f7992.js";import{Q}from"./QToolbarTitle.38b5862b.js";import{Q as $}from"./QToolbar.19752286.js";import{Q as S}from"./QHeader.8a0fa205.js";import{Q as D}from"./QInnerLoading.d034c390.js";import{Q as y}from"./QSelect.ae814dfc.js";import{Q as w}from"./QFooter.478b051a.js";import{Q as C}from"./QForm.32515fc9.js";import{Q as B}from"./QPage.1b02519d.js";import{u as A}from"./AccessStore.abc714c5.js";import"./QResizeObserver.0e413222.js";import"./QChip.5de2d333.js";import"./QItemLabel.1db45aa2.js";import"./QMenu.074d3579.js";import"./selection.53b1fe34.js";import"./rtl.276c3f1b.js";import"./format.de7e9769.js";const x={name:"TableCreate",setup(){const e=q(),a=A();return{DataStore:e,AccessStore:a}},data(){return{id:"",loading:!1,table_name:"",room_id:"",min_covers:0,max_covers:0,available:!0,status:"publish",data:[]}},mounted(){this.id=this.$route.query.id,s.empty(this.id)||this.getRoom()},computed:{isEdit(){return!s.empty(this.id)},hasData(){return Object.keys(this.data).length>0}},methods:{confirmDelete(){s.dialog(this.$t("Delete Confirmation"),this.$t("Are you sure you want to permanently delete the selected item?"),this.$t("Okay"),this.$t("Cancel"),this.$q).then(e=>{this.deleteRecords()}).catch(e=>{})},deleteRecords(){console.log(this.id),this.$q.loading.show({spinnerSize:30,spinnerColor:"primary"}),s.fetchDataByTokenPost("deleteTable","id="+this.id).then(e=>{this.$router.replace({path:"/table/tables"})}).catch(e=>{}).then(e=>{this.$q.loading.hide()})},formSubmit(){let e={id:this.id,table_name:this.table_name,room_id:this.room_id,min_covers:this.min_covers,max_covers:this.max_covers,available:this.available,status:this.status};s.showLoadingBox("",this.$q),s.fetchDataByTokenPost(s.empty(this.id)?"CreateTable":"UpdateTable",e).then(a=>{s.notify("light-green",a.msg,"check_circle",this.$q),this.$router.replace({path:"/table/tables"})}).catch(a=>{s.notify("red-5",a,"error_outline",this.$q)}).then(a=>{s.hideLoadingBox(this.$q)})},getRoom(){this.loading=!0,s.fetchDataByTokenPost("getTable","id="+this.id).then(e=>{this.table_name=e.details.table_name,this.room_id=parseInt(e.details.room_id),this.min_covers=e.details.min_covers,this.max_covers=e.details.max_covers,this.available=e.details.available==1,this.data=e.details}).catch(e=>{}).then(e=>{this.loading=!1})}}},U={key:0,class:"text-center"},N={class:"q-ma-none text-grey"};function E(e,a,P,u,o,i){return r(),d(m,null,[l(S,{class:f({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:n(()=>[l($,null,{default:n(()=>[l(h,{onClick:a[0]||(a[0]=t=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),l(Q,{class:"text-weight-bold"},{default:n(()=>[i.isEdit?(r(),d(m,{key:0},[g(b(e.$t("Update Table")),1)],64)):(r(),d(m,{key:1},[g(b(e.$t("Add Table")),1)],64))]),_:1}),u.AccessStore.hasAccess("booking.tables_delete")?(r(),d(m,{key:0},[i.hasData?(r(),c(h,{key:0,onClick:i.confirmDelete,flat:"",round:"",dense:"",icon:"las la-trash-alt",color:e.$q.dark.mode?"white":"dark"},null,8,["onClick","color"])):k("",!0)],64)):k("",!0)]),_:1}),l(T)]),_:1},8,["class"]),l(B,{class:f([{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode,"flex flex-center":i.isEdit&&!i.hasData},"q-pa-md"])},{default:n(()=>[o.loading?(r(),c(D,{key:0,showing:!0,color:"primary",size:"md"})):(r(),c(C,{key:1,onSubmit:i.formSubmit},{default:n(()=>[i.isEdit&&!i.hasData?(r(),d("div",U,[V("p",N,b(e.$t("No data available")),1)])):(r(),d(m,{key:1},[l(p,{modelValue:o.table_name,"onUpdate:modelValue":a[1]||(a[1]=t=>o.table_name=t),label:e.$t("Table Name"),"stack-label":"",outlined:"",color:"grey-5",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),l(y,{modelValue:o.room_id,"onUpdate:modelValue":a[2]||(a[2]=t=>o.room_id=t),options:u.DataStore.table_room_list,label:e.$t("Room"),"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5",rules:[t=>t||this.$t("This field is required")],"emit-value":"","map-options":""},null,8,["modelValue","options","label","rules"]),l(p,{modelValue:o.min_covers,"onUpdate:modelValue":a[3]||(a[3]=t=>o.min_covers=t),type:"number",label:e.$t("Min Covers"),"stack-label":"",outlined:"",color:"grey-5",rules:[t=>t>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),l(p,{modelValue:o.max_covers,"onUpdate:modelValue":a[4]||(a[4]=t=>o.max_covers=t),type:"number",label:e.$t("Max Covers"),"stack-label":"",outlined:"",color:"grey-5",rules:[t=>t>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),l(_,{modelValue:o.available,"onUpdate:modelValue":a[5]||(a[5]=t=>o.available=t),val:"1",label:e.$t("Available")},null,8,["modelValue","label"]),l(y,{modelValue:o.status,"onUpdate:modelValue":a[6]||(a[6]=t=>o.status=t),options:u.DataStore.status_list,label:e.$t("Status"),"stack-label":"",behavior:"dialog",outlined:"",color:"grey-5",rules:[t=>t&&t.length>0||this.$t("This field is required")],"emit-value":"","map-options":""},null,8,["modelValue","options","label","rules"]),l(w,null,{default:n(()=>[l(h,{type:"submit",color:"primary","text-color":"white",label:e.$t("Save"),unelevated:"",class:"full-width radius8",size:"lg","no-caps":""},null,8,["label"])]),_:1})],64))]),_:1},8,["onSubmit"]))]),_:1},8,["class"])],64)}var te=v(x,[["render",E]]);export{te as default};
