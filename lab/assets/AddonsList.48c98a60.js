import{_ as w,aA as v,aB as M,u as I,A as m,n as b,p as o,a2 as c,f as s,q as r,F as u,t as a,a3 as L,a7 as h,Z as p,$ as _,ar as l,au as d,a4 as A,b8 as B,b9 as T,a6 as V,at as N}from"./index.c29f7992.js";import{Q as z}from"./QInnerLoading.d034c390.js";import{Q as E}from"./QSpace.0d53e539.js";import{Q}from"./QImg.a00dd4e9.js";import{Q as f}from"./QItemLabel.1db45aa2.js";import{Q as q}from"./QList.04c37cb8.js";import{Q as P}from"./QExpansionItem.13793e1a.js";import{u as O}from"./MenuStore.cd99501e.js";import{u as H}from"./AccessStore.abc714c5.js";import"./QSlideTransition.36283950.js";const j={name:"AddonsList",components:{ConfirmDialog:v(()=>M(()=>import("./ConfirmDialog.f7360be1.js"),["assets/ConfirmDialog.f7360be1.js","assets/QToolbarTitle.38b5862b.js","assets/index.c29f7992.js","assets/index.8924bfb8.css","assets/QToolbar.19752286.js"])),ListNoData:v(()=>M(()=>import("./ListNoData.bed29db8.js"),["assets/ListNoData.bed29db8.js","assets/index.c29f7992.js","assets/index.8924bfb8.css"]))},data(){return{subitem_id:0}},setup(){const t=O(),k=I(),g=H();return{MenuStore:t,DataStore:k,AccessStore:g}},created(){this.MenuStore.hadAddonCategory()?this.$route.query.refresh==1&&this.MenuStore.geStoreAddonMenu():this.MenuStore.geStoreAddonMenu()},methods:{confirmDelete(t){this.subitem_id=t,this.$refs.confirm_dialog.dialog=!0},afterConfirm(){this.$refs.confirm_dialog.dialog=!1,m.showLoadingBox("",this.$q),m.fetchDataByTokenPost("deleteAddonItem","id="+this.subitem_id).then(t=>{this.$emit("afterDeleteitem")}).catch(t=>{m.notify("dark",t,"error",this.$q)}).then(t=>{m.hideLoadingBox(this.$q)})},setAvailable(t,k,g){m.showLoadingBox("",this.$q),m.fetchDataByTokenPost("setAddonItemAvailable","id="+g+"&active="+t).then(e=>{}).catch(e=>{m.notify("dark",e,"error",this.$q)}).then(e=>{m.hideLoadingBox(this.$q)})}}},$={class:"text-grey ellipsis-2-lines font12 line-normal"},F=["innerHTML"],R={class:"text-grey"},U={class:"font13 no-margin line-normal"},Z={class:"text-grey ellipsis-2-lines font12 line-normal"},G=["innerHTML"],J={key:0,class:"text-grey-7 font12 text-weight-medium"},K={class:"column items-center col-12"},W={class:"col"},X={class:"col"};function Y(t,k,g,e,ee,S){const x=b("ListNoData"),D=b("ConfirmDialog");return o(),c(u,null,[s(z,{showing:e.MenuStore.loading_addon,color:"primary",size:"md","label-class":"dark"},null,8,["showing"]),s(E,{class:"q-pa-xs"}),e.MenuStore.addon.length<=0&&!e.MenuStore.loading_addon?(o(),r(x,{key:0,title:t.$t("No available data"),subtitle:t.$t("Addons and addon item will show here"),set_height:"min-height: calc(70vh)"},null,8,["title","subtitle"])):(o(),c(u,{key:1},[e.AccessStore.hasAccess("food.addoncategory")?(o(),r(q,{key:0,separator:""},{default:a(()=>[(o(!0),c(u,null,L(e.MenuStore.addon,i=>(o(),r(P,{key:i},{header:a(()=>[s(h,{avatar:""},{default:a(()=>[s(Q,{src:i.url_image,lazy:"",fit:"cover",style:{height:"60px",width:"60px"},class:"radius8","spinner-color":"secondary","spinner-size":"sm"},null,8,["src"])]),_:2},1024),s(h,null,{default:a(()=>[s(f,null,{default:a(()=>[p(_(i.subcategory_name),1)]),_:2},1024),i.subcategory_description?(o(),r(f,{key:0,caption:""},{default:a(()=>[l("div",$,[l("span",{innerHTML:i.subcategory_description},null,8,F)])]),_:2},1024)):d("",!0),s(f,null,{default:a(()=>[i.subcat_id>0?(o(),r(A,{key:0,flat:"",label:t.$t("Edit Addon"),"no-caps":"",size:"sm",color:"primary",class:"q-pa-none min-height text-weight-bold",to:{path:"/addcategory/edit",query:{subcat_id:i.subcat_id}}},null,8,["label","to"])):d("",!0)]),_:2},1024)]),_:2},1024),s(h,{side:""},{default:a(()=>[s(f,{caption:""},{default:a(()=>[p(_(Object.keys(i.items).length)+" ",1),Object.keys(i.items).length>0?(o(),c(u,{key:0},[p(_(t.$t("Items")),1)],64)):(o(),c(u,{key:1},[p(_(t.$t("Item")),1)],64))]),_:2},1024)]),_:2},1024)]),default:a(()=>[e.AccessStore.hasAccess("food.addonitem")?(o(),r(B,{key:0},{default:a(()=>[Object.keys(i.items).length<=0?(o(),r(T,{key:0,class:"text-center"},{default:a(()=>[l("p",R,_(t.$t("No available items")),1)]),_:1})):(o(),r(q,{key:1,separator:""},{default:a(()=>[(o(!0),c(u,null,L(i.items,n=>(o(),c(u,{key:n},[e.MenuStore.addon_items[n]?(o(),r(V,{key:0,clickable:""},{default:a(()=>[e.MenuStore.addon_items[n].has_photo?(o(),r(h,{key:0,avatar:""},{default:a(()=>[s(Q,{src:e.MenuStore.addon_items[n].url_image,lazy:"",fit:"cover",style:{height:"60px",width:"60px"},class:"radius8","spinner-color":"secondary","spinner-size":"sm"},null,8,["src"])]),_:2},1024)):d("",!0),s(h,null,{default:a(()=>[s(f,null,{default:a(()=>[l("div",U,_(e.MenuStore.addon_items[n].sub_item_name),1),l("div",Z,[l("span",{innerHTML:e.MenuStore.addon_items[n].item_description},null,8,G)]),e.MenuStore.addon_items[n].price?(o(),c("div",J,_(e.MenuStore.addon_items[n].price),1)):d("",!0)]),_:2},1024),e.AccessStore.hasAccess("food.addonitem_update")?(o(),r(f,{key:0,class:"q-gutter-sm"},{default:a(()=>[s(N,{label:t.$t("Available"),modelValue:e.MenuStore.addon_items[n].available,"onUpdate:modelValue":[y=>e.MenuStore.addon_items[n].available=y,(y,C)=>S.setAvailable(y,C,e.MenuStore.addon_items[n].sub_item_id)]},null,8,["label","modelValue","onUpdate:modelValue"])]),_:2},1024)):d("",!0)]),_:2},1024),s(h,{side:"",class:"row items-stretch"},{default:a(()=>[l("div",K,[l("div",W,[s(A,{round:"",color:t.$q.dark.mode?"grey600":"primary","text-color":t.$q.dark.mode?"grey300":"white",icon:"las la-edit",size:"xs",unelevated:"",to:{path:"/addonitems/edit",query:{id:e.MenuStore.addon_items[n].sub_item_id}}},null,8,["color","text-color","to"])]),l("div",X,[e.AccessStore.hasAccess("food.addonitem_delete")?(o(),r(A,{key:0,round:"",color:t.$q.dark.mode?"grey600":"mygrey","text-color":t.$q.dark.mode?"grey300":"dark",icon:"las la-trash",size:"xs",unelevated:"",onClick:y=>S.confirmDelete(e.MenuStore.addon_items[n].sub_item_id)},null,8,["color","text-color","onClick"])):d("",!0)])])]),_:2},1024)]),_:2},1024)):d("",!0)],64))),128))]),_:2},1024))]),_:2},1024)):d("",!0)]),_:2},1024))),128))]),_:1})):d("",!0)],64)),s(D,{ref:"confirm_dialog",data:e.DataStore.data_dialog,onAfterConfirm:S.afterConfirm},null,8,["data","onAfterConfirm"])],64)}var ce=w(j,[["render",Y]]);export{ce as default};
