import{_ as S,U as b,O as Q,X as m,m as s,n as y,p as r,f as t,Q as f,S as d,R as c,af as i,Y as n,F as u,Z as h,$ as C,a0 as k,a2 as q}from"./index.c5b868f5.js";import{Q as $}from"./QToolbarTitle.4da9f270.js";import{Q as P}from"./QToolbar.9b15bf0e.js";import{Q as w}from"./QHeader.b374650f.js";import{Q as D}from"./QSkeleton.11b8074a.js";import{Q as v}from"./QItemLabel.4665782c.js";import{Q as L}from"./QList.9b7158f1.js";import{Q as R}from"./QFooter.51024c6d.js";import{Q as T}from"./QPage.528ab8a8.js";import{Q as U}from"./QPullToRefresh.85618661.js";import"./QResizeObserver.3ed5059f.js";import"./TouchPan.5486290b.js";import"./touch.9135741d.js";import"./selection.65959ca5.js";import"./format.8ac60962.js";const V={name:"CurrencyPage",setup(){const e=b(),a=Q();return{SettingStore:e,DataStorePersisted:a}},data(){return{loading:!1,loading_submit:!1,data:[],currency_code:""}},mounted(){Object.keys(this.SettingStore.settings_data).length>0?this.getCurrencyList(!1):this.$watch(()=>this.SettingStore.$state.settings_data,(e,a)=>{this.getCurrencyList(!1)})},methods:{async refresh(e){await this.getCurrencyList(e)},async getCurrencyList(e){this.currency_code=this.DataStorePersisted.getUseCurrency(),this.loading=!e,m.fetchDataPost("getCurrencyList","currency_code="+this.DataStorePersisted.getUseCurrency()).then(a=>{this.data=a.details.data}).catch(a=>{}).then(a=>{this.loading=!1,e&&e()})},setCurrency(){this.DataStorePersisted.use_currency_code=this.currency_code,this.getCurrencySettings()},getCurrencySettings(){this.loading_submit=!0,m.fetchDataPost("getCurrencySettings","currency_code="+this.DataStorePersisted.getUseCurrency()).then(e=>{this.SettingStore.settings_data.money_config=e.details,this.$router.replace("/account-menu")}).catch(e=>{}).then(e=>{this.loading_submit=!1})}}},B={key:0,class:"q-gutter-y-sm"};function I(e,a,z,F,o,g){return s(),y(U,{onRefresh:g.refresh},{default:r(()=>[t(w,{reveal:"",class:i({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode}),"reveal-offset":"10"},{default:r(()=>[t(P,null,{default:r(()=>[t(f,{onClick:a[0]||(a[0]=l=>e.$router.back()),round:"",dense:"",icon:"arrow_back",unelevated:"",color:e.$q.dark.mode?"grey":"mygrey","text-color":e.$q.dark.mode?"grey-9":"dark"},null,8,["color","text-color"]),t($,{class:"text-weight-bold"},{default:r(()=>[d(c(e.$t("Currency")),1)]),_:1})]),_:1})]),_:1},8,["class"]),t(T,{class:"q-pa-md"},{default:r(()=>[o.loading?(s(),n("div",B,[(s(),n(u,null,h(10,l=>t(D,{key:l,height:"50px",square:"",class:i(["bg-mygreyx radius20",{"bg-grey600":e.$q.dark.mode,"bg-mygrey":!e.$q.dark.mode}])},null,8,["class"])),64))])):(s(),n(u,{key:1},[t(L,{class:"q-gutter-y-sm",dense:""},{default:r(()=>[(s(!0),n(u,null,h(o.data,(l,p)=>(s(),y(C,{key:l,class:i(["radius20 bg-mygrey",{"bg-grey600":e.$q.dark.mode,"bg-mygrey ":!e.$q.dark.mode}]),clickable:"",tag:"label"},{default:r(()=>[t(k,null,{default:r(()=>[t(v,null,{default:r(()=>[d(c(l),1)]),_:2},1024)]),_:2},1024),t(k,{side:""},{default:r(()=>[t(q,{modelValue:o.currency_code,"onUpdate:modelValue":a[1]||(a[1]=_=>o.currency_code=_),val:p,color:"yellow-9","checked-icon":"check_circle","unchecked-icon":"panorama_fish_eye",size:"lg"},null,8,["modelValue","val"])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1}),t(R,{class:i(["q-pa-md row q-col-gutter-xs",{"bg-dark":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode}])},{default:r(()=>[t(f,{color:"primary",size:"lg",rounded:"",unelevated:"","no-caps":"",class:"full-width",onClick:g.setCurrency,loading:o.loading_submit},{default:r(()=>[d(c(e.$t("Save")),1)]),_:1},8,["onClick","loading"])]),_:1},8,["class"])],64))]),_:1})]),_:1},8,["onRefresh"])}var ee=S(V,[["render",I]]);export{ee as default};
