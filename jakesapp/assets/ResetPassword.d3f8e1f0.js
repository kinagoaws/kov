import{_ as w,ad as g,O as _,X as a,ae as u,l as y,m as k,Y as P,f as r,p as i,F as b,Q as m,P as l,R as n,ag as d,ah as h,S as q,ai as v}from"./index.c5b868f5.js";import{Q as R}from"./QToolbar.9b15bf0e.js";import{Q}from"./QHeader.b374650f.js";import{Q as T}from"./QSpace.24950ca6.js";import{Q as $}from"./QForm.997d74f6.js";import{Q as V}from"./QPage.528ab8a8.js";import"./QResizeObserver.3ed5059f.js";const S={name:"ResetPassword",components:{ResendTimer:g(()=>v(()=>import("./ResendTimer.e0a37471.js"),["assets/ResendTimer.e0a37471.js","assets/index.c5b868f5.js","assets/index.7897e990.css"]))},setup(e){return{DataStorePersisted:_()}},data(){return{loading:!1,otp:"",newpassword:"",confirmpassword:"",field_type:"password",field_type2:"password",password_icon:"las la-low-vision",password_icon2:"las la-low-vision",uuid:"",message:""}},created(){this.message=this.$route.query.msg,this.uuid=this.$route.query.uuid,setTimeout(()=>{this.$refs.resend_timer.startTimer()},1e3)},watch:{field_type(e,s){this.password_icon=e=="password"?"las la-low-vision":"las la-eye"},field_type2(e,s){this.password_icon2=e=="password"?"las la-low-vision":"las la-eye"}},methods:{onResend(){this.loading=!0,a.fetchDataPost("resendResetEmail","customer_uuid="+this.uuid).then(e=>{this.message=e.msg,a.notify(this.$q.dark.mode?"grey600":"lightgreen",e.msg,"check_circle",this.$q),this.$refs.resend_timer.startTimer()}).catch(e=>{a.notify("dark",e,"error_outline",this.$q)}).then(e=>{this.loading=!1})},onSubmit(){this.loading=!0;let e="uuid="+this.uuid;e+="&otp="+this.otp,e+="&newpassword="+this.newpassword,e+="&confirmpassword="+this.confirmpassword,a.fetchDataPost("resetPassword",e).then(s=>{this.message=s.msg,a.notify(this.$q.dark.mode?"grey600":"lightgreen",s.msg,"check_circle",this.$q),u.setUser(s.details.user_data),u.setToken(s.details.user_token),this.DataStorePersisted.user_settings=s.details.user_settings,this.$router.push("/home")}).catch(s=>{a.notify("dark",s,"error_outline",this.$q)}).then(s=>{this.loading=!1})}}},D={class:"full-width q-pa-md"},x={class:"q-ma-none text-weight-bold"},C={class:"text-weight-light text-dark"},E={class:"text-dark"},O={class:"text-right"};function B(e,s,I,c,o,p){const f=y("ResendTimer");return k(),P(b,null,[r(Q,{class:"bg-white",reveal:""},{default:i(()=>[r(R,null,{default:i(()=>[r(m,{onClick:s[0]||(s[0]=t=>e.$router.back()),round:"",dense:"",icon:"arrow_back",unelevated:"",color:e.$q.dark.mode?"white":"mygrey","text-color":"dark"},null,8,["color"])]),_:1})]),_:1}),r(V,{padding:"",class:"text-dark flex flex-center"},{default:i(()=>[l("div",D,[l("h5",x,n(e.$t("Reset Password")),1),l("p",C,n(e.$t("Enter a new password"))+"! ",1),l("p",E,n(o.message),1),r($,{onSubmit:p.onSubmit},{default:i(()=>[r(d,{modelValue:o.otp,"onUpdate:modelValue":s[1]||(s[1]=t=>o.otp=t),label:e.$t("Enter OTP code"),"stack-label":"",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),r(d,{modelValue:o.newpassword,"onUpdate:modelValue":s[3]||(s[3]=t=>o.newpassword=t),type:o.field_type,label:e.$t("Password"),"stack-label":"",color:"grey-5",rules:[t=>t&&t.length>0||this.$t("This field is required")]},{append:i(()=>[r(h,{onClick:s[2]||(s[2]=t=>this.field_type=this.field_type=="password"?"text":"password"),name:o.password_icon,color:"grey",class:"cursor-pointer"},null,8,["name"])]),_:1},8,["modelValue","type","label","rules"]),r(d,{modelValue:o.confirmpassword,"onUpdate:modelValue":s[5]||(s[5]=t=>o.confirmpassword=t),type:o.field_type2,label:e.$t("Confirm Password"),"stack-label":"",color:"grey-5",rules:[t=>t&&t.length>0||this.$t("This field is required")]},{append:i(()=>[r(h,{onClick:s[4]||(s[4]=t=>this.field_type2=this.field_type2=="password"?"text":"password"),name:o.password_icon2,color:"grey",class:"cursor-pointer"},null,8,["name"])]),_:1},8,["modelValue","type","label","rules"]),l("div",O,[r(f,{ref:"resend_timer",loading:o.loading,data:{title:this.$t("Resend code"),counter:c.DataStorePersisted.settings_data.resend_counter},onOnResend:p.onResend},null,8,["loading","data","onOnResend"])]),r(T,{class:"q-pa-md"}),r(m,{type:"submit",color:"primary",size:"lg",rounded:"",unelevated:"","no-caps":"",class:"full-width",loading:o.loading},{default:i(()=>[q(n(e.$t("Reset Password")),1)]),_:1},8,["loading"])]),_:1},8,["onSubmit"])])]),_:1})],64)}var X=w(S,[["render",B]]);export{X as default};
