import{_ as q,ad as w,X as n,l as $,m as o,n as u,p as t,f as s,Q as h,S as m,R as l,af as g,Y as _,ah as p,P as k,F as Q,Z as x,ai as I,$ as C,a0 as y}from"./index.c5b868f5.js";import{Q as D}from"./QToolbarTitle.4da9f270.js";import{Q as S}from"./QToolbar.9b15bf0e.js";import{Q as L}from"./QHeader.b374650f.js";import{Q as P}from"./QInnerLoading.ff23f6a9.js";import{Q as b}from"./QItemLabel.4665782c.js";import{Q as R}from"./QSlideItem.d86a998c.js";import{Q as T}from"./QIntersection.702e3ae0.js";import{Q as B}from"./QList.9b7158f1.js";import{Q as z}from"./QFooter.51024c6d.js";import{Q as N}from"./QPage.528ab8a8.js";import{Q as V}from"./QPullToRefresh.85618661.js";import"./QResizeObserver.3ed5059f.js";import"./TouchPan.5486290b.js";import"./touch.9135741d.js";import"./selection.65959ca5.js";import"./use-render-cache.3aae9b27.js";import"./format.8ac60962.js";const E={name:"AddressList",components:{AddressDetails:w(()=>I(()=>import("./AddressDetails.3eff9d33.js"),["assets/AddressDetails.3eff9d33.js","assets/index.c5b868f5.js","assets/index.7897e990.css","assets/QToolbarTitle.4da9f270.js","assets/QToolbar.9b15bf0e.js","assets/QSelect.65ab904e.js","assets/QItemLabel.4665782c.js","assets/QMenu.b5349f2e.js","assets/selection.65959ca5.js","assets/rtl.276c3f1b.js","assets/format.8ac60962.js","assets/QSpace.24950ca6.js","assets/QBtnToggle.f3167bc9.js","assets/QFooter.51024c6d.js","assets/QResizeObserver.3ed5059f.js","assets/QForm.997d74f6.js","assets/ClosePopup.32eeb9ff.js"]))},data(){return{first_loading:!0,loading:!1,data:[],data_slide:[],refresh_done:void 0}},created(){this.getAddresses()},computed:{hasData(){return Object.keys(this.data).length>0}},methods:{refresh(e){this.refresh_done=e,this.getAddresses()},afterSaveaddress(){this.getAddresses()},onRight(e,a){this.data_slide[a]=e},closeSlide(e){console.log(e),this.data_slide[e]&&(console.log(this.data_slide[e]),this.data_slide[e].reset())},removeItem(e,a){this.loading=!0,n.fetchDataByTokenPost("deleteAddress","address_uuid="+e.address_uuid).then(f=>{this.data.splice(a,1)}).catch(f=>{n.notify("dark",f,"error_outline",this.$q)}).then(f=>{this.loading=!1})},getAddresses(){n.empty(this.refresh_done)&&(this.first_loading=!0),n.fetchDataByTokenPost("getAddresses").then(e=>{this.data=e.details.data}).catch(e=>{this.data=[]}).then(e=>{this.first_loading=!1,n.empty(this.refresh_done)||this.refresh_done()})},editAddress(e){console.log("editAddress",e),this.$refs.address_details.location_data={id:e.place_id,addressLine1:e.address.address1,description:e.address.formatted_address,latitude:e.latitude,longitude:e.longitude,attributes:e.attributes},this.$refs.address_details.modal=!0}}},F={key:0,class:"text-center"},O={class:"text-weight-medium font15"},Y={class:"text-grey font12"},j={class:"q-gutter-md"};function H(e,a,f,M,i,r){const v=$("AddressDetails");return o(),u(V,{onRefresh:r.refresh},{default:t(()=>[s(L,{class:g(["bg-whitex",{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-black":!e.$q.dark.mode}]),reveal:""},{default:t(()=>[s(S,null,{default:t(()=>[s(h,{onClick:a[0]||(a[0]=d=>e.$router.back()),round:"",dense:"",icon:"arrow_back",unelevated:"",color:e.$q.dark.mode?"grey":"mygrey","text-color":e.$q.dark.mode?"grey-9":"dark"},null,8,["color","text-color"]),s(D,{class:"text-weight-bold text-darkx"},{default:t(()=>[m(l(e.$t("My address")),1)]),_:1})]),_:1})]),_:1},8,["class"]),s(N,{class:g(["q-pa-md",{"flex flex-center":!r.hasData&&!i.loading,"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode}])},{default:t(()=>[i.first_loading?(o(),u(P,{key:0,showing:!0,color:e.$q.dark.mode?"grey300":"primary"},null,8,["color"])):(o(),_(Q,{key:1},[r.hasData?(o(),u(B,{key:1},{default:t(()=>[s(T,{once:"",transition:"scale"},{default:t(()=>[(o(!0),_(Q,null,x(i.data,(d,A)=>(o(),u(R,{key:d,onRight:a[2]||(a[2]=c=>r.onRight(c,e.index)),"right-color":"secondary",class:"q-mb-sm radius20"},{right:t(()=>[k("div",j,[s(h,{round:"",color:"primary","text-color":"dark",icon:"close",unelevated:"",onClick:a[1]||(a[1]=c=>r.closeSlide(e.index)),disable:i.loading},null,8,["disable"]),s(h,{round:"",color:"red-2","text-color":"red-9",icon:"delete_outline",unelevated:"",onClick:c=>r.removeItem(d,A),loading:i.loading},null,8,["onClick","loading"])])]),default:t(()=>[s(C,{onClick:c=>r.editAddress(d),class:g(["radius10",{"bg-grey600 text-grey300":e.$q.dark.mode,"bg-mygrey text-dark":!e.$q.dark.mode}]),clickable:""},{default:t(()=>[s(y,{avatar:""},{default:t(()=>[s(p,{name:"o_pin_drop",size:"md",color:"grey-4"})]),_:1}),s(y,null,{default:t(()=>[s(b,{class:"text-body2 ellipsis-2-lines"},{default:t(()=>[m(l(d.address.address1),1)]),_:2},1024),s(b,{class:"text-body2 ellipsis-2-lines"},{default:t(()=>[m(l(d.address.formatted_address),1)]),_:2},1024),s(b,{class:"ellipsis text-body1",caption:""},{default:t(()=>[m(l(d.attributes.address_label),1)]),_:2},1024)]),_:2},1024),s(y,{side:""},{default:t(()=>[s(p,{name:"navigate_next",size:"sm"})]),_:1})]),_:2},1032,["onClick","class"])]),_:2},1024))),128))]),_:1})]),_:1})):(o(),_("div",F,[s(p,{name:"history",size:"70px",color:"grey-3"}),k("div",O,l(e.$t("You don't have any address yet")),1),k("div",Y,l(e.$t("pull down to refresh")),1)])),s(z,{class:g(["q-pa-md bg-whitex row q-col-gutter-xs",{"bg-mydark ":e.$q.dark.mode,"bg-white ":!e.$q.dark.mode}])},{default:t(()=>[s(h,{color:"primary","text-color":"white",size:"lg",rounded:"",unelevated:"","no-caps":"",class:"fit",to:{path:"/location",query:{redirect:"/account/address-list",add_address:1}},loading:i.loading},{default:t(()=>[m(l(e.$t("New address")),1)]),_:1},8,["loading"])]),_:1},8,["class"])],64)),s(v,{ref:"address_details",onAfterSaveaddress:r.afterSaveaddress},null,8,["onAfterSaveaddress"])]),_:1},8,["class"])]),_:1},8,["onRefresh"])}var fe=q(E,[["render",H]]);export{fe as default};
