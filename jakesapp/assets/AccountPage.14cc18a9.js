import{t as oe,aP as ne,r as O,c as _,w as ue,al as de,aE as me,bn as ce,aw as ge,g as fe,h as ye,_ as be,ad as _e,O as he,U as ve,ae as N,X as ke,ap as K,l as qe,m as y,n as S,p as a,P as k,f as e,a1 as pe,Y as C,R as i,F as A,af as o,$ as u,a0 as s,ah as l,S as n,ac as $,aq as $e,Z as Se,Q as we,ai as Pe}from"./index.c5b868f5.js";import{Q as Ce}from"./QImg.79fcc1c6.js";import{u as Y,Q as xe}from"./QCircularProgress.1d7da185.js";import{T as De}from"./TouchPan.5486290b.js";import{b as L,n as j}from"./format.8ac60962.js";import{Q as Ve}from"./QSpace.24950ca6.js";import{Q as d}from"./QItemLabel.4665782c.js";import{Q as Me}from"./QList.9b7158f1.js";import{Q as ze}from"./QPage.528ab8a8.js";import"./touch.9135741d.js";import"./selection.65959ca5.js";const R=[34,37,40,33,39,38],Qe=Object.keys(Y);var Fe=oe({name:"QKnob",props:{...ne,...Y,modelValue:{type:Number,required:!0},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:t=>t>=0},tabindex:{type:[Number,String],default:0},disable:Boolean,readonly:Boolean},emits:["update:modelValue","change","dragValue"],setup(t,{slots:h,emit:z}){const{proxy:q}=fe(),{$q:m}=q,c=O(t.modelValue),x=O(!1),g=_(()=>isNaN(t.innerMin)===!0||t.innerMin<t.min?t.min:t.innerMin),D=_(()=>isNaN(t.innerMax)===!0||t.innerMax>t.max?t.max:t.innerMax);let w;function U(){c.value=t.modelValue===null?g.value:L(t.modelValue,g.value,D.value),Q(!0)}ue(()=>`${t.modelValue}|${g.value}|${D.value}`,U),U();const P=_(()=>t.disable===!1&&t.readonly===!1),G=_(()=>"q-knob non-selectable"+(P.value===!0?" q-knob--editable":t.disable===!0?" disabled":"")),B=_(()=>(String(t.step).trim().split(".")[1]||"").length),V=_(()=>t.step===0?1:t.step),W=_(()=>t.instantFeedback===!0||x.value===!0),X=m.platform.is.mobile===!0?_(()=>P.value===!0?{onClick:E}:{}):_(()=>P.value===!0?{onMousedown:te,onClick:E,onKeydown:ae,onKeyup:se}:{}),Z=_(()=>P.value===!0?{tabindex:t.tabindex}:{[`aria-${t.disable===!0?"disabled":"readonly"}`]:"true"}),H=_(()=>{const r={};return Qe.forEach(b=>{r[b]=t[b]}),r});function J(r){r.isFinal?(M(r.evt,!0),x.value=!1):(r.isFirst&&(T(),x.value=!0),M(r.evt))}const ee=_(()=>[[De,J,void 0,{prevent:!0,stop:!0,mouse:!0}]]);function T(){const{top:r,left:b,width:p,height:F}=q.$el.getBoundingClientRect();w={top:r+F/2,left:b+p/2}}function te(r){T(),M(r)}function E(r){T(),M(r,!0)}function ae(r){if(R.includes(r.keyCode)===!1)return;de(r);const b=([34,33].includes(r.keyCode)?10:1)*V.value,p=[34,37,40].includes(r.keyCode)?-b:b;c.value=L(parseFloat((c.value+p).toFixed(B.value)),g.value,D.value),Q()}function M(r,b){const p=me(r),F=Math.abs(p.top-w.top),ie=Math.sqrt(F**2+Math.abs(p.left-w.left)**2);let f=Math.asin(F/ie)*(180/Math.PI);p.top<w.top?f=w.left<p.left?90-f:270+f:f=w.left<p.left?f+90:270-f,m.lang.rtl===!0?f=j(-f-t.angle,0,360):t.angle&&(f=j(f-t.angle,0,360)),t.reverse===!0&&(f=360-f);let v=t.min+f/360*(t.max-t.min);if(V.value!==0){const I=v%V.value;v=v-I+(Math.abs(I)>=V.value/2?(I<0?-1:1)*V.value:0),v=parseFloat(v.toFixed(B.value))}v=L(v,g.value,D.value),z("dragValue",v),c.value!==v&&(c.value=v),Q(b)}function se(r){R.includes(r.keyCode)&&Q(!0)}function Q(r){t.modelValue!==c.value&&z("update:modelValue",c.value),r===!0&&z("change",c.value)}const le=ce(t);function re(){return ye("input",le.value)}return()=>{const r={class:G.value,role:"slider","aria-valuemin":g.value,"aria-valuemax":D.value,"aria-valuenow":t.modelValue,...Z.value,...H.value,value:c.value,instantFeedback:W.value,...X.value},b={default:h.default};return P.value===!0&&t.name!==void 0&&(b.internal=re),ge(xe,r,b,"knob",P.value,()=>ee.value)}}});const Ne={name:"AccountPage",components:{ConfirmDialog:_e(()=>Pe(()=>import("./ConfirmDialog.fb29ed2b.js"),["assets/ConfirmDialog.fb29ed2b.js","assets/QToolbarTitle.4da9f270.js","assets/index.c5b868f5.js","assets/index.7897e990.css","assets/QToolbar.9b15bf0e.js"]))},setup(){const t=he(),h=ve();return{DataStorePersisted:t,SettingStore:h}},data(){return{knob:71,notification:!1,avatar:"/public/user@2x.png",language:"",user:[],is_guest:!0}},mounted(){N.authenticated()?(this.is_guest=!1,this.getCurrentProfile(),this.getUserSettings(),this.language=this.DataStorePersisted.app_language):this.is_guest=!0},computed:{getLanguageData(){return Object.keys(this.SettingStore.settings_data).length>0?this.SettingStore.settings_data.language_list.list:!1}},methods:{getCurrentProfile(){const t=N.getUser();this.user=N.getUser(),t&&(this.avatar=t.avatar)},getUserSettings(){Object.keys(this.DataStorePersisted.user_settings).length>0&&(this.notification=this.DataStorePersisted.user_settings.app_push_notifications==1)},logout(){this.$refs.logout_dialog.dialog=!0},afterConfirm(){this.DataStorePersisted.user_settings=[],this.unsubscribeToTopic(),N.logout(),this.$router.push("/home")},Updateaccountnotification(t){this.is_guest||(this.$q.capacitor?t?this.subsribeDevice():this.unsubscribeToTopic():ke.fetchDataByTokenPost("Updateaccountnotification","app_push_notifications="+t).then(h=>{this.DataStorePersisted.user_settings.app_push_notifications=t?1:""}).catch(h=>{}).then(h=>{}))},subsribeDevice(){K.subscribeTo({topic:this.user.client_uuid}).then(t=>{this.notification=!0,this.DataStorePersisted.user_settings.app_push_notifications=1,this.DataStorePersisted.push_off=!1}).catch(t=>{this.notification=!1,this.DataStorePersisted.user_settings.app_push_notifications=""})},unsubscribeToTopic(){K.unsubscribeFrom({topic:this.user.client_uuid}).then(()=>{this.notification=!1,this.DataStorePersisted.user_settings.app_push_notifications="",this.DataStorePersisted.push_off=!0}).catch(t=>{})}}},Ae={class:"col-3"},Te={class:"col text-body2"},Ie={key:0,class:"text-weight-medium"},Le={class:"text-weight-medium"},Ue={class:"text-grey text-caption ellipsis"},Be={class:"flex items-center"},Ee={class:"text-grey"},Oe={class:"row items-center"},Ke={class:"col"},je={class:"col"},Re={key:0,class:"q-mt-lg q-mb-md"};function Ye(t,h,z,q,m,c){const x=qe("ConfirmDialog");return y(),S(ze,{class:"q-pa-md"},{default:a(()=>[k("div",{class:o(["row items-center bg-mygreyx q-pa-md radius10",{"bg-grey600 text-grey300":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}])},[k("div",Ae,[e(Fe,{"show-value":"",modelValue:m.knob,"onUpdate:modelValue":h[0]||(h[0]=g=>m.knob=g),size:"50px",color:"primary"},{default:a(()=>[e(pe,{size:"50px"},{default:a(()=>[e(Ce,{src:m.avatar,style:{"max-width":"40px",height:"40px"},fit:"cover","spinner-color":"primary","spinner-size":"xs",class:"radius50"},null,8,["src"])]),_:1})]),_:1},8,["modelValue"])]),k("div",Te,[m.is_guest?(y(),C("div",Ie,i(t.$t("Guest")),1)):(y(),C(A,{key:1},[k("div",Le,i(m.user.first_name)+" "+i(m.user.last_name),1),k("div",Ue,i(m.user.email_address),1)],64))])],2),e(Ve,{class:"q-pa-sm"}),e(Me,null,{default:a(()=>[e(u,{class:o(["q-pa-md bg-mygreyx radius10 q-mb-sm",{"bg-grey600 text-grey300":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}]),clickable:"",to:"/account/update-profile"},{default:a(()=>[e(s,{side:""},{default:a(()=>[e(l,{color:"grey-5",name:"las la-user"})]),_:1}),e(s,null,{default:a(()=>[e(d,{class:"text-weight-medium"},{default:a(()=>[n(i(t.$t("My Profile")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(l,{name:"chevron_right",size:"sm",color:"grey"})]),_:1})]),_:1},8,["class"]),e(u,{class:o(["q-pa-md bg-mygreyx radius10 q-mb-sm",{"bg-grey600 text-grey300":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}]),clickable:"",to:"/account/change-password"},{default:a(()=>[e(s,{side:""},{default:a(()=>[e(l,{color:"grey-5",name:"o_lock"})]),_:1}),e(s,null,{default:a(()=>[e(d,{class:"text-weight-medium"},{default:a(()=>[n(i(t.$t("Change Password")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(l,{name:"chevron_right",size:"sm",color:"grey"})]),_:1})]),_:1},8,["class"]),e(u,{class:o(["q-pa-md bg-mygreyx radius10 q-mb-sm",{"bg-grey600 text-grey300":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}]),clickable:"",to:"/account/orders"},{default:a(()=>[e(s,{side:""},{default:a(()=>[e(l,{color:"grey-5",name:"o_featured_play_list"})]),_:1}),e(s,null,{default:a(()=>[e(d,{class:"text-weight-medium"},{default:a(()=>[n(i(t.$t("My Orders")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(l,{name:"chevron_right",size:"sm",color:"grey"})]),_:1})]),_:1},8,["class"]),e(u,{class:o(["q-pa-md bg-mygreyx radius10 q-mb-sm",{"bg-grey600 text-grey300":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}]),clickable:"",to:"/account/address-list"},{default:a(()=>[e(s,{side:""},{default:a(()=>[e(l,{color:"grey-5",name:"o_place"})]),_:1}),e(s,null,{default:a(()=>[e(d,{class:"text-weight-medium"},{default:a(()=>[n(i(t.$t("Delivery Address")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(l,{name:"chevron_right",size:"sm",color:"grey"})]),_:1})]),_:1},8,["class"]),e(u,{class:o(["q-pa-md bg-mygreyx radius10 q-mb-sm",{"bg-grey600 text-grey300":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}]),clickable:"",to:"/account/payments"},{default:a(()=>[e(s,{side:""},{default:a(()=>[e(l,{color:"grey-5",name:"o_account_balance_wallet"})]),_:1}),e(s,null,{default:a(()=>[e(d,{class:"text-weight-medium"},{default:a(()=>[n(i(t.$t("Payment Methods")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(l,{name:"chevron_right",size:"sm",color:"grey"})]),_:1})]),_:1},8,["class"]),q.SettingStore.settings_data.points_enabled?(y(),S(u,{key:0,class:o(["q-pa-md bg-mygreyx radius10 q-mb-sm",{"bg-grey600 text-grey300":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}]),clickable:"",to:"/account/points"},{default:a(()=>[e(s,{side:""},{default:a(()=>[e(l,{color:"grey-5",name:"o_loyalty"})]),_:1}),e(s,null,{default:a(()=>[e(d,{class:"text-weight-medium"},{default:a(()=>[n(i(t.$t("Points")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(l,{name:"chevron_right",size:"sm",color:"grey"})]),_:1})]),_:1},8,["class"])):$("",!0),q.SettingStore.settings_data.digitalwallet_enabled?(y(),S(u,{key:1,class:o(["q-pa-md bg-mygreyx radius10 q-mb-sm",{"bg-grey600 text-grey300":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}]),clickable:"",to:"/account/wallet"},{default:a(()=>[e(s,{side:""},{default:a(()=>[e(l,{color:"grey-5",name:"o_wallet"})]),_:1}),e(s,null,{default:a(()=>[e(d,{class:"text-weight-medium"},{default:a(()=>[n(i(t.$t("Digital Wallet")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(l,{name:"chevron_right",size:"sm",color:"grey"})]),_:1})]),_:1},8,["class"])):$("",!0),q.SettingStore.settings_data.chat_enabled?(y(),S(u,{key:2,class:o(["q-pa-md bg-mygreyx radius10 q-mb-sm",{"bg-grey600 text-grey300":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}]),clickable:"",to:"/account/chat"},{default:a(()=>[e(s,{side:""},{default:a(()=>[e(l,{color:"grey-5",name:"o_question_answer"})]),_:1}),e(s,null,{default:a(()=>[e(d,{class:"text-weight-medium"},{default:a(()=>[n(i(t.$t("Live Chat")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(l,{name:"chevron_right",size:"sm",color:"grey"})]),_:1})]),_:1},8,["class"])):$("",!0),q.SettingStore.settings_data.booking_enabled?(y(),S(u,{key:3,class:o(["q-pa-md bg-mygreyx radius10 q-mb-sm",{"bg-grey600 text-grey300":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}]),clickable:"",to:"/account/booking"},{default:a(()=>[e(s,{side:""},{default:a(()=>[e(l,{color:"grey-5",name:"o_table_restaurant"})]),_:1}),e(s,null,{default:a(()=>[e(d,{class:"text-weight-medium"},{default:a(()=>[n(i(t.$t("Bookings")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(l,{name:"chevron_right",size:"sm",color:"grey"})]),_:1})]),_:1},8,["class"])):$("",!0),e(u,{class:o(["q-pa-md bg-mygreyx radius10 q-mb-sm",{"bg-grey600 text-grey300":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}]),clickable:"",to:"/account/favorites"},{default:a(()=>[e(s,{side:""},{default:a(()=>[e(l,{color:"grey-5",name:"o_favorite_border"})]),_:1}),e(s,null,{default:a(()=>[e(d,{class:"text-weight-medium"},{default:a(()=>[n(i(t.$t("Favorites")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(l,{name:"chevron_right",size:"sm",color:"grey"})]),_:1})]),_:1},8,["class"]),e(u,{tag:"label",class:o(["q-pa-md bg-mygreyx radius10 q-mb-sm",{"bg-grey600 text-grey300":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}]),clickable:""},{default:a(()=>[e(s,{side:""},{default:a(()=>[e(l,{color:"grey-5",name:"o_notifications"})]),_:1}),e(s,null,{default:a(()=>[e(d,{class:"text-weight-medium"},{default:a(()=>[n(i(t.$t("Notifications")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e($e,{modelValue:m.notification,"onUpdate:modelValue":[h[1]||(h[1]=g=>m.notification=g),c.Updateaccountnotification],disable:m.is_guest},null,8,["modelValue","onUpdate:modelValue","disable"])]),_:1})]),_:1},8,["class"]),q.SettingStore.settings_data.enabled_language?(y(),S(u,{key:4,class:o(["q-pa-md bg-mygreyx radius10 q-mb-sm",{"bg-grey600 text-grey300":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}]),clickable:"",to:"/account/language"},{default:a(()=>[e(s,{side:""},{default:a(()=>[e(l,{color:"grey-5",name:"o_language"})]),_:1}),e(s,null,{default:a(()=>[e(d,{class:"text-weight-medium"},{default:a(()=>[n(i(t.$t("Language")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[k("div",Be,[k("div",Ee,[(y(!0),C(A,null,Se(c.getLanguageData,g=>(y(),C(A,{key:g},[g.code==this.DataStorePersisted.app_language?(y(),C(A,{key:0},[n(i(g.title),1)],64)):$("",!0)],64))),128))]),e(l,{name:"chevron_right",size:"sm",color:"grey"})])]),_:1})]),_:1},8,["class"])):$("",!0),q.SettingStore.settings_data.multicurrency_enabled?(y(),S(u,{key:5,class:o(["q-pa-md bg-mygreyx radius10 q-mb-sm",{"bg-grey600 text-grey300":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}]),clickable:"",to:"/account/currency"},{default:a(()=>[e(s,{side:""},{default:a(()=>[e(l,{color:"grey-5",name:"toll"})]),_:1}),e(s,null,{default:a(()=>[e(d,{class:"text-weight-medium"},{default:a(()=>[n(i(t.$t("Currency")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[k("div",Oe,[k("div",Ke,i(this.DataStorePersisted.use_currency_code),1),k("div",je,[e(l,{name:"chevron_right",size:"sm",color:"grey"})])])]),_:1})]),_:1},8,["class"])):$("",!0),e(u,{class:o(["q-pa-md bg-mygreyx radius10 q-mb-sm",{"bg-grey600 text-grey300":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}]),clickable:"",to:"/about"},{default:a(()=>[e(s,{side:""},{default:a(()=>[e(l,{color:"grey-5",name:"o_restaurant"})]),_:1}),e(s,null,{default:a(()=>[e(d,{class:"text-weight-medium"},{default:a(()=>[n(i(t.$t("About")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(l,{name:"chevron_right",size:"sm",color:"grey"})]),_:1})]),_:1},8,["class"]),e(u,{class:o(["q-pa-md bg-mygreyx radius10 q-mb-sm",{"bg-grey600 text-grey300":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}]),clickable:"",to:"/legal"},{default:a(()=>[e(s,{side:""},{default:a(()=>[e(l,{color:"grey-5",name:"o_policy"})]),_:1}),e(s,null,{default:a(()=>[e(d,{class:"text-weight-medium"},{default:a(()=>[n(i(t.$t("Legal")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(l,{name:"chevron_right",size:"sm",color:"grey"})]),_:1})]),_:1},8,["class"]),e(u,{class:o(["q-pa-md bg-mygreyx radius10 q-mb-sm",{"bg-grey600 text-grey300":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}]),clickable:"",to:"/account/request-delete"},{default:a(()=>[e(s,{side:""},{default:a(()=>[e(l,{color:"grey-5",name:"o_logout"})]),_:1}),e(s,null,{default:a(()=>[e(d,{class:"text-weight-medium"},{default:a(()=>[n(i(t.$t("Delete account")),1)]),_:1})]),_:1}),e(s,{side:""},{default:a(()=>[e(l,{name:"chevron_right",size:"sm",color:"grey"})]),_:1})]),_:1},8,["class"])]),_:1}),m.is_guest?$("",!0):(y(),C("div",Re,[e(we,{color:"red",icon:"las la-power-off",label:t.$t("Log out"),class:"radius20","no-caps":"",unelevated:"",onClick:c.logout,size:"lg"},null,8,["label","onClick"])])),e(x,{ref:"logout_dialog",data:{title:this.$t("Logout"),subtitle:this.$t("Are you sure you want to logout?"),confirm:this.$t("Yes"),cancel:this.$t("Cancel")},onAfterConfirm:c.afterConfirm},null,8,["data","onAfterConfirm"])]),_:1})}var rt=be(Ne,[["render",Ye]]);export{rt as default};
