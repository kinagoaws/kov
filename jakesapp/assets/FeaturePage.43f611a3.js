import{_ as b,O as D,ad as f,X as u,l as h,m as s,n as p,p as r,f as t,Q as k,S as w,R as c,af as Q,Y as d,P as i,ac as _,Z as P,F as g,ah as q,ai as y}from"./index.c5b868f5.js";import{Q as A}from"./QToolbarTitle.4da9f270.js";import{Q as L}from"./QToolbar.9b15bf0e.js";import{Q as T}from"./QHeader.b374650f.js";import{Q as S}from"./QIntersection.702e3ae0.js";import{Q as R}from"./QList.9b7158f1.js";import{Q as E}from"./QInnerLoading.ff23f6a9.js";import{Q as M}from"./QCircularProgress.1d7da185.js";import{Q as O}from"./QInfiniteScroll.e5ee4582.js";import{Q as v}from"./QPageScroller.9f5fda23.js";import{Q as V}from"./QPage.528ab8a8.js";import{Q as $}from"./QPullToRefresh.85618661.js";import{u as F}from"./CartData.5b90ca7b.js";import"./QResizeObserver.3ed5059f.js";import"./format.8ac60962.js";import"./use-page-sticky.ec3ca395.js";import"./TouchPan.5486290b.js";import"./touch.9135741d.js";import"./selection.65959ca5.js";const G={name:"CategoryItems",data(){return{morphGroupModel:"cart",loading:!0,data:[],data_done:!1,page:0,is_refresh:void 0,title:"",tag:""}},setup(e){const l=D(),n=F();return{DataStorePersisted:l,CartData:n}},components:{ItemsList:f(()=>y(()=>import("./ItemsList.4b0d7e9c.js"),["assets/ItemsList.4b0d7e9c.js","assets/QImg.79fcc1c6.js","assets/index.c5b868f5.js","assets/index.7897e990.css","assets/QItemLabel.4665782c.js"])),ItemDetails:f(()=>y(()=>import("./ItemDetails.bbc3f6ec.js"),["assets/ItemDetails.bbc3f6ec.js","assets/index.c5b868f5.js","assets/index.7897e990.css","assets/QSkeleton.11b8074a.js","assets/QItemLabel.4665782c.js","assets/QImg.79fcc1c6.js","assets/QList.9b7158f1.js","assets/QSelect.65ab904e.js","assets/QMenu.b5349f2e.js","assets/selection.65959ca5.js","assets/rtl.276c3f1b.js","assets/format.8ac60962.js","assets/QSpace.24950ca6.js","assets/QPageSticky.d00b3310.js","assets/use-page-sticky.ec3ca395.js","assets/ClosePopup.32eeb9ff.js","assets/CartData.5b90ca7b.js"])),CartTotalSticky:f(()=>y(()=>import("./CartTotalSticky.6a9ce2c9.js"),["assets/CartTotalSticky.6a9ce2c9.js","assets/QBadge.f1da1480.js","assets/index.c5b868f5.js","assets/index.7897e990.css","assets/CartData.5b90ca7b.js"]))},created(){this.title=this.$route.query.title,this.tag=this.$route.query.tag},computed:{hasData(){return Object.keys(this.data).length>0}},methods:{scrollHandler(e){this.scroll_down=!e,e==!1?this.morphGroupModel="btn":this.morphGroupModel="cart"},refresh(e){this.CartData.getCartCount(),this.resetPagination(),this.is_refresh=e},getFeaturedItems(e,l){this.loading=!0,this.page=e,u.fetchDataPost("getFeaturedItems","page="+e+"&tag="+this.tag+"&currency_code="+this.DataStorePersisted.getUseCurrency()).then(n=>{this.data.push(n.details.data)}).catch(n=>{this.data_done=!0,u.empty(this.$refs.nscroll)||this.$refs.nscroll.stop()}).then(n=>{l(),this.loading=!1,u.empty(this.is_refresh)||this.is_refresh()})},resetPagination(){this.page=0,this.data=[],this.$refs.nscroll.reset(),this.$refs.nscroll.resume(),this.$refs.nscroll.trigger()},viewItems(e){this.$refs.item_details.showModal(!0,e)},afterAddtocart(){this.CartData.getCartCount()}}},B={key:1,class:"row justify-center absolute-bottom"},N={class:"q-pa-md flex flex-center"},z={class:"flex items-center q-gutter-x-sm"},j={class:"text-body2 text-grey"},H={key:0,class:"row justify-center q-my-sm"},U={class:"font12 text-grey"},X={key:1,class:"full-width text-center"},Y={class:"text-weight-medium font15"},Z={class:"text-grey font12"};function J(e,l,n,K,o,a){const C=h("ItemsList"),x=h("ItemDetails"),I=h("CartTotalSticky");return s(),p($,{onRefresh:a.refresh},{default:r(()=>[t(T,{class:Q(["bg-whitex",{"bg-mydark text-white ":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode}]),reveal:"",onReveal:a.scrollHandler},{default:r(()=>[t(L,null,{default:r(()=>[t(k,{onClick:l[0]||(l[0]=m=>e.$router.back()),round:"",dense:"",icon:"arrow_back",unelevated:"",color:e.$q.dark.mode?"grey":"mygrey","text-color":e.$q.dark.mode?"grey-9":"dark"},null,8,["color","text-color"]),t(A,{class:"text-weight-bold text-darkx"},{default:r(()=>[w(c(e.$t(o.title)),1)]),_:1})]),_:1})]),_:1},8,["onReveal","class"]),t(V,{class:Q(["q-pa-md q-pb-xl",{"flex flex-center":!a.hasData&&!o.loading}])},{default:r(()=>[t(O,{ref:"nscroll",onLoad:a.getFeaturedItems,offset:250},{loading:r(()=>[o.page<=1?(s(),p(E,{key:0,showing:!0,color:"primary",size:"md"})):o.page>1?(s(),d("div",B,[i("div",N,[i("div",z,[i("div",null,[t(M,{indeterminate:"",rounded:"",size:"30px",color:"primary"})]),i("div",j,c(e.$t("loading")),1)])])])):_("",!0)]),default:r(()=>[t(R,null,{default:r(()=>[(s(!0),d(g,null,P(o.data,m=>(s(),p(S,{key:m,once:"",transition:"scale",class:"example-item"},{default:r(()=>[t(C,{data:m,onOnClick:a.viewItems},null,8,["data","onOnClick"])]),_:2},1024))),128))]),_:1})]),_:1},8,["onLoad"]),o.loading?_("",!0):(s(),d(g,{key:0},[a.hasData?(s(),d(g,{key:0},[o.data_done&&o.data.length>=10?(s(),d("div",H,[i("p",U,c(e.$t("end of results")),1)])):_("",!0)],64)):(s(),d("div",X,[t(q,{name:"history",size:"70px",color:"grey-3"}),i("div",Y,c(e.$t("No available data")),1),i("div",Z,c(e.$t("pull down to refresh")),1)]))],64)),t(x,{ref:"item_details",onAfterAddtocart:a.afterAddtocart},null,8,["onAfterAddtocart"]),t(v,{position:"bottom","scroll-offset":150,offset:[18,25]},{default:r(()=>[t(k,{fab:"",icon:"keyboard_arrow_up",color:"grey-2","text-color":"grey",padding:"xs"})]),_:1}),t(v,{position:"bottom-right","scroll-offset":150,offset:[18,18]},{default:r(()=>[t(I,{morphGroupModel:o.morphGroupModel},null,8,["morphGroupModel"])]),_:1})]),_:1},8,["class"])]),_:1},8,["onRefresh"])}var ye=b(G,[["render",J]]);export{ye as default};
