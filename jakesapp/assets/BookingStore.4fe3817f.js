import{ar as o,X as s}from"./index.c5b868f5.js";const r=o("BookingStore",{state:()=>({has_data:!1,loading:!0,guest_list:[],date_list:[],time_slot:[],all_time_slot:[],reservation_date:"",tc:"",allowed_choose_table:!1,room_list:[],not_available_time:[],guest:1,reservation_time:"",reservation_uuid:"",steps:1,reservation_info:[],table_list:[],room_uuid:"",table_uuid:"",first_name:"",last_name:"",email_address:"",mobile_number:"",special_request:"  ",booking_data:[],cancel_reason:[]}),getters:{hasData(t){return t.has_data},isLoading(t){return t.loading},hasTimeSlot(t){return Object.keys(t.time_slot).length>0},getTimeList(t){return t.time_slot},bookingValid(){let t=!0;return this.guest<=0&&(t=!1),s.empty(this.reservation_date)&&(t=!1),s.empty(this.reservation_time)&&(t=!1),t},getSteps(t){return t.steps},getBooking(t){return t.booking_data},hasBookingData(t){return Object.keys(t.booking_data).length>0},getCancelReasonData(t){return t.cancel_reason},CanCancelReservation(t){return t.booking_data.cancel_reservation_stats.includes(t.booking_data.data.status)!==!0},bookingStatusColor(t){return t.booking_data.cancel_reservation_stats2.includes(t.booking_data.data.status)===!0?"text-red":t.booking_data.pending_reservation_stats.includes(t.booking_data.data.status)===!0?"text-blue":t.booking_data.completed_reservation_stats.includes(t.booking_data.data.status)===!0?"text-orange":"text-green"},getBookingStatusSteps(t){return t.booking_data.cancel_reservation_stats2.includes(t.booking_data.data.status)===!0?0:t.booking_data.confirm_reservation_stats.includes(t.booking_data.data.status)===!0?2:t.booking_data.completed_reservation_stats.includes(t.booking_data.data.status)===!0?3:t.booking_data.cancel_reservation_stats.includes(t.booking_data.data.status)===!0?4:1}},actions:{Getbookingattributes(t,a){this.loading=!0,s.fetchDataPostTable("Getbookingattributes","merchant_uuid="+t+"&id="+a).then(e=>{this.has_data=!0,this.guest_list=e.details.guest_list,this.date_list=e.details.date_list,this.time_slot=e.details.time_slot,this.all_time_slot=e.details.all_time_slot,this.reservation_date=e.details.default_date,this.tc=e.details.tc,this.allowed_choose_table=e.details.allowed_choose_table,this.room_list=e.details.room_list,this.not_available_time=e.details.not_available_time,this.guest=e.details.default_guest,s.empty(a)||(this.guest=e.details.data_booking.guest_number_raw,this.reservation_time=e.details.data_booking.reservation_time_raw,this.first_name=e.details.data_booking.first_name,this.last_name=e.details.data_booking.last_name,this.email_address=e.details.data_booking.email_address,this.special_request=e.details.data_booking.special_request,this.mobile_prefix=e.details.data_booking.phone_prefix,this.mobile_number=e.details.data_booking.contact_phone_without_prefix)}).catch(e=>{this.guest_list=[],this.date_list=[],this.time_slot=[],this.all_time_slot=[],this.reservation_date="",this.tc="",this.allowed_choose_table=!1,this.room_list=[],this.not_available_time=[]}).then(e=>{this.loading=!1})},getTimeslot(t,a){this.reservation_time="";let e="merchant_uuid="+t;e+="&reservation_date="+this.reservation_date,e+="&guest="+this.guest,e+="&id="+a,s.fetchDataPostTable("Gettimeslot",e).then(i=>{this.time_slot=i.details.time_slot,this.all_time_slot=i.details.all_time_slot,this.not_available_time=i.details.not_available_time}).catch(i=>{this.time_slot=[],this.all_time_slot=[],this.not_available_time=[]}).then(i=>{})},isSelected(t){return this.reservation_time==t},isNotavailable(t){return Object.keys(this.not_available_time).length>0&&this.not_available_time.includes(t)===!0},SetBooking(t,a){this.loading=!0;let e="merchant_uuid="+t;e+="&reservation_date="+this.reservation_date,e+="&reservation_time="+this.reservation_time,e+="&guest="+this.guest,e+="&id="+a,s.fetchDataPostTableToken("SetBooking",e).then(i=>{this.steps=2,this.reservation_info=i.details,this.table_list=i.details.table_list,s.empty(a)?(this.room_uuid="",this.table_uuid=""):(this.room_uuid=i.details.room_uuid,this.table_uuid=i.details.table_uuid)}).catch(i=>{}).then(i=>{this.loading=!1})},resetReservation(t){this.steps=1,this.Getbookingattributes(t),this.guest=1,this.reservation_date="",this.reservation_time=""},getBookingDetails(t,a){this.loading=!0,s.fetchDataPostTableToken("BookingDetails","id="+t).then(e=>{this.booking_data=e.details}).catch(e=>{this.booking_data=[]}).then(e=>{this.loading=!1,s.empty(a)||a()})},getCancelreason(t,a){this.loading=!0,s.fetchDataPostTableToken("getCancelreason","id="+t).then(e=>{this.cancel_reason=e.details.data}).catch(e=>{this.cancel_reason=[]}).then(e=>{this.loading=!1,s.empty(a)||a()})}}});export{r as u};
