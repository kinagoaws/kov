import{_ as b,ad as w,X as d,l as k,m as u,Y as _,f as t,p as s,af as c,F as g,Q as h,S as m,R as l,n as p,ac as f,P as o,ag as Q,b8 as q,a0 as v,bc as D,$ as V,ai as x,aM as $}from"./index.c5b868f5.js";import{Q as C}from"./QToolbarTitle.4da9f270.js";import{Q as I}from"./QToolbar.9b15bf0e.js";import{Q as P}from"./QHeader.b374650f.js";import{Q as S}from"./QImg.79fcc1c6.js";import{Q as T}from"./QRating.300c19c5.js";import{Q as A}from"./QItemLabel.4665782c.js";import{Q as B}from"./QList.9b7158f1.js";import{Q as N}from"./QSpace.24950ca6.js";import{Q as R}from"./QForm.997d74f6.js";import{Q as z}from"./QInnerLoading.ff23f6a9.js";import{Q as L}from"./QPage.528ab8a8.js";import"./QResizeObserver.3ed5059f.js";import"./format.8ac60962.js";const W={name:"WriteReview",components:{NoAvailableData:w(()=>x(()=>import("./NoAvailableData.5d363a74.js"),["assets/NoAvailableData.5d363a74.js","assets/index.c5b868f5.js","assets/index.7897e990.css"]))},data(){return{review_content:"",as_anonymous:!1,rating_value:0,order_uuid:"",loading:!1,data:[],redirect:""}},created(){this.order_uuid=this.$route.query.order_uuid,this.redirect=this.$route.query.redirect,this.orderDetails()},computed:{hasData(){return Object.keys(this.data).length>0}},methods:{orderDetails(){this.loading=!0,d.fetchDataByTokenPost("orderDetails","order_uuid="+this.order_uuid).then(e=>{this.data=e.details.data}).catch(e=>{this.data=[]}).then(e=>{this.loading=!1})},onSubmit(){if(this.rating_value>0){const e={order_uuid:this.order_uuid,review_content:this.review_content,rating_value:this.rating_value,as_anonymous:this.as_anonymous,tags_like:[],tags_not_like:[],upload_images:""};this.loading=!0,d.fetchDataByTokenPost("addReview",e).then(a=>{d.notify("green-5",a.msg,"check_circle",this.$q),d.empty(this.redirect)?this.$router.back():this.$router.replace(this.redirect)}).catch(a=>{d.notify("dark",a,"error_outline",this.$q)}).then(a=>{this.loading=!1})}else d.notify("dark","Please rate your order","info",this.$q)}}},E={class:"row items-center"},F={class:"col-2 q-mr-md"},U={class:"col"},H={class:"text-weight-medium"},O={class:"text-grey font12 ellipsis-2-lines"},j={class:"text-center q-pa-md"},M={class:"text-weight-bold"},X={class:"text-weight-medium q-mb-xs"},Y={class:"radius20 border-dark-grey q-pa-md"},G={class:"row items-center q-col-gutter-md"},J={class:"col-6"},K={class:"col-6"};function Z(e,a,ee,te,r,n){const y=k("NoAvailableData");return u(),_(g,null,[t(P,{class:c(["bg-whitex",{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode}]),reveal:""},{default:s(()=>[t(I,null,{default:s(()=>[t(h,{onClick:a[0]||(a[0]=i=>e.$router.back()),round:"",dense:"",icon:"arrow_back",unelevated:"",color:e.$q.dark.mode?"white":"mygrey","text-color":"dark"},null,8,["color"]),t(C,{class:"text-weight-bold text-darkx"},{default:s(()=>[m(l(e.$t("Write a review")),1)]),_:1})]),_:1})]),_:1},8,["class"]),t(L,{class:c(["q-pa-md",{"flex flex-center":!n.hasData&&!r.loading}])},{default:s(()=>[!n.hasData&&!r.loading?(u(),p(y,{key:0})):f("",!0),n.hasData?(u(),_(g,{key:1},[o("div",{class:c(["q-pa-sm bg-mygreyx radius10",{"bg-grey600 ":e.$q.dark.mode,"bg-mygrey ":!e.$q.dark.mode}])},[o("div",E,[o("div",F,[t(S,{src:r.data.merchant.url_logo,style:{width:"50px",height:"50px"},fit:"cover","spinner-color":"primary","spinner-size":"xs",class:"rounded-borders"},null,8,["src"])]),o("div",U,[o("div",H,l(r.data.merchant.restaurant_name),1),o("div",O,l(r.data.merchant.address),1)])])],2),t(R,{onSubmit:n.onSubmit},{default:s(()=>[o("div",j,[o("div",M,l(e.$t("How was your meal"))+"?",1),o("div",null,l(e.$t("Whether it's good or bad, let's talk about it")),1),t(T,{modelValue:r.rating_value,"onUpdate:modelValue":a[1]||(a[1]=i=>r.rating_value=i),size:"3em",max:5,color:"primary",icon:"star","icon-selected":"star"},null,8,["modelValue"])]),o("div",X,l(e.$t("write your review")),1),o("div",Y,[t(Q,{modelValue:r.review_content,"onUpdate:modelValue":a[2]||(a[2]=i=>r.review_content=i),type:"textarea",autogrow:"",rules:[i=>i&&i.length>0||"This field is required"]},null,8,["modelValue","rules"])]),t(B,null,{default:s(()=>[q((u(),p(V,{tag:"label"},{default:s(()=>[t(v,{avatar:""},{default:s(()=>[t(D,{modelValue:r.as_anonymous,"onUpdate:modelValue":a[3]||(a[3]=i=>r.as_anonymous=i),val:"teal",color:"primary"},null,8,["modelValue"])]),_:1}),t(v,null,{default:s(()=>[t(A,null,{default:s(()=>[m(l(e.$t("post review as anonymous")),1)]),_:1})]),_:1})]),_:1})),[[$]])]),_:1}),t(N,{class:"q-pa-sm"}),o("div",G,[o("div",J,[t(h,{color:e.$q.dark.mode?"grey300":"dark",size:"lg",rounded:"",unelevated:"","no-caps":"",flat:"",class:"full-width",onClick:a[4]||(a[4]=i=>e.$router.back()),disable:r.loading},{default:s(()=>[m(l(e.$t("Cancel")),1)]),_:1},8,["color","disable"])]),o("div",K,[t(h,{type:"submit",color:"primary",size:"lg",rounded:"",unelevated:"","no-caps":"",class:"full-width",loading:r.loading},{default:s(()=>[m(l(e.$t("Add review")),1)]),_:1},8,["loading"])])])]),_:1},8,["onSubmit"])],64)):f("",!0),t(z,{showing:r.loading,color:"primary"},null,8,["showing"])]),_:1},8,["class"])],64)}var pe=b(W,[["render",Z]]);export{pe as default};
