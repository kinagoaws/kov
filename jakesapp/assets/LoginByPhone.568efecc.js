import{_ as Q,ad as _,U as V,O as v,ae as u,X as h,l as f,m as b,Y as y,f as t,p as r,af as x,F as $,Q as d,S as p,R as i,P as c,ag as S,ah as q,ac as E,ai as k}from"./index.c5b868f5.js";import{Q as D}from"./QToolbarTitle.4da9f270.js";import{Q as L}from"./QToolbar.9b15bf0e.js";import{Q as T}from"./QHeader.b374650f.js";import{Q as m}from"./QSpace.24950ca6.js";import{Q as F}from"./QForm.997d74f6.js";import{Q as C}from"./QPage.528ab8a8.js";import"./QResizeObserver.3ed5059f.js";const B={name:"LoginByPhone",components:{SocialLogin:_(()=>k(()=>import("./SocialLogin.648d605d.js"),["assets/SocialLogin.648d605d.js","assets/index.c5b868f5.js","assets/index.7897e990.css"])),componentsRecaptcha:_(()=>k(()=>import("./componentsRecaptcha.2f09d1e7.js"),["assets/componentsRecaptcha.2f09d1e7.js","assets/index.c5b868f5.js","assets/index.7897e990.css"]))},data(){return{loading:!1,mobile_number:"",password:"test",field_type:"password",password_icon:"las la-low-vision",recaptcha_response:"",redirect:"",page_ready:!1}},setup(e){const s=V(),g=v();return{SettingStore:s,DataStorePersisted:g}},mounted(){this.redirect=this.$route.query.redirect,u.authenticated()&&this.$router.push("/home"),Object.keys(this.SettingStore.settings_data).length>0?this.page_ready=!0:this.$watch(()=>this.SettingStore.$state.settings_data,(e,s)=>{this.page_ready=!0})},methods:{refresh(){},recaptchaVerified(e){this.recaptcha_response=e},recaptchaExpired(){this.SettingStore.settings_data.captcha_enabled&&this.$refs.recapcha.reset()},recaptchaFailed(){},onSubmit(){this.loading=!0,h.fetchDataPost("userLoginPhone",{mobile_number:this.mobile_number,moble_prefix:this.SettingStore.settings_data.phone_data.phonecode,password:this.password,recaptcha_response:this.recaptcha_response}).then(e=>{u.setUser(e.details.user_data),u.setToken(e.details.user_token),this.DataStorePersisted.user_settings=e.details.user_settings,h.empty(this.redirect)?this.$router.push("/home"):this.$router.push(this.redirect)}).catch(e=>{this.recaptchaExpired(),h.notify("dark",e,"error_outline",this.$q)}).then(e=>{this.loading=!1})}}},I={key:0,class:"full-width q-pa-md"},R={class:"text-weight-light text-dark"},A={class:"text-center"},N={class:"flex flex-center"};function O(e,s,g,n,o,l){const w=f("componentsRecaptcha"),P=f("SocialLogin");return b(),y($,null,[t(T,{class:x({"bg-mydark ":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode}),reveal:""},{default:r(()=>[t(L,null,{default:r(()=>[t(d,{onClick:s[0]||(s[0]=a=>e.$router.back()),round:"",dense:"",icon:"arrow_back",unelevated:"",color:e.$q.dark.mode?"grey":"mygrey","text-color":e.$q.dark.mode?"grey-9":"dark"},null,8,["color","text-color"]),t(D,{class:"text-weight-bold text-darkx"},{default:r(()=>[p(i(e.$t("Let's Sign You In")),1)]),_:1})]),_:1})]),_:1},8,["class"]),t(C,{padding:"",class:"text-dark flex flex-center"},{default:r(()=>[o.page_ready?(b(),y("div",I,[c("p",R,i(e.$t("Enter your phone number and password for sigin"))+". ",1),t(F,{onSubmit:l.onSubmit},{default:r(()=>[t(S,{modelValue:o.mobile_number,"onUpdate:modelValue":s[1]||(s[1]=a=>o.mobile_number=a),label:e.$t("Mobile number"),"stack-label":"",prefix:n.SettingStore.settings_data.phone_data.phonecode,mask:"##################",rules:[a=>a&&a.length>0||e.$t("This field is required"),a=>a.length<=15||e.$t("Please use maximum 15 characters")]},null,8,["modelValue","label","prefix","rules"]),t(S,{modelValue:o.password,"onUpdate:modelValue":s[3]||(s[3]=a=>o.password=a),type:o.field_type,label:e.$t("Password"),"stack-label":"",color:"grey-5",rules:[a=>a&&a.length>0||this.$t("This field is required")]},{append:r(()=>[t(q,{onClick:s[2]||(s[2]=a=>this.field_type=this.field_type=="password"?"text":"password"),name:this.field_type=="password"?"las la-low-vision":"las la-eye",color:"grey",class:"cursor-pointer"},null,8,["name"])]),_:1},8,["modelValue","type","label","rules"]),t(w,{ref:"recapcha",sitekey:n.SettingStore.settings_data.captcha_site_key,is_enabled:n.SettingStore.settings_data.captcha_enabled,language_code:n.SettingStore.settings_data.captcha_lang,size:"normal",theme:"light",tabindex:0,onVerify:l.recaptchaVerified,onExpire:l.recaptchaExpired,onFail:l.recaptchaFailed},null,8,["sitekey","is_enabled","language_code","onVerify","onExpire","onFail"]),c("div",A,[t(d,{flat:"","no-caps":"",color:"primary",to:"/user/forgotpassword"},{default:r(()=>[p(i(e.$t("Forgot Password"))+"?",1)]),_:1})]),t(m,{class:"q-pa-sm"}),t(d,{type:"submit",color:"primary",size:"lg",rounded:"",unelevated:"","no-caps":"",class:"full-width",loading:o.loading},{default:r(()=>[p(i(e.$t("Login")),1)]),_:1},8,["loading"]),t(m,{class:"q-pa-sm"}),c("div",N,[c("div",null,i(e.$t("Don't have an account"))+"?",1),t(d,{flat:"","no-caps":"",color:"primary",to:"/user/signup"},{default:r(()=>[p(i(e.$t("Sign up")),1)]),_:1})]),t(m,{class:"q-pa-md"}),t(P)]),_:1},8,["onSubmit"])])):E("",!0)]),_:1})],64)}var J=Q(B,[["render",O]]);export{J as default};
