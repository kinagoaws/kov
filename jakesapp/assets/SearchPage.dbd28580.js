import{_ as D,O as I,ad as _,X as h,l as k,m as r,Y as i,f as t,p as a,af as b,F as m,Q as u,S,R as l,ag as w,ah as P,n as g,P as n,ac as f,Z as A,ai as q}from"./index.c5b868f5.js";import{Q as O}from"./QToolbarTitle.4da9f270.js";import{Q as V}from"./QToolbar.9b15bf0e.js";import{Q as F}from"./QHeader.b374650f.js";import{Q as T}from"./QForm.997d74f6.js";import{Q as C}from"./QSpace.24950ca6.js";import{Q as v}from"./QIntersection.702e3ae0.js";import{Q as $}from"./QSkeleton.11b8074a.js";import{Q as L}from"./QList.9b7158f1.js";import{Q as j}from"./QPage.528ab8a8.js";import{u as B}from"./CartData.5b90ca7b.js";import"./QResizeObserver.3ed5059f.js";const E={name:"SearchPage",data(){return{morphGroupModel:"cart",tag:"trending",loading:!1,data:[],q:"",search_loading:!1,search_data:[],isSubmit:!1}},setup(e){const d=I(),p=B();return{DataStorePersisted:d,CartData:p}},components:{ItemsList:_(()=>q(()=>import("./ItemsList.4b0d7e9c.js"),["assets/ItemsList.4b0d7e9c.js","assets/QImg.79fcc1c6.js","assets/index.c5b868f5.js","assets/index.7897e990.css","assets/QItemLabel.4665782c.js"])),ItemDetails:_(()=>q(()=>import("./ItemDetails.bbc3f6ec.js"),["assets/ItemDetails.bbc3f6ec.js","assets/index.c5b868f5.js","assets/index.7897e990.css","assets/QSkeleton.11b8074a.js","assets/QItemLabel.4665782c.js","assets/QImg.79fcc1c6.js","assets/QList.9b7158f1.js","assets/QSelect.65ab904e.js","assets/QMenu.b5349f2e.js","assets/selection.65959ca5.js","assets/rtl.276c3f1b.js","assets/format.8ac60962.js","assets/QSpace.24950ca6.js","assets/QPageSticky.d00b3310.js","assets/use-page-sticky.ec3ca395.js","assets/ClosePopup.32eeb9ff.js","assets/CartData.5b90ca7b.js"]))},mounted(){this.getFeaturedItems(),this.CartData.getCartCount()},computed:{hasData(){return Object.keys(this.search_data).length>0},hasFeaturedData(){return Object.keys(this.data).length>0}},methods:{getFeaturedItems(){this.loading=!0,h.fetchDataPost("getFeaturedItems","page="+1+"&tag="+this.tag+"&limit=3&currency_code="+this.DataStorePersisted.getUseCurrency()).then(e=>{this.data=e.details.data}).catch(e=>{this.data=[]}).then(e=>{this.loading=!1})},viewItems(e){this.$refs.item_details.showModal(!0,e)},afterAddtocart(){this.CartData.getCartCount()},onSubmit(){h.empty(this.q)||(this.search_loading=!0,h.fetchDataPost("menuSearch","q="+this.q+"&currency_code="+this.DataStorePersisted.getUseCurrency()).then(e=>{this.search_data=e.details.data}).catch(e=>{this.search_data=[]}).then(e=>{this.search_loading=!1,this.isSubmit=!0}))},Count(){return Object.keys(this.search_data).length>0?Object.keys(this.search_data).length:0},resetSearch(){this.isSubmit=!1,this.search_data=[],this.q=""}}},N={class:"row items-center justify-between q-mb-sm"},x={class:"text-weight-bold font15"},R={key:1,class:"q-mb-md"},U={class:"text-weight-bold font15"},z={class:"text-grey"},M={key:0,class:"row items-center justify-between q-mb-xs"},G={class:"text-weight-bold font15"},H={key:1,class:"q-gutter-sm"};function X(e,d,p,Y,s,o){const y=k("ItemsList"),Q=k("ItemDetails");return r(),i(m,null,[t(F,{reveal:"",class:b({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:a(()=>[t(V,null,{default:a(()=>[t(u,{onClick:d[0]||(d[0]=c=>e.$router.back()),round:"",dense:"",icon:"arrow_back",unelevated:"",color:e.$q.dark.mode?"grey":"mygrey","text-color":e.$q.dark.mode?"grey-9":"dark"},null,8,["color","text-color"]),t(O,{class:"text-weight-bold text-darkx"},{default:a(()=>[S(l(e.$t("Search")),1)]),_:1})]),_:1})]),_:1},8,["class"]),t(j,{class:"q-pa-md"},{default:a(()=>[t(T,{onSubmit:o.onSubmit},{default:a(()=>[t(w,{modelValue:s.q,"onUpdate:modelValue":d[1]||(d[1]=c=>s.q=c),label:e.$t("Search menu"),outlined:"",color:e.$q.dark.mode?"grey600":"grey-1","bg-color":e.$q.dark.mode?"grey600":"grey-1","label-color":"grey-5",borderless:""},{prepend:a(()=>[t(P,{name:"search",color:"grey"})]),append:a(()=>[s.isSubmit?(r(),g(u,{key:0,round:"",color:"red-2","text-color":"red-9",icon:"close","no-caps":"",unelevated:"",size:"sm",onClick:o.resetSearch},null,8,["onClick"])):(r(),g(u,{key:1,unelevated:"",label:e.$t("Search"),"no-caps":"",color:e.$q.dark.mode?"grey":"primary","text-color":e.$q.dark.mode?"grey600":"white",onClick:o.onSubmit,loading:s.search_loading},null,8,["label","color","text-color","onClick","loading"]))]),_:1},8,["modelValue","label","color","bg-color"])]),_:1},8,["onSubmit"]),t(C,{class:"q-pa-md"}),o.hasData?(r(),i(m,{key:0},[n("div",N,[n("div",x,l(e.$t("Search results for"))+" \u201C"+l(this.q)+"\u201D ("+l(o.Count())+") ",1)]),t(v,{once:"",transition:"scale",class:"example-item"},{default:a(()=>[t(y,{data:s.search_data,onOnClick:o.viewItems},null,8,["data","onOnClick"])]),_:1})],64)):s.isSubmit?(r(),i("div",R,[n("div",U,l(e.$t("No results for"))+" \u201C"+l(this.q)+"\u201D ",1),n("div",z,l(e.$t("Sorry, no product matched for your search. Please try again"))+". ",1)])):f("",!0),s.isSubmit?f("",!0):(r(),i(m,{key:2},[o.hasFeaturedData?(r(),i("div",M,[n("div",G,l(e.$t("Trending Items")),1),n("div",null,[t(u,{flat:"","no-caps":"",color:e.$q.dark.mode?"grey300":"primary",to:"/items/feature?tag=trending&title=Trending"},{default:a(()=>[S(l(e.$t("See All")),1)]),_:1},8,["color"])])])):f("",!0),s.loading?(r(),i("div",H,[(r(),i(m,null,A(3,c=>t($,{key:c,height:"80px",square:"",class:b(["radius10",{"bg-grey600":e.$q.dark.mode,"bg-mygrey":!e.$q.dark.mode}])},null,8,["class"])),64))])):(r(),g(L,{key:2},{default:a(()=>[t(v,{once:"",transition:"scale",class:"example-item"},{default:a(()=>[t(y,{data:s.data,onOnClick:o.viewItems},null,8,["data","onOnClick"])]),_:1})]),_:1}))],64)),t(C,{class:"q-pa-md"}),t(Q,{ref:"item_details",onAfterAddtocart:o.afterAddtocart},null,8,["onAfterAddtocart"])]),_:1})],64)}var de=D(E,[["render",X]]);export{de as default};
