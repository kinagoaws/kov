import{_ as P,O as w,ad as f,X as u,l as h,m as a,n as d,p as r,f as t,Q as k,S as x,R as c,af as Q,Y as n,Z as S,F as p,P as _,ac as C,ah as q,ai as g}from"./index.c5b868f5.js";import{Q as A}from"./QToolbarTitle.4da9f270.js";import{Q as L}from"./QToolbar.9b15bf0e.js";import{Q as T}from"./QHeader.b374650f.js";import{Q as R}from"./QIntersection.702e3ae0.js";import{Q as E}from"./QList.9b7158f1.js";import{Q as M}from"./QInnerLoading.ff23f6a9.js";import{Q as O}from"./QSpinnerDots.cbd6135a.js";import{Q as D}from"./QFooter.51024c6d.js";import{Q as V}from"./QInfiniteScroll.e5ee4582.js";import{Q as G}from"./QPageScroller.9f5fda23.js";import{Q as $}from"./QSpace.24950ca6.js";import{Q as B}from"./QPage.528ab8a8.js";import{Q as N}from"./QPullToRefresh.85618661.js";import{u as z}from"./CartData.5b90ca7b.js";import"./QResizeObserver.3ed5059f.js";import"./use-page-sticky.ec3ca395.js";import"./TouchPan.5486290b.js";import"./touch.9135741d.js";import"./selection.65959ca5.js";import"./format.8ac60962.js";const j={name:"CategoryItems",data(){return{morphGroupModel:"cart",loading:!0,data:[],data_done:!1,page:0,is_refresh:void 0,title:"",cat_id:""}},setup(e){const i=w(),l=z();return{DataStorePersisted:i,CartData:l}},components:{ItemsList:f(()=>g(()=>import("./ItemsList.4b0d7e9c.js"),["assets/ItemsList.4b0d7e9c.js","assets/QImg.79fcc1c6.js","assets/index.c5b868f5.js","assets/index.7897e990.css","assets/QItemLabel.4665782c.js"])),ItemDetails:f(()=>g(()=>import("./ItemDetails.bbc3f6ec.js"),["assets/ItemDetails.bbc3f6ec.js","assets/index.c5b868f5.js","assets/index.7897e990.css","assets/QSkeleton.11b8074a.js","assets/QItemLabel.4665782c.js","assets/QImg.79fcc1c6.js","assets/QList.9b7158f1.js","assets/QSelect.65ab904e.js","assets/QMenu.b5349f2e.js","assets/selection.65959ca5.js","assets/rtl.276c3f1b.js","assets/format.8ac60962.js","assets/QSpace.24950ca6.js","assets/QPageSticky.d00b3310.js","assets/use-page-sticky.ec3ca395.js","assets/ClosePopup.32eeb9ff.js","assets/CartData.5b90ca7b.js"])),CartTotalSticky:f(()=>g(()=>import("./CartTotalSticky.6a9ce2c9.js"),["assets/CartTotalSticky.6a9ce2c9.js","assets/QBadge.f1da1480.js","assets/index.c5b868f5.js","assets/index.7897e990.css","assets/CartData.5b90ca7b.js"]))},created(){this.title=this.$route.query.title,this.cat_id=this.$route.query.cat_id},computed:{hasData(){return Object.keys(this.data).length>0}},methods:{scrollHandler(e){this.scroll_down=!e,e==!1?this.morphGroupModel="btn":this.morphGroupModel="cart"},refresh(e){this.CartData.getCartCount(),this.resetPagination(),this.is_refresh=e},CategoryItems(e,i){this.loading=!0,u.fetchDataPost("CategoryItems","page="+e+"&cat_id="+this.cat_id+"&currency_code="+this.DataStorePersisted.getUseCurrency()).then(l=>{this.page=e,this.data.push(l.details.data)}).catch(l=>{this.data_done=!0,u.empty(this.$refs.nscroll)||this.$refs.nscroll.stop()}).then(l=>{i(),this.loading=!1,u.empty(this.is_refresh)||this.is_refresh()})},resetPagination(){this.page=0,this.data=[],this.$refs.nscroll.reset(),this.$refs.nscroll.resume(),this.$refs.nscroll.trigger()},viewItems(e){this.$refs.item_details.showModal(!0,e)},afterAddtocart(){this.CartData.getCartCount()}}},F={key:0,class:"row justify-center q-my-sm"},H={class:"font12 text-grey"},U={key:1,class:"full-width text-center"},X={class:"text-weight-medium font15"},Y={class:"text-grey font12"};function Z(e,i,l,y,o,s){const I=h("ItemsList"),v=h("ItemDetails"),b=h("CartTotalSticky");return a(),d(N,{onRefresh:s.refresh},{default:r(()=>[t(T,{class:Q(["bg-whitex",{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode}]),reveal:"",onReveal:s.scrollHandler},{default:r(()=>[t(L,null,{default:r(()=>[t(k,{onClick:i[0]||(i[0]=m=>e.$router.back()),round:"",dense:"",icon:"arrow_back",unelevated:"",color:e.$q.dark.mode?"grey":"mygrey","text-color":e.$q.dark.mode?"grey-9":"dark"},null,8,["color","text-color"]),t(A,{class:"text-weight-bold"},{default:r(()=>[x(c(o.title),1)]),_:1})]),_:1})]),_:1},8,["onReveal","class"]),t(B,{class:Q(["q-pa-md",{"flex flex-center":!s.hasData&&!o.loading}])},{default:r(()=>[t(V,{ref:"nscroll",onLoad:s.CategoryItems,offset:250},{loading:r(()=>[o.page<=0?(a(),d(M,{key:0,showing:!0,color:e.$q.dark.mode?"grey300":"primary",size:"md"},null,8,["color"])):(a(),d(D,{key:1,class:"bg-transparent text-center"},{default:r(()=>[t(O,{size:"md",color:e.$q.dark.mode?"grey300":"primary"},null,8,["color"])]),_:1}))]),default:r(()=>[t(E,null,{default:r(()=>[(a(!0),n(p,null,S(o.data,m=>(a(),d(R,{key:m,once:"",transition:"scale",class:"example-item"},{default:r(()=>[t(I,{data:m,onOnClick:s.viewItems},null,8,["data","onOnClick"])]),_:2},1024))),128))]),_:1})]),_:1},8,["onLoad"]),o.loading?C("",!0):(a(),n(p,{key:0},[s.hasData?(a(),n(p,{key:0},[o.data_done&&o.data.length>=10?(a(),n("div",F,[_("p",H,c(e.$t("end of results")),1)])):C("",!0)],64)):(a(),n("div",U,[t(q,{name:"history",size:"70px",color:"grey-3"}),_("div",X,c(e.$t("No available data")),1),_("div",Y,c(e.$t("pull down to refresh")),1)]))],64)),t(v,{ref:"item_details",onAfterAddtocart:s.afterAddtocart},null,8,["onAfterAddtocart"]),t(D,{bordered:"",class:"bg-transparent modified-footer text-center relative-position text-dark flex flex-centerx justify-end"},{default:r(()=>[t(b,{morphGroupModel:o.morphGroupModel,loading:y.DataStorePersisted.cartcount_loading,data:y.DataStorePersisted.cartcount_data},null,8,["morphGroupModel","loading","data"])]),_:1}),t(G,{position:"bottom-right","scroll-offset":150,offset:[18,18]},{default:r(()=>[t(k,{fab:"",icon:"keyboard_arrow_up",color:"dark",padding:"xs"})]),_:1}),t($,{class:"q-pa-md"})]),_:1},8,["class"])]),_:1},8,["onRefresh"])}var ye=P(j,[["render",Z]]);export{ye as default};
