import{_ as q,O as C,ad as h,X as f,l as g,m as o,Y as i,f as t,p as a,af as I,F as u,Q as c,S as b,R as s,ag as w,ah as D,n as p,P as n,ac as _,Z as P,ai as k}from"./index.c5b868f5.js";import{Q as A}from"./QToolbarTitle.4da9f270.js";import{Q as O}from"./QToolbar.9b15bf0e.js";import{Q as T}from"./QHeader.b374650f.js";import{Q as V}from"./QForm.997d74f6.js";import{Q as F}from"./QSpace.24950ca6.js";import{Q as S}from"./QIntersection.702e3ae0.js";import{Q as L}from"./QSkeleton.11b8074a.js";import{Q as j}from"./QList.9b7158f1.js";import{Q as x}from"./QFooter.51024c6d.js";import{Q as E}from"./QPageScroller.9f5fda23.js";import{Q as R}from"./QPage.528ab8a8.js";import"./QResizeObserver.3ed5059f.js";import"./use-page-sticky.ec3ca395.js";const B={name:"SearchPage",data(){return{morphGroupModel:"cart",tag:"trending",loading:!1,data:[],q:"",search_loading:!1,search_data:[],isSubmit:!1}},setup(e){return{DataStorePersisted:C()}},components:{ItemsList:h(()=>k(()=>import("./ItemsList.4b0d7e9c.js"),["assets/ItemsList.4b0d7e9c.js","assets/QImg.79fcc1c6.js","assets/index.c5b868f5.js","assets/index.7897e990.css","assets/QItemLabel.4665782c.js"])),ItemDetails:h(()=>k(()=>import("./ItemDetails.bbc3f6ec.js"),["assets/ItemDetails.bbc3f6ec.js","assets/index.c5b868f5.js","assets/index.7897e990.css","assets/QSkeleton.11b8074a.js","assets/QItemLabel.4665782c.js","assets/QImg.79fcc1c6.js","assets/QList.9b7158f1.js","assets/QSelect.65ab904e.js","assets/QMenu.b5349f2e.js","assets/selection.65959ca5.js","assets/rtl.276c3f1b.js","assets/format.8ac60962.js","assets/QSpace.24950ca6.js","assets/QPageSticky.d00b3310.js","assets/use-page-sticky.ec3ca395.js","assets/ClosePopup.32eeb9ff.js","assets/CartData.5b90ca7b.js"])),CartTotalSticky:h(()=>k(()=>import("./CartTotalSticky.6a9ce2c9.js"),["assets/CartTotalSticky.6a9ce2c9.js","assets/QBadge.f1da1480.js","assets/index.c5b868f5.js","assets/index.7897e990.css","assets/CartData.5b90ca7b.js"]))},created(){this.getFeaturedItems()},computed:{hasData(){return Object.keys(this.search_data).length>0},hasFeaturedData(){return Object.keys(this.data).length>0}},methods:{getFeaturedItems(){this.loading=!0,f.fetchDataPost("getFeaturedItems","page="+1+"&tag="+this.tag+"&limit=3").then(e=>{this.data=e.details.data}).catch(e=>{this.data=[]}).then(e=>{this.loading=!1})},viewItems(e){this.$refs.item_details.showModal(!0,e)},afterAddtocart(){this.DataStorePersisted.getCartCount()},onSubmit(){f.empty(this.q)||(this.search_loading=!0,f.fetchDataPost("menuSearch","q="+this.q).then(e=>{this.search_data=e.details.data}).catch(e=>{this.search_data=[]}).then(e=>{this.search_loading=!1,this.isSubmit=!0}))},Count(){return Object.keys(this.search_data).length>0?Object.keys(this.search_data).length:0},resetSearch(){this.isSubmit=!1,this.search_data=[],this.q=""}}},M={class:"row items-center justify-between q-mb-sm"},N={class:"text-weight-bold font15"},G={key:1,class:"q-mb-md"},$={class:"text-weight-bold font15"},z={class:"text-grey"},H={key:0,class:"row items-center justify-between q-mb-xs"},U={class:"text-weight-bold font15"},X={key:1,class:"q-gutter-sm"};function Y(e,d,Z,J,r,l){const y=g("ItemsList"),v=g("ItemDetails"),Q=g("CartTotalSticky");return o(),i(u,null,[t(T,{reveal:"",onReveal:e.scrollHandler,class:I({"bg-mydark ":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:a(()=>[t(O,null,{default:a(()=>[t(c,{onClick:d[0]||(d[0]=m=>e.$router.back()),round:"",dense:"",icon:"arrow_back",unelevated:"",color:e.$q.dark.mode?"white":"mygrey","text-color":"dark"},null,8,["color"]),t(A,{class:"text-weight-bold text-darkx"},{default:a(()=>[b(s(e.$t("Search")),1)]),_:1})]),_:1})]),_:1},8,["onReveal","class"]),t(R,{class:"q-pa-md"},{default:a(()=>[t(V,null,{default:a(()=>[t(w,{modelValue:r.q,"onUpdate:modelValue":d[1]||(d[1]=m=>r.q=m),label:e.$t("Search menu"),outlined:"",color:e.$q.dark.mode?"grey600":"grey-1","bg-color":e.$q.dark.mode?"grey600":"grey-1","label-color":"grey-5",borderless:""},{prepend:a(()=>[t(D,{name:"search",color:"grey"})]),append:a(()=>[r.isSubmit?(o(),p(c,{key:0,round:"",color:"dark",icon:"close","no-caps":"",unelevated:"",size:"sm",onClick:l.resetSearch},null,8,["onClick"])):(o(),p(c,{key:1,unelevated:"",label:e.$t("Search"),"no-caps":"",color:e.$q.dark.mode?"grey300":"primary",onClick:l.onSubmit,loading:r.search_loading},null,8,["label","color","onClick","loading"]))]),_:1},8,["modelValue","label","color","bg-color"])]),_:1}),t(F,{class:"q-pa-md"}),l.hasData?(o(),i(u,{key:0},[n("div",M,[n("div",N,s(e.$t("Search results for"))+" \u201C"+s(this.q)+"\u201D ("+s(l.Count())+") ",1)]),t(S,{once:"",transition:"scale",class:"example-item"},{default:a(()=>[t(y,{data:r.search_data,onOnClick:l.viewItems},null,8,["data","onOnClick"])]),_:1})],64)):r.isSubmit?(o(),i("div",G,[n("div",$,s(e.$t("No results for"))+" \u201C"+s(this.q)+"\u201D ",1),n("div",z,s(e.$t("Sorry, no product matched for your search. Please try again"))+". ",1)])):_("",!0),r.isSubmit?_("",!0):(o(),i(u,{key:2},[l.hasFeaturedData?(o(),i("div",H,[n("div",U,s(e.$t("Trending Items")),1),n("div",null,[t(c,{flat:"","no-caps":"",color:e.$q.dark.mode?"grey300":"primary",to:"/items/feature?tag=trending&title=Trending"},{default:a(()=>[b(s(e.$t("See All")),1)]),_:1},8,["color"])])])):_("",!0),r.loading?(o(),i("div",X,[(o(),i(u,null,P(3,m=>t(L,{key:m,height:"80px",square:"",class:"radius10 bg-mygrey"})),64))])):(o(),p(j,{key:2},{default:a(()=>[t(S,{once:"",transition:"scale",class:"example-item"},{default:a(()=>[t(y,{data:r.data,onOnClick:l.viewItems},null,8,["data","onOnClick"])]),_:1})]),_:1}))],64)),t(v,{ref:"item_details",onAfterAddtocart:l.afterAddtocart},null,8,["onAfterAddtocart"]),t(x,{bordered:"",class:"bg-transparent modified-footer text-center relative-position text-dark flex flex-centerx justify-end"},{default:a(()=>[t(Q,{morphGroupModel:r.morphGroupModel,loading:!1,data:[]},null,8,["morphGroupModel"])]),_:1}),t(E,{position:"bottom-right","scroll-offset":150,offset:[18,18]},{default:a(()=>[t(c,{fab:"",icon:"keyboard_arrow_up",color:"dark",padding:"xs"})]),_:1})]),_:1})],64)}var ue=q(B,[["render",Y]]);export{ue as default};
