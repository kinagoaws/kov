import{_ as w,ad as p,ai as f,U as y,X as c,l as _,m as l,n as d,p as a,f as t,bh as T,bg as v,b8 as q,Q as m,af as g,S as Q,R as u,P as i,aX as R}from"./index.c5b868f5.js";import{Q as V}from"./QToolbarTitle.4da9f270.js";import{Q as C}from"./QToolbar.9b15bf0e.js";import{Q as B}from"./QSpace.24950ca6.js";import{Q as x}from"./QForm.997d74f6.js";import{C as O}from"./ClosePopup.32eeb9ff.js";const D={name:"TwoStepsVerification",props:["back_button","loading","message"],components:{ResendTimer:p(()=>f(()=>import("./ResendTimer.e0a37471.js"),["assets/ResendTimer.e0a37471.js","assets/index.c5b868f5.js","assets/index.7897e990.css"])),OtpInput:p(()=>f(()=>import("./OtpInput.339baa8b.js"),["assets/OtpInput.339baa8b.js","assets/index.c5b868f5.js","assets/index.7897e990.css"]))},setup(){return{SettingStore:y()}},data(){return{dialog:!1,otp:"",loader:!1,messages:""}},watch:{loading(e,o){this.loader=e},message(e,o){this.messages=this.message}},methods:{showModal(e){this.dialog=e},onResend(){console.log("onResend"),this.loader=!0,c.fetchDataByToken("RequestEmailCode").then(e=>{this.messages=e.msg,this.$refs.resend_timer.startTimer()}).catch(e=>{c.notify("dark",e,"error_outline",this.$q)}).then(e=>{this.loader=!1})},beforeShow(){setTimeout(()=>{this.$refs.resend_timer.startTimer()},1e3)},beforeHide(){},onSubmit(){this.$emit("afterVerify",this.otp)}}},I={class:"q-pl-md q-pr-md q-pb-md"},P={class:"font12"},$={class:"text-right q-pa-md"};function E(e,o,h,b,s,r){const k=_("OtpInput"),S=_("ResendTimer");return l(),d(R,{modelValue:s.dialog,"onUpdate:modelValue":o[2]||(o[2]=n=>s.dialog=n),position:"bottom",onBeforeHide:r.beforeHide,onBeforeShow:r.beforeShow,persistent:""},{default:a(()=>[t(T,null,{default:a(()=>[t(v,{class:"q-pa-none"},{default:a(()=>[t(C,{class:"text-primary"},{default:a(()=>[h.back_button==!1?q((l(),d(m,{key:0,flat:"",round:"",dense:"",icon:"close",color:"dark"},null,512)),[[O]]):(l(),d(m,{key:1,round:"",dense:"",icon:"arrow_back",unelevated:"",color:e.$q.dark.mode?"white":"mygrey","text-color":"dark",onClick:o[0]||(o[0]=n=>this.$emit("onBack"))},null,8,["color"])),t(V,{class:g(["font16 text-darkx",{"text-white":e.$q.dark.mode,"text-dark":!e.$q.dark.mode}])},{default:a(()=>[Q(u(e.$t("2-Step Verification")),1)]),_:1},8,["class"])]),_:1}),i("div",I,[i("p",P,u(e.$t("For your security, we want to make sure it's really you"))+". ",1),i("p",{class:g(["text-darkx",{"text-white":e.$q.dark.mode,"text-dark":!e.$q.dark.mode}])},u(s.messages),3),t(x,{onSubmit:r.onSubmit},{default:a(()=>[t(k,{"onUpdate:modelValue":o[1]||(o[1]=n=>s.otp=n),inputLength:4}),i("div",$,[t(S,{ref:"resend_timer",loading:s.loader,data:{title:this.$t("Resend code"),counter:b.SettingStore.settings_data.resend_counter},onOnResend:r.onResend},null,8,["loading","data","onOnResend"])]),t(B,{class:"q-pa-xs"}),t(m,{type:"submit",unelevated:"",color:"primary",label:e.$t("Submit"),class:"radius20 fit","no-caps":"",size:"lg",onClick:r.onSubmit,loading:s.loader},null,8,["label","onClick","loading"])]),_:1},8,["onSubmit"])])]),_:1})]),_:1})]),_:1},8,["modelValue","onBeforeHide","onBeforeShow"])}var F=w(D,[["render",E]]);export{F as default};
