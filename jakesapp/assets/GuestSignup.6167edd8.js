import{_ as w,ad as V,U as q,O as v,X as u,ae as c,l as Q,m,Y as g,f as r,p as l,af as h,F as x,Q as _,S as f,R as b,n as C,ag as i,P as n,ah as y,ac as k,ai as P}from"./index.c5b868f5.js";import{Q as T}from"./QToolbarTitle.4da9f270.js";import{Q as E}from"./QToolbar.9b15bf0e.js";import{Q as F}from"./QHeader.b374650f.js";import{Q as D}from"./QFooter.51024c6d.js";import{Q as U}from"./QForm.997d74f6.js";import{Q as B}from"./QPage.528ab8a8.js";import"./QResizeObserver.3ed5059f.js";const R={name:"GuestSignup",components:{componentsRecaptcha:V(()=>P(()=>import("./componentsRecaptcha.2f09d1e7.js"),["assets/componentsRecaptcha.2f09d1e7.js","assets/index.c5b868f5.js","assets/index.7897e990.css"]))},setup(e){const s=q(),p=v();return{SettingStore:s,DataStorePersisted:p}},data(){return{loading:!1,first_name:"",last_name:"",email_address:"",mobile_number:"",mobile_prefix:"",password:"",cpassword:"",field_type:"password",password_icon:"las la-low-vision",recaptcha_response:"",page_ready:!1}},mounted(){Object.keys(this.SettingStore.settings_data).length>0?this.page_ready=!0:this.$watch(()=>this.SettingStore.$state.settings_data,(e,s)=>{this.page_ready=!0})},methods:{recaptchaVerified(e){this.recaptcha_response=e},recaptchaExpired(){this.SettingStore.settings_data.captcha_enabled&&this.$refs.recapcha.reset()},recaptchaFailed(){},onSubmit(){this.loading=!0,u.fetchDataPost("registerGuest",{first_name:this.first_name,last_name:this.last_name,email_address:this.email_address,mobile_prefix:this.SettingStore.settings_data.phone_data.phonecode,mobile_number:this.mobile_number,password:this.password,cpassword:this.cpassword,recaptcha_response:this.recaptcha_response}).then(e=>{e.details.verify===!0?this.$router.push({path:"/user/verifycode",query:{uuid:e.details.uuid,msg:e.msg}}):(c.setUser(e.details.user_data),c.setToken(e.details.user_token),this.DataStorePersisted.user_settings=e.details.user_settings,this.$router.push("/home"))}).catch(e=>{this.recaptchaExpired(),u.notify("dark",e,"error_outline",this.$q)}).then(e=>{this.loading=!1})}}},A={class:"q-gutter-y-md"},G={class:"scroll"},I=["innerHTML"];function L(e,s,p,o,a,d){const S=Q("componentsRecaptcha");return m(),g(x,null,[r(F,{class:h(["bg-whitex",{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode}]),reveal:""},{default:l(()=>[r(E,null,{default:l(()=>[r(_,{onClick:s[0]||(s[0]=t=>e.$router.back()),round:"",dense:"",icon:"arrow_back",unelevated:"",color:e.$q.dark.mode?"grey":"mygrey","text-color":e.$q.dark.mode?"grey-9":"dark"},null,8,["color","text-color"]),r(T,{class:"text-weight-bold text-darkx"},{default:l(()=>[f(b(e.$t("Guest")),1)]),_:1})]),_:1})]),_:1},8,["class"]),r(B,{class:"q-pa-md"},{default:l(()=>[a.page_ready?(m(),C(U,{key:0,onSubmit:d.onSubmit},{default:l(()=>[r(i,{modelValue:a.first_name,"onUpdate:modelValue":s[1]||(s[1]=t=>a.first_name=t),label:e.$t("First name"),"stack-label":"",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),r(i,{modelValue:a.last_name,"onUpdate:modelValue":s[2]||(s[2]=t=>a.last_name=t),label:e.$t("Last name"),"stack-label":"",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),r(i,{modelValue:a.mobile_number,"onUpdate:modelValue":s[3]||(s[3]=t=>a.mobile_number=t),label:e.$t("Mobile number"),"stack-label":"",prefix:o.SettingStore.settings_data.phone_data.phonecode,mask:"##################",rules:[t=>t&&t.length>0||e.$t("This field is required"),t=>t.length<=15||e.$t("Please use maximum 15 characters")]},null,8,["modelValue","label","prefix","rules"]),s[9]||(s[9]=n("div",{class:"flex q-mb-sm"},[n("div",{class:"text-weight-bold q-mr-sm"},"Create Account"),n("div",{class:"text-caption"},"(Optional)")],-1)),n("div",A,[r(i,{modelValue:a.email_address,"onUpdate:modelValue":s[4]||(s[4]=t=>a.email_address=t),label:e.$t("Email address"),"stack-label":"",autocomplete:"off"},null,8,["modelValue","label"]),r(i,{modelValue:a.password,"onUpdate:modelValue":s[6]||(s[6]=t=>a.password=t),type:a.field_type,label:e.$t("Password"),"stack-label":"",color:"grey-5",autocomplete:"off"},{append:l(()=>[r(y,{onClick:s[5]||(s[5]=t=>this.field_type=this.field_type=="password"?"text":"password"),name:a.password_icon,color:"grey",class:"cursor-pointer"},null,8,["name"])]),_:1},8,["modelValue","type","label"]),r(i,{modelValue:a.cpassword,"onUpdate:modelValue":s[8]||(s[8]=t=>a.cpassword=t),type:a.field_type,label:e.$t("Confirm password"),"stack-label":"",color:"grey-5"},{append:l(()=>[r(y,{onClick:s[7]||(s[7]=t=>this.field_type=this.field_type=="password"?"text":"password"),name:a.password_icon,color:"grey",class:"cursor-pointer"},null,8,["name"])]),_:1},8,["modelValue","type","label"]),n("div",G,[r(S,{ref:"recapcha",sitekey:o.SettingStore.settings_data.captcha_site_key,is_enabled:o.SettingStore.settings_data.captcha_enabled,language_code:o.SettingStore.settings_data.captcha_lang,size:"normal",theme:"light",tabindex:0,onVerify:d.recaptchaVerified,onExpire:d.recaptchaExpired,onFail:d.recaptchaFailed},null,8,["sitekey","is_enabled","language_code","onVerify","onExpire","onFail"])]),o.SettingStore.settings_data.signup_enabled_terms?(m(),g("div",{key:0,class:"text-caption q-pb-md",innerHTML:o.SettingStore.settings_data.signup_terms},null,8,I)):k("",!0)]),r(D,{class:h(["q-pa-md border-top",{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-black":!e.$q.dark.mode}])},{default:l(()=>[r(_,{type:"submit",color:"primary",size:"lg",rounded:"",unelevated:"","no-caps":"",class:"full-width",loading:a.loading},{default:l(()=>[f(b(e.$t("Continue")),1)]),_:1},8,["loading"])]),_:1},8,["class"])]),_:1},8,["onSubmit"])):k("",!0)]),_:1})],64)}var Y=w(R,[["render",L]]);export{Y as default};
