import{Q as c}from"./QSkeleton.11b8074a.js";import{_ as k,X as d,m as l,n as u,p as a,f as s,bh as w,af as n,bg as m,P as o,Y as i,F as q,R as r,b8 as g,Q as _,ac as C,bd as v,bT as Q,S as p,aX as S}from"./index.c5b868f5.js";import{Q as $}from"./QSpace.24950ca6.js";import{C as y}from"./ClosePopup.32eeb9ff.js";const B={name:"CancelOrder",data(){return{loading:!1,loading_submit:!1,show_modal:!1,order_uuid:"",cancel_status:!1,cancel_msg:"",cancel_response:[]}},methods:{showModal(e){this.order_uuid=e,this.show_modal=!0},cancelOrderStatus(){this.loading=!0,d.fetchDataByTokenPost("cancelOrderStatus","order_uuid="+this.order_uuid).then(e=>{this.cancel_status=e.details.cancel_status,this.cancel_msg=e.details.cancel_msg,this.cancel_response=e.details}).catch(e=>{d.notify("dark",e,"error_outline",this.$q)}).then(e=>{this.loading=!1})},applyCancelOrder(){this.loading_submit=!0,d.fetchDataByTokenPost("applyCancelOrder","order_uuid="+this.order_uuid).then(e=>{this.show_modal=!1,d.notify("dark",e.msg,"check_circle",this.$q),this.$emit("afterCancelorder")}).catch(e=>{d.notify("dark",e,"warning",this.$q)}).then(e=>{this.loading_submit=!1})}}},O={class:"row q-gutter-x-sm q-mt-sm"},x={class:"col"},V={class:"col"},D={class:"text-h6 text-weight-bold"},T={key:0,class:"text-weight-bold text-body1"},P={key:1,class:"text-weight-bold no-margin text-body1"},N={class:"q-mt-md"},z={class:"text-body2"},A={key:2,class:"q-mt-md q-mb-sm"},F={class:"text-body2"},X={class:"row fit q-gutter-x-sm"},E={class:"col"},H={class:"col"};function I(e,h,M,R,t,f){return l(),u(S,{modelValue:t.show_modal,"onUpdate:modelValue":h[0]||(h[0]=b=>t.show_modal=b),onBeforeShow:f.cancelOrderStatus,persistent:"",position:"bottom","transition-show":"fade","transition-hide":"fadeout"},{default:a(()=>[s(w,{class:n({"bg-grey600 text-white":e.$q.dark.mode})},{default:a(()=>[t.loading?(l(),u(m,{key:0},{default:a(()=>[s(c,{height:"150px",square:"",class:n({"bg-grey600":e.$q.dark.mode,"bg-mygrey":!e.$q.dark.mode})},null,8,["class"]),o("div",O,[o("div",x,[s(c,{type:"QToolbar",class:n({"bg-grey600":e.$q.dark.mode,"bg-mygrey":!e.$q.dark.mode})},null,8,["class"])]),o("div",V,[s(c,{type:"QToolbar",class:n({"bg-grey600":e.$q.dark.mode,"bg-mygrey":!e.$q.dark.mode})},null,8,["class"])])])]),_:1})):(l(),i(q,{key:1},[s(m,{class:"row items-center q-pb-none"},{default:a(()=>[o("div",D,r(e.$t("Cancel order")),1),s($),g(s(_,{icon:"close",flat:"",round:"",dense:""},null,512),[[y]])]),_:1}),s(m,null,{default:a(()=>[t.cancel_response.refund_status==="full_refund"?(l(),i("div",T,r(e.$t("Are you sure"))+"? ",1)):(l(),i("h5",P,r(e.$t("How would you like to proceed"))+"? ",1)),o("div",N,[o("p",z,r(t.cancel_msg),1)]),t.cancel_response.refund_msg?(l(),i("div",A,[o("p",F,r(t.cancel_response.refund_msg),1)])):C("",!0)]),_:1}),s(v),s(Q,null,{default:a(()=>[o("div",X,[o("div",E,[s(_,{unelevated:"",rounded:"",color:"primary","no-caps":"",size:"17px",disable:!t.cancel_status,loading:t.loading_submit,onClick:f.applyCancelOrder,class:"fit"},{default:a(()=>[p(r(e.$t("Cancel order")),1)]),_:1},8,["disable","loading","onClick"])]),o("div",H,[g((l(),u(_,{unelevated:"",rounded:"",color:e.$q.dark.mode?"grey300":"dark","text-color":e.$q.dark.mode?"grey600":"white","no-caps":"",size:"17px",class:"fit"},{default:a(()=>[p(r(e.$t("Don't Cancel")),1)]),_:1},8,["color","text-color"])),[[y]])])])]),_:1})],64))]),_:1},8,["class"])]),_:1},8,["modelValue","onBeforeShow"])}var J=k(B,[["render",I]]);export{J as default};
