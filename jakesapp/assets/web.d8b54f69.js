import{W as i}from"./index.c5b868f5.js";class u extends i{async initialize(e){const n={version:"v17.0"};return await this.loadScript(e.locale),FB.init(Object.assign(Object.assign({},n),e))}loadScript(e){if(typeof document=="undefined")return Promise.reject("document global not found");const n="fb";if(document.getElementById(n))return Promise.resolve();const o=document.getElementsByTagName("head")[0],t=document.createElement("script");return new Promise(r=>{t.onload=()=>r(),t.defer=!0,t.async=!0,t.id=n,t.src=`https://connect.facebook.net/${e!=null?e:"en_US"}/sdk.js`,o.appendChild(t)})}async login(e){return new Promise((n,s)=>{FB.login(o=>{o.status==="connected"?n({accessToken:{token:o.authResponse.accessToken}}):s({accessToken:{token:null}})},{scope:e.permissions.join(",")})})}async limitedLogin(e){return new Promise((n,s)=>{console.log(e),s("Not implemented")})}async logout(){return new Promise(e=>FB.logout(()=>e()))}async reauthorize(){return new Promise(e=>FB.reauthorize(n=>e(n)))}async getCurrentAccessToken(){return new Promise((e,n)=>{FB.getLoginStatus(s=>{if(s.status==="connected"){const o={accessToken:{applicationId:void 0,declinedPermissions:[],expires:void 0,isExpired:void 0,lastRefresh:void 0,permissions:[],token:s.authResponse.accessToken,userId:s.authResponse.userID}};e(o)}else n({accessToken:{token:null}})})})}async getProfile(e){const n=e.fields.join(",");return new Promise((s,o)=>{FB.api("/me",{fields:n},t=>{if(t.error){o(t.error.message);return}s(t)})})}async logEvent(){return Promise.resolve()}async setAutoLogAppEventsEnabled(){return Promise.resolve()}async setAdvertiserTrackingEnabled(){return Promise.resolve()}async setAdvertiserIDCollectionEnabled(){return Promise.resolve()}}export{u as FacebookLoginWeb};
