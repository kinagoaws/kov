import{_ as f,X as n,m as h,Y as g,P as d,f as s,Q as _,af as m,p as a,$ as y,bX as $,bY as b,a0 as p,ah as u,S as k,R as Q}from"./index.c5b868f5.js";import{Q as V}from"./QItemLabel.4665782c.js";import{Q as q}from"./QSelect.65ab904e.js";import"./QMenu.b5349f2e.js";import"./selection.65959ca5.js";import"./rtl.276c3f1b.js";import"./format.8ac60962.js";const v={name:"SearchLocation",props:["detect_location","class_name","error"],data(){return{address:"",address_data:[],options:[],data:[],loading:!1,loading_search:!1,old_search:""}},mounted(){setTimeout(()=>{this.$refs.address.focus()},100)},watch:{address(e,o){n.empty(e)&&setTimeout(()=>{this.$emit("onClear")},500)}},methods:{filterFn(e,o,r){if(e.length<2){if(!n.empty(this.address)){o(()=>{});return}this.old_search="",this.loading_search=!1,r();return}this.old_search==e&&o(()=>{}),this.loading_search=!0,this.$emit("clearError"),setTimeout(()=>{o(()=>{this.options=[],n.fetchDataPost("getlocationAutocomplete","q="+e).then(l=>{this.$emit("afterResults",l.details.data),this.old_search=e}).catch(l=>{r()}).then(l=>{this.loading_search=!1})})},300)},setModel(e){this.address=e}}},C={class:"col-2",style:{"margin-left":"-8px"}},I={class:"col",style:{"margin-left":"-15px"}};function w(e,o,r,l,i,c){return h(),g("div",{class:m(["row q-col-gutter-none items-center",r.class_name])},[d("div",C,[s(_,{onClick:o[0]||(o[0]=t=>e.$emit("whenClose")),icon:"arrow_back",flat:"",dense:"",color:"primary"})]),d("div",I,[d("div",{class:m(["radius10 q-pl-md q-pr-sm",{"bg-grey600":e.$q.dark.mode,"bg-grey-2":!e.$q.dark.mode}])},[s(q,{modelValue:i.address,"onUpdate:modelValue":[o[2]||(o[2]=t=>i.address=t),e.selectAddress],ref:"address","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:i.options,onFilter:c.filterFn,onInputValue:c.setModel,onClear:o[3]||(o[3]=t=>e.$emit("onClear")),"hide-dropdown-icon":"",loading:i.loading_search,borderless:"",standout:e.$q.dark.mode?"grey600":"bg-grey-2","bg-color":e.$q.dark.mode?"grey600":"grey-2",dense:"",clearable:"","clear-icon":"o_cancel",placeholder:e.$t("Enter your address")},{option:a(t=>[s(y,$(b(t.itemProps)),{default:a(()=>[s(p,{avatar:""},{default:a(()=>[s(u,{name:"o_place"})]),_:1}),s(p,null,{default:a(()=>[s(V,null,{default:a(()=>[k(Q(t.opt.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),append:a(()=>[s(u,{onClick:o[1]||(o[1]=t=>e.$emit("locateLocation")),name:"my_location",class:"cursor-pointer",color:"primary"})]),_:1},8,["modelValue","options","onFilter","onUpdate:modelValue","onInputValue","loading","standout","bg-color","placeholder"])],2)])],2)}var E=f(v,[["render",w]]);export{E as default};
