import{_ as w,ad as S,U as V,O as q,X as p,ae as u,l as Q,m as h,Y as c,f as r,p as l,af as d,F as x,Q as g,S as f,R as _,ag as o,ah as b,ac as P,ai as v}from"./index.c5b868f5.js";import{Q as C}from"./QToolbarTitle.4da9f270.js";import{Q as T}from"./QToolbar.9b15bf0e.js";import{Q as $}from"./QHeader.b374650f.js";import{Q as E}from"./QFooter.51024c6d.js";import{Q as F}from"./QForm.997d74f6.js";import{Q as U}from"./QPage.528ab8a8.js";import"./QResizeObserver.3ed5059f.js";const D={name:"LoginPage",components:{componentsRecaptcha:S(()=>v(()=>import("./componentsRecaptcha.2f09d1e7.js"),["assets/componentsRecaptcha.2f09d1e7.js","assets/index.c5b868f5.js","assets/index.7897e990.css"]))},setup(e){const s=V(),m=q();return{SettingStore:s,DataStorePersisted:m}},data(){return{loading:!1,first_name:"",last_name:"",email_address:"",mobile_number:"",mobile_prefix:"",password:"",cpassword:"",field_type:"password",password_icon:"las la-low-vision",recaptcha_response:"",page_ready:!1}},mounted(){Object.keys(this.SettingStore.settings_data).length>0?this.page_ready=!0:this.$watch(()=>this.SettingStore.$state.settings_data,(e,s)=>{this.page_ready=!0})},watch:{field_type(e,s){this.password_icon=e=="password"?"las la-low-vision":"las la-eye"}},methods:{recaptchaVerified(e){this.recaptcha_response=e},recaptchaExpired(){this.SettingStore.settings_data.captcha_enabled&&this.$refs.recapcha.reset()},recaptchaFailed(){},onSubmit(){this.loading=!0,p.fetchDataPost("registerUser",{first_name:this.first_name,last_name:this.last_name,email_address:this.email_address,mobile_prefix:this.SettingStore.settings_data.phone_data.phonecode,mobile_number:this.mobile_number,password:this.password,cpassword:this.cpassword,recaptcha_response:this.recaptcha_response}).then(e=>{e.details.verify===!0?this.$router.push({path:"/user/verifycode",query:{uuid:e.details.uuid,msg:e.msg}}):(u.setUser(e.details.user_data),u.setToken(e.details.user_token),this.DataStorePersisted.user_settings=e.details.user_settings,this.$router.push("/home"))}).catch(e=>{this.recaptchaExpired(),p.notify("dark",e,"error_outline",this.$q)}).then(e=>{this.loading=!1})}}},A={key:0,class:"full-width q-pa-md"};function R(e,s,m,i,a,n){const y=Q("componentsRecaptcha");return h(),c(x,null,[r($,{reveal:"",class:d({"bg-mydark ":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:l(()=>[r(T,null,{default:l(()=>[r(g,{onClick:s[0]||(s[0]=t=>e.$router.back()),round:"",dense:"",icon:"arrow_back",unelevated:"",color:e.$q.dark.mode?"grey":"mygrey","text-color":e.$q.dark.mode?"grey-9":"dark"},null,8,["color","text-color"]),r(C,{class:"text-weight-bold text-darkx"},{default:l(()=>[f(_(e.$t("Create Account")),1)]),_:1})]),_:1})]),_:1},8,["class"]),r(U,{padding:"",class:d(["text-darkx flex flex-center",{"text-white":e.$q.dark.mode,"text-dark":!e.$q.dark.mode}])},{default:l(()=>[a.page_ready?(h(),c("div",A,[r(F,{onSubmit:n.onSubmit},{default:l(()=>[r(o,{modelValue:a.first_name,"onUpdate:modelValue":s[1]||(s[1]=t=>a.first_name=t),label:e.$t("First name"),"stack-label":"",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),r(o,{modelValue:a.last_name,"onUpdate:modelValue":s[2]||(s[2]=t=>a.last_name=t),label:e.$t("Last name"),"stack-label":"",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),r(o,{modelValue:a.email_address,"onUpdate:modelValue":s[3]||(s[3]=t=>a.email_address=t),label:e.$t("Email address"),"stack-label":"",rules:[(t,k)=>k.email(t)||this.$t("Please enter a valid email address")]},null,8,["modelValue","label","rules"]),r(o,{modelValue:a.mobile_number,"onUpdate:modelValue":s[4]||(s[4]=t=>a.mobile_number=t),label:e.$t("Mobile number"),"stack-label":"",prefix:i.SettingStore.settings_data.phone_data.phonecode,mask:"##################",rules:[t=>t&&t.length>0||e.$t("This field is required"),t=>t.length<=15||e.$t("Please use maximum 15 characters")]},null,8,["modelValue","label","prefix","rules"]),r(o,{modelValue:a.password,"onUpdate:modelValue":s[6]||(s[6]=t=>a.password=t),type:a.field_type,label:e.$t("Password"),"stack-label":"",color:"grey-5",rules:[t=>t&&t.length>0||this.$t("This field is required")]},{append:l(()=>[r(b,{onClick:s[5]||(s[5]=t=>this.field_type=this.field_type=="password"?"text":"password"),name:a.password_icon,color:"grey",class:"cursor-pointer"},null,8,["name"])]),_:1},8,["modelValue","type","label","rules"]),r(o,{modelValue:a.cpassword,"onUpdate:modelValue":s[8]||(s[8]=t=>a.cpassword=t),type:a.field_type,label:e.$t("Confirm password"),"stack-label":"",color:"grey-5",rules:[t=>t&&t.length>0||this.$t("This field is required")]},{append:l(()=>[r(b,{onClick:s[7]||(s[7]=t=>this.field_type=this.field_type=="password"?"text":"password"),name:a.password_icon,color:"grey",class:"cursor-pointer"},null,8,["name"])]),_:1},8,["modelValue","type","label","rules"]),r(y,{ref:"recapcha",sitekey:i.SettingStore.settings_data.captcha_site_key,is_enabled:i.SettingStore.settings_data.captcha_enabled,language_code:i.SettingStore.settings_data.captcha_lang,size:"normal",theme:"light",tabindex:0,onVerify:n.recaptchaVerified,onExpire:n.recaptchaExpired,onFail:n.recaptchaFailed},null,8,["sitekey","is_enabled","language_code","onVerify","onExpire","onFail"]),r(E,{class:d(["q-pa-md border-top",{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-black":!e.$q.dark.mode}])},{default:l(()=>[r(g,{type:"submit",color:"primary",size:"lg",rounded:"",unelevated:"","no-caps":"",class:"full-width",loading:a.loading},{default:l(()=>[f(_(e.$t("Create Account")),1)]),_:1},8,["loading"])]),_:1},8,["class"])]),_:1},8,["onSubmit"])])):P("",!0)]),_:1},8,["class"])],64)}var M=w(D,[["render",R]]);export{M as default};
