import{_,O as g,X as b,m as d,n as r,p as a,b8 as h,$ as n,f as t,a0 as s,a1 as D,S as f,R as l,Q as u,ac as w,aM as p,Y as v,F as A,P as k,af as $}from"./index.c5b868f5.js";import{Q as m}from"./QItemLabel.4665782c.js";import{Q}from"./QSkeleton.11b8074a.js";import{Q as S}from"./QList.9b7158f1.js";const C={name:"CartAddress",data(){return{loading:!1,data:[]}},setup(){return{DataStorePersisted:g()}},mounted(){Object.keys(this.DataStorePersisted.location_data).length>0&&this.checkoutAddress(),this.$watch(()=>this.DataStorePersisted.$state.location_data,(e,i)=>{this.checkoutAddress()})},computed:{hasData(){return Object.keys(this.data).length>0}},methods:{checkoutAddress(){this.loading=!0,b.fetchDataByTokenPost("checkoutAddress","place_id="+this.DataStorePersisted.location_data.id).then(e=>{this.data=e.details.data}).catch(e=>{this.$emit("setError",e),this.data=[]}).then(e=>{this.loading=!1})},addInstructions(){this.$emit("addInstructions",{id:this.data.place_id,addressLine1:this.data.address.address1,description:this.data.address.formatted_address,latitude:this.data.latitude,longitude:this.data.longitude,attributes:this.data.attributes})}}},P={class:"text-weight-bold"},x={class:"ellipsis"};function I(e,i,B,q,o,c){return d(),r(S,{dense:"",class:$(["rounded-borders q-pt-xs q-pb-xs q-mb-sm bg-mygreyx radius10",{"bg-grey600":e.$q.dark.mode,"bg-mygrey":!e.$q.dark.mode}])},{default:a(()=>[h((d(),r(n,{clickable:"",onClick:i[0]||(i[0]=y=>e.$emit("changeAddress"))},{default:a(()=>[t(s,{avatar:"",class:"item-column-less"},{default:a(()=>[t(D,{color:"primary","text-color":"white",icon:"las la-map-marker",size:"md"})]),_:1}),t(s,null,{default:a(()=>[t(m,{caption:""},{default:a(()=>[f(l(e.$t("Delivery address")),1)]),_:1})]),_:1}),c.hasData?(d(),r(s,{key:0,side:""},{default:a(()=>[t(u,{round:"",color:"yellow-9",icon:"edit",flat:"",size:"sm"})]),_:1})):w("",!0)]),_:1})),[[p]]),o.loading?(d(),r(n,{key:0},{default:a(()=>[t(s,{avatar:"",class:"item-column-less",style:{"min-width":"40px"}}),t(s,null,{default:a(()=>[t(Q,{recttype:"type"})]),_:1})]),_:1})):(d(),v(A,{key:1},[c.hasData?h((d(),r(n,{key:0,clickable:"",class:"item-normal-height",onClick:c.addInstructions},{default:a(()=>[t(s,{avatar:"",class:"item-column-less",style:{"min-width":"40px"}}),t(s,null,{default:a(()=>[t(m,{class:"text-caption"},{default:a(()=>[k("div",P,l(e.$t(o.data.attributes.address_label)),1),k("div",x,l(o.data.address.address1)+" "+l(o.data.address.formatted_address),1)]),_:1}),t(m,{class:"text-caption text-yellow-9"},{default:a(()=>[f(l(e.$t("Add delivery instructions")),1)]),_:1})]),_:1}),t(s,{side:""},{default:a(()=>[t(u,{round:"",color:"yellow-9",icon:"add",flat:"",size:"sm"})]),_:1})]),_:1},8,["onClick"])),[[p]]):(d(),r(n,{key:1},{default:a(()=>[t(s,null,{default:a(()=>[t(u,{color:"yellow-9",flat:"",label:e.$t("Add new address"),"no-caps":"",onClick:i[1]||(i[1]=y=>e.$emit("changeAddress"))},null,8,["label"])]),_:1})]),_:1}))],64))]),_:1},8,["class"])}var O=_(C,[["render",I]]);export{O as default};
