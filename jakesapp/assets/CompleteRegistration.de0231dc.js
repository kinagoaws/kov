import{_ as f,O as b,U as w,X as i,ae as n,m,Y as _,f as l,p as r,af as u,F as k,Q as p,S as V,R as h,P as y,ag as o,n as S,ac as q}from"./index.c5b868f5.js";import{Q}from"./QToolbarTitle.4da9f270.js";import{Q as $}from"./QToolbar.9b15bf0e.js";import{Q as c}from"./QHeader.b374650f.js";import{Q as P}from"./QFooter.51024c6d.js";import{Q as C}from"./QForm.997d74f6.js";import{Q as T}from"./QInnerLoading.ff23f6a9.js";import{Q as D}from"./QPage.528ab8a8.js";import"./QResizeObserver.3ed5059f.js";const U={name:"CompleteRegistration",data(){return{loading:!1,loading_submit:!1,mobile_prefix:"",settings:[],first_name:"",last_name:"",email_address:"",mobile_number:"",password:"",cpassword:"",page_ready:!1}},setup(){const e=b(),t=w();return{DataStorePersisted:e,SettingStore:t}},mounted(){Object.keys(this.SettingStore.settings_data).length>0?(this.getCustomerInfo(),this.page_ready=!0):this.$watch(()=>this.SettingStore.$state.settings_data,(e,t)=>{this.getCustomerInfo(),this.page_ready=!0})},methods:{isValidPassword(){return this.password===this.cpassword?!0:this.$t("Confirm password does not macth with password")},getCustomerInfo(){this.loading=!0,i.fetchDataPost("getCustomerInfo","client_uuid="+this.$route.query.uuid).then(e=>{this.first_name=e.details.firstname,this.last_name=e.details.lastname,this.email_address=e.details.email_address,this.settings=e.details.options}).catch(e=>{i.notify("dark",e,"error_outline",this.$q)}).then(e=>{this.loading=!1})},obSubmit(){this.loading_submit=!0;const e={local_id:i.getStorage("local_id"),client_uuid:this.$route.query.uuid,firstname:this.first_name,lastname:this.last_name,mobile_prefix:this.mobile_prefix,mobile_number:this.mobile_number,password:this.password,cpassword:this.cpassword};i.fetchDataPost("completeSocialSignup",e).then(t=>{n.setUser(t.details.user_data),n.setToken(t.details.user_token),this.DataStorePersisted.user_settings=t.details.user_settings,this.$router.push("/home")}).catch(t=>{i.notify("dark",t,"error_outline",this.$q)}).then(t=>{this.loading_submit=!1})}}},I={class:"text-weight-medium text-body2"};function F(e,t,B,g,a,d){return m(),_(k,null,[l(c,{class:"bg-white",reveal:""},{default:r(()=>[l($,null,{default:r(()=>[l(p,{onClick:t[0]||(t[0]=s=>e.$router.back()),round:"",dense:"",icon:"arrow_back",unelevated:"",color:e.$q.dark.mode?"white":"mygrey","text-color":"dark"},null,8,["color"]),l(Q,{class:"text-weight-bold text-dark"},{default:r(()=>[V(h(e.$t("Compelete registration")),1)]),_:1})]),_:1})]),_:1}),l(D,{class:u(["q-pa-md",{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode}])},{default:r(()=>[l(C,{onSubmit:d.obSubmit,autocomplete:"off"},{default:r(()=>[y("div",I,h(e.$t("Fill your information")),1),l(o,{modelValue:a.first_name,"onUpdate:modelValue":t[1]||(t[1]=s=>a.first_name=s),label:e.$t("First name"),rules:[s=>s&&s.length>0||e.$t("This field is required")]},null,8,["modelValue","label","rules"]),l(o,{modelValue:a.last_name,"onUpdate:modelValue":t[2]||(t[2]=s=>a.last_name=s),label:e.$t("Last name"),rules:[s=>s&&s.length>0||e.$t("This field is required")]},null,8,["modelValue","label","rules"]),l(o,{modelValue:a.email_address,"onUpdate:modelValue":t[3]||(t[3]=s=>a.email_address=s),label:e.$t("Email"),disable:"",rules:[s=>s&&s.length>0||e.$t("This field is required")]},null,8,["modelValue","label","rules"]),a.page_ready?(m(),S(o,{key:0,modelValue:a.mobile_number,"onUpdate:modelValue":t[4]||(t[4]=s=>a.mobile_number=s),label:e.$t("Mobile number"),mask:"##################",prefix:g.SettingStore.settings_data.phone_data.phonecode,rules:[s=>s&&s.length>0||e.$t("This field is required"),s=>s.length<=15||e.$t("Please use maximum 15 characters")]},null,8,["modelValue","label","prefix","rules"])):q("",!0),l(o,{type:"password",modelValue:a.password,"onUpdate:modelValue":t[5]||(t[5]=s=>a.password=s),label:e.$t("Password"),rules:[s=>s&&s.length>0||e.$t("This field is required"),d.isValidPassword]},null,8,["modelValue","label","rules"]),l(o,{type:"password",modelValue:a.cpassword,"onUpdate:modelValue":t[6]||(t[6]=s=>a.cpassword=s),label:e.$t("Confirm Password"),rules:[s=>s&&s.length>0||e.$t("This field is required"),d.isValidPassword]},null,8,["modelValue","label","rules"]),l(P,{class:u(["bg-whitex q-pa-md border-top",{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode}])},{default:r(()=>[l(p,{type:"submit",color:"primary",size:"lg",rounded:"",unelevated:"","no-caps":"",class:"full-width",loading:a.loading_submit,label:e.$t("Submit")},null,8,["loading","label"])]),_:1},8,["class"])]),_:1},8,["onSubmit"]),l(T,{showing:a.loading,color:e.$q.dark.mode?"grey300":"primary"},null,8,["showing","color"])]),_:1},8,["class"])],64)}var M=f(U,[["render",F]]);export{M as default};
