import{_ as w,X as p,m as s,n as g,p as r,f as e,Q,S as m,R as l,af as b,P as a,Y as o,ac as _,Z as k,F as n,ah as x,$,a0 as v,a1 as q}from"./index.c5b868f5.js";import{Q as R}from"./QToolbarTitle.4da9f270.js";import{Q as P}from"./QToolbar.9b15bf0e.js";import{Q as I}from"./QHeader.b374650f.js";import{Q as L}from"./QImg.79fcc1c6.js";import{Q as y}from"./QItemLabel.4665782c.js";import{Q as T}from"./QList.9b7158f1.js";import{Q as z}from"./QInnerLoading.ff23f6a9.js";import{Q as B}from"./QCircularProgress.1d7da185.js";import{Q as C}from"./QInfiniteScroll.e5ee4582.js";import{Q as N}from"./QPageScroller.9f5fda23.js";import{Q as S}from"./QPage.528ab8a8.js";import{Q as A}from"./QPullToRefresh.85618661.js";import"./QResizeObserver.3ed5059f.js";import"./format.8ac60962.js";import"./use-page-sticky.ec3ca395.js";import"./TouchPan.5486290b.js";import"./touch.9135741d.js";import"./selection.65959ca5.js";const D={name:"ReviewAll",data(){return{loading:!0,data:[],data_done:!1,page:0,is_refresh:void 0}},computed:{hasData(){return Object.keys(this.data).length>0}},methods:{refresh(t){this.resetPagination(),this.is_refresh=t},getReview(t,c){this.loading=!0,p.fetchDataPost("getReview2","page="+t+"&rows=20").then(f=>{this.page=t,this.data.push(f.details.data),f.details.end_results&&this.$refs.nscroll&&this.$refs.nscroll.stop()}).catch(f=>{this.data_done=!0,p.empty(this.$refs.nscroll)||this.$refs.nscroll.stop()}).then(f=>{c(),this.loading=!1,p.empty(this.is_refresh)||this.is_refresh()})},resetPagination(){this.page=0,this.data=[],this.$refs.nscroll.reset(),this.$refs.nscroll.resume(),this.$refs.nscroll.trigger()}}},V={class:"q-pl-md q-pr-md q-pb-xl"},j=["innerHTML"],H={key:1,class:"row justify-center absolute-bottom"},F={class:"q-pa-md flex flex-center"},M={class:"flex items-center q-gutter-x-sm"},E={class:"text-body2 text-grey"},O={key:0,class:"row justify-center q-my-sm"},X={class:"font12 text-grey"},Y={key:1,class:"flex flex-center card-small-medium"},Z={class:"full-width text-center"},G={class:"text-weight-medium font15"},J={class:"text-grey font12"};function K(t,c,f,U,d,u){return s(),g(A,{onRefresh:u.refresh},{default:r(()=>[e(I,{reveal:"",class:b({"bg-mydark text-white":t.$q.dark.mode,"bg-white text-dark":!t.$q.dark.mode})},{default:r(()=>[e(P,null,{default:r(()=>[e(Q,{onClick:c[0]||(c[0]=h=>t.$router.back()),round:"",dense:"",icon:"arrow_back",unelevated:"",color:t.$q.dark.mode?"grey":"mygrey","text-color":t.$q.dark.mode?"grey-9":"dark"},null,8,["color","text-color"]),e(R,{class:"text-weight-bold text-dark"},{default:r(()=>[m(l(t.$t("Reviews")),1)]),_:1})]),_:1})]),_:1},8,["class"]),e(S,null,{default:r(()=>[a("div",V,[e(C,{ref:"nscroll",onLoad:u.getReview,offset:250},{loading:r(()=>[d.page<=1?(s(),g(z,{key:0,showing:!0,color:"primary",size:"md"})):d.page>1?(s(),o("div",H,[a("div",F,[a("div",M,[a("div",null,[e(B,{indeterminate:"",rounded:"",size:"30px",color:"primary"})]),a("div",E,l(t.$t("loading")),1)])])])):_("",!0)]),default:r(()=>[e(T,{separator:""},{default:r(()=>[(s(!0),o(n,null,k(d.data,h=>(s(),o(n,{key:h},[(s(!0),o(n,null,k(h,i=>(s(),g($,{key:i},{default:r(()=>[e(v,{avatar:"",top:""},{default:r(()=>[e(q,null,{default:r(()=>[e(L,{src:i.url_image,fit:"contain","spinner-color":"primary","spinner-size":"xs","placeholder-src":"placeholder.png",loading:"lazy"},null,8,["src"])]),_:2},1024)]),_:2},1024),e(v,null,{default:r(()=>[e(y,{class:"text-weight-bold"},{default:r(()=>[i.as_anonymous=="1"?(s(),o(n,{key:0},[m(l(i.hidden_fullname),1)],64)):(s(),o(n,{key:1},[m(l(i.fullname),1)],64))]),_:2},1024),e(y,{caption:""},{default:r(()=>[m(l(i.date_created),1)]),_:2},1024),e(y,{lines:"3"},{default:r(()=>[a("span",{innerHTML:i.review},null,8,j)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))],64))),128))]),_:1})]),_:1},8,["onLoad"])]),d.loading?_("",!0):(s(),o(n,{key:0},[u.hasData?(s(),o(n,{key:0},[d.data_done&&d.data.length>=10?(s(),o("div",O,[a("p",X,l(t.$t("end of results")),1)])):_("",!0)],64)):(s(),o("div",Y,[a("div",Z,[e(x,{name:"history",size:"70px",color:"grey-3"}),a("div",G,l(t.$t("No reviews available")),1),a("div",J,l(t.$t("pull down to refresh")),1)])]))],64)),e(N,{position:"bottom-right","scroll-offset":150,offset:[18,18]},{default:r(()=>[e(Q,{fab:"",icon:"keyboard_arrow_up",color:t.$q.dark.mode?"grey":"grey-2","text-color":t.$q.dark.mode?"grey-9":"grey",padding:"xs"},null,8,["color","text-color"])]),_:1})]),_:1})]),_:1},8,["onRefresh"])}var ye=w(D,[["render",K]]);export{ye as default};
