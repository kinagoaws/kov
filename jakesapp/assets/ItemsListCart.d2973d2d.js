import{_ as Q,ad as L,ai as w,X as g,l as S,m as a,n as k,p as n,Y as i,F as c,Z as m,P as l,f as s,Q as f,$ as z,a0 as I,ac as y,R as _,S as p,af as $}from"./index.c5b868f5.js";import{Q as P}from"./QImg.79fcc1c6.js";import{Q as C}from"./QItemLabel.4665782c.js";import{Q as T}from"./QSlideItem.d86a998c.js";import{Q as A}from"./QList.9b7158f1.js";import"./TouchPan.5486290b.js";import"./touch.9135741d.js";import"./selection.65959ca5.js";import"./use-render-cache.3aae9b27.js";const B={name:"ItemsListCart",props:["cart_loading","cart_uuid","cart_items","cart_subtotal"],components:{FavsItemsCart:L(()=>w(()=>import("./FavsItemsCart.1c5b5dd9.js"),["assets/FavsItemsCart.1c5b5dd9.js","assets/index.c5b868f5.js","assets/index.7897e990.css"]))},data(){return{loading:!1,data_slide:{},loading_rm:!1,qty_options:[1,2,3,4,5,6,7,8,9]}},mounted(){this.qty_options=[];for(let e=1;e<100;e++)this.qty_options.push(e)},computed:{isLoading(){return this.loading?!0:!!this.cart_loading}},methods:{lessCartQty(e,r){e--,e>0?this.updateCartQty(e,r):this.removeCartItem(r.cart_row)},addCartQty(e,r){e++,this.updateCartQty(e,r)},updateCartQty(e,r){this.loading=!0;let u="cart_uuid="+this.cart_uuid+"&cart_row="+r.cart_row+"&item_qty="+e;g.fetchDataPost("updateCartItems",u).then(h=>{this.$emit("afterUpdatecart")}).catch(h=>{this.$emit("afterUpdatecart"),g.notify("dark",h,"error_outline",this.$q)}).then(h=>{this.loading=!1})},removeCartItem(e){this.loading_rm=!0;let r="cart_uuid="+this.cart_uuid+"&row="+e;g.fetchDataPost("removeCartItem",r).then(u=>{this.$emit("afterUpdatecart")}).catch(u=>{this.$emit("afterUpdatecart"),g.notify("dark",u,"error_outline",this.$q)}).then(u=>{this.loading=!1,this.loading_rm=!1})},onRight(e,r){this.data_slide[r]=e},closeSlide(e){console.log(e),this.data_slide[e]&&(console.log(this.data_slide[e]),this.data_slide[e].reset())},removeItem(e){this.removeCartItem(e.cart_row)},afterSavefav(e){console.log("afterSavefav"),console.log(e),this.removeCartItem(e.cart_row)}}},F={class:"q-gutter-md"},R=["innerHTML"],V=["innerHTML"],D={class:"flex items-center q-col-gutter-x-sm"},H={class:"borderx"},M={class:"borderx"},N={class:"borderx"},U={key:0},E={class:"column justify-end items-end fit"},j={class:"col"},O={class:"absolute-bottom-right"};function X(e,r,u,h,b,d){const q=S("FavsItemsCart");return a(),k(A,{separator:""},{default:n(()=>[(a(!0),i(c,null,m(u.cart_items,t=>(a(),k(T,{key:t.item_id,onRight:r[1]||(r[1]=o=>d.onRight(o,e.index)),"right-color":"secondary"},{right:n(()=>[l("div",F,[s(f,{round:"",color:"primary",icon:"close",unelevated:"",onClick:r[0]||(r[0]=o=>d.closeSlide(e.index))}),s(q,{ref_for:!0,ref:"favs",item_token:t.item_token,cat_id:t.cat_id,active:t.save_item,onAfterSavefav:o=>d.afterSavefav(t)},null,8,["item_token","cat_id","active","onAfterSavefav"]),s(f,{round:"",color:"negative",icon:"delete_outline",unelevated:"",onClick:o=>d.removeItem(t),loading:b.loading_rm},null,8,["onClick","loading"])])]),default:n(()=>[s(z,{class:"q-pa-smx radius10"},{default:n(()=>[s(I,{avatar:"",top:""},{default:n(()=>[s(P,{src:t.url_image,style:{height:"60px",width:"60px"},loading:"lazy",fit:"cover","spinner-color":"primary","spinner-size":"sm",class:"rounded-borders"},null,8,["src"])]),_:2},1024),s(I,{top:""},{default:n(()=>[s(C,{class:"text-weight-medium"},{default:n(()=>[l("span",{innerHTML:t.item_name},null,8,R)]),_:2},1024),t.price.size_name!=""?(a(),k(C,{key:0,caption:""},{default:n(()=>[l("span",{innerHTML:t.price.size_name},null,8,V)]),_:2},1024)):y("",!0),s(C,{class:"borderx"},{default:n(()=>[l("div",D,[l("div",H,[s(f,{icon:t.qty==1?"delete_outline":"remove",color:t.qty==1?"negative":"primary",unelevated:"",size:"11px",class:"rounded-borders",style:{width:"30px"},onClick:o=>d.lessCartQty(t.qty>1?t.qty--:1,t),disable:d.isLoading},null,8,["icon","color","onClick","disable"])]),l("div",M,_(t.qty),1),l("div",N,[s(f,{icon:"add",color:"primary",unelevated:"",size:"11px",class:"rounded-borders",style:{width:"30px"},onClick:o=>d.addCartQty(t.qty++,t),disable:d.isLoading},null,8,["onClick","disable"])])])]),_:2},1024),s(C,{caption:""},{default:n(()=>[t.special_instructions!=""?(a(),i("div",U,_(t.special_instructions),1)):y("",!0),t.attributes!=""?(a(!0),i(c,{key:1},m(t.attributes,o=>(a(),i("p",{key:o,class:"no-margin"},[(a(!0),i(c,null,m(o,(v,x)=>(a(),i(c,null,[p(_(v),1),x<o.length-1?(a(),i(c,{key:0},[p(", ")],64)):y("",!0)],64))),256))]))),128)):y("",!0),(a(!0),i(c,null,m(t.addons,o=>(a(),i("div",{key:o},[(a(!0),i(c,null,m(o.addon_items,v=>(a(),i(c,{key:v},[p(_(v.sub_item_name),1)],64))),128))]))),128))]),_:2},1024)]),_:2},1024),s(I,{top:"",side:""},{default:n(()=>[l("div",E,[l("div",j,[s(f,{round:"",color:e.$q.dark.mode?"grey500":"grey-4",icon:"clear",size:"xs",unelevated:"",onClick:o=>d.removeItem(t),disable:d.isLoading},null,8,["color","onClick","disable"])]),l("div",{class:$(["col text-weight-bold relative-position",{"text-grey300":e.$q.dark.mode,"text-negative":!e.$q.dark.mode}])},[l("div",O,[t.price.discount<=0?(a(),i(c,{key:0},[p(_(t.price.pretty_total),1)],64)):(a(),i(c,{key:1},[p(_(t.price.pretty_total_after_discount),1)],64))])],2)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})}var re=Q(B,[["render",X]]);export{re as default};
