import{_ as q,ad as v,U as C,X as f,l as k,m as o,n as m,p as a,f as t,Q as y,S,R as u,af as b,P as i,Y as d,Z as Q,F as _,ac as $,ai as x,$ as A,a0 as h,as as B}from"./index.c5b868f5.js";import{Q as z}from"./QToolbarTitle.4da9f270.js";import{Q as M}from"./QToolbar.9b15bf0e.js";import{Q as R}from"./QHeader.b374650f.js";import{Q as V}from"./QImg.79fcc1c6.js";import{Q as T}from"./QItemLabel.4665782c.js";import{Q as E}from"./QList.9b7158f1.js";import{Q as F}from"./QInnerLoading.ff23f6a9.js";import{Q as H}from"./QCircularProgress.1d7da185.js";import{Q as N}from"./QInfiniteScroll.e5ee4582.js";import{Q as O}from"./QPageScroller.9f5fda23.js";import{Q as j}from"./QPage.528ab8a8.js";import{Q as U}from"./QPullToRefresh.85618661.js";import"./QResizeObserver.3ed5059f.js";import"./format.8ac60962.js";import"./use-page-sticky.ec3ca395.js";import"./TouchPan.5486290b.js";import"./touch.9135741d.js";import"./selection.65959ca5.js";const X={name:"FavoritesList",components:{ItemDetails:v(()=>x(()=>import("./ItemDetails.bbc3f6ec.js"),["assets/ItemDetails.bbc3f6ec.js","assets/index.c5b868f5.js","assets/index.7897e990.css","assets/QSkeleton.11b8074a.js","assets/QItemLabel.4665782c.js","assets/QImg.79fcc1c6.js","assets/QList.9b7158f1.js","assets/QSelect.65ab904e.js","assets/QMenu.b5349f2e.js","assets/selection.65959ca5.js","assets/rtl.276c3f1b.js","assets/format.8ac60962.js","assets/QSpace.24950ca6.js","assets/QPageSticky.d00b3310.js","assets/use-page-sticky.ec3ca395.js","assets/ClosePopup.32eeb9ff.js","assets/CartData.5b90ca7b.js"])),LoaderDialog:v(()=>x(()=>import("./LoaderDialog.6a26f95e.js"),["assets/LoaderDialog.6a26f95e.js","assets/QInnerLoading.ff23f6a9.js","assets/index.c5b868f5.js","assets/index.7897e990.css"]))},setup(){return{SettingStore:C()}},data(){return{data:[],loading:!1,tab:"transaction",tabList:[{value:"transaction",label:this.$t("Transactions")},{value:"points_merchant",label:this.$t("Points by merchant")}],page:0,is_refresh:void 0,balance:0,loading_balance:!0}},mounted(){},computed:{hasData(){return Object.keys(this.data).length>0},getData(){return this.data}},methods:{async refresh(e){this.resetPagination(),e()},getTransactions(e,s){this.loading=!0,this.page=e,f.fetchDataByTokenPost("getsaveitems2","page="+e).then(l=>{l.code==1?(this.data.push(l.details.data),l.details.end_results&&this.$refs.nscroll&&this.$refs.nscroll.stop()):this.$refs.nscroll&&this.$refs.nscroll.stop()}).catch(l=>{this.$refs.nscroll&&this.$refs.nscroll.stop()}).then(l=>{this.$refs.nscroll.stop(),this.loading=!1,s(),f.empty(this.is_refresh)||this.is_refresh()})},resetPagination(){this.page=0,this.data=[],this.$refs.nscroll.reset(),this.$refs.nscroll.resume(),this.$refs.nscroll.trigger()},viewItems(e){this.$refs.item_details.showModal(!0,e)},afterAddtocart(){this.$router.push("/cart")},addTofav(e,s,l){this.$refs.loader_dialog.modal=!0,f.fetchDataByTokenPost("addTofav","cat_id="+e.cat_id+"&item_token="+e.item_uuid).then(c=>{this.data[s]&&this.data[s].splice(l,1),this.data[s].length===0&&this.data.splice(s,1)}).catch(c=>{f.notify("dark",c,"error_outline",this.$q)}).then(c=>{this.$refs.loader_dialog.modal=!1})}}},Y={class:"q-pl-md q-pr-md q-pt-sm q-pb-xl"},Z=["innerHTML"],G=["innerHTML"],J={key:0,class:"card-small-medium flex flex-center text-body2 text-grey"},K={key:1,class:"row justify-center absolute-bottom"},W={class:"q-pa-md flex flex-center"},ee={class:"flex items-center q-gutter-x-sm"},te={class:"text-body2 text-grey"};function ae(e,s,l,c,p,n){const L=k("ItemDetails"),D=k("LoaderDialog");return o(),m(U,{onRefresh:n.refresh},{default:a(()=>[t(R,{reveal:"",class:b({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode})},{default:a(()=>[t(M,null,{default:a(()=>[t(y,{onClick:s[0]||(s[0]=g=>e.$router.back()),round:"",dense:"",icon:"arrow_back",unelevated:"",color:e.$q.dark.mode?"grey":"mygrey","text-color":e.$q.dark.mode?"grey-9":"dark"},null,8,["color","text-color"]),t(z,{class:"text-weight-bold"},{default:a(()=>[S(u(e.$t("Favorites")),1)]),_:1})]),_:1})]),_:1},8,["class"]),t(j,null,{default:a(()=>[i("div",Y,[t(N,{ref:"nscroll",onLoad:n.getTransactions,offset:250},{default:a(()=>[n.hasData?(o(),m(E,{key:0,separator:""},{default:a(()=>[(o(!0),d(_,null,Q(n.getData,(g,I)=>(o(),d(_,{key:g},[(o(!0),d(_,null,Q(g,(r,P)=>(o(),m(A,{key:r.item_id,clickable:"",onClick:w=>n.viewItems({cat_id:r.cat_id,item_uuid:r.item_uuid})},{default:a(()=>[t(h,{avatar:""},{default:a(()=>[t(V,{src:r.image_url,style:{width:"70px",height:"70px"},fit:"cover",loading:"lazy","spinner-color":"primary","spinner-size":"xs",class:"rounded-borders"},null,8,["src"])]),_:2},1024),t(h,null,{default:a(()=>[t(T,null,{default:a(()=>[i("span",{innerHTML:r.item_name},null,8,Z)]),_:2},1024),t(T,{caption:"",lines:"2"},{default:a(()=>[i("span",{innerHTML:r.item_description},null,8,G)]),_:2},1024)]),_:2},1024),t(h,{side:""},{default:a(()=>[i("div",{class:b(["text-bold",{"text-green":r.transaction_type=="credit","text-red":r.transaction_type=="debit"}])},u(r.transaction_amount),3)]),_:2},1024),t(h,{side:"",top:""},{default:a(()=>[t(y,{icon:"delete_outline",color:"red-2","text-color":"red-9",unelevated:"",size:"11px",round:"",onClick:B(w=>n.addTofav(r,I,P),["stop"])},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"]))),128))],64))),128))]),_:1})):(o(),d(_,{key:1},[p.loading?$("",!0):(o(),d("div",J,[i("div",null,u(e.$t("No available data")),1)]))],64))]),loading:a(()=>[p.page<=1?(o(),m(F,{key:0,showing:!0,color:"primary",size:"md"})):p.page>1?(o(),d("div",K,[i("div",W,[i("div",ee,[i("div",null,[t(H,{indeterminate:"",rounded:"",size:"30px",color:"primary"})]),i("div",te,u(e.$t("loading")),1)])])])):$("",!0)]),_:1},8,["onLoad"])]),t(O,{position:"bottom-right","scroll-offset":150,offset:[18,18]},{default:a(()=>[t(y,{fab:"",icon:"keyboard_arrow_up",color:"grey-2","text-color":"grey",padding:"xs"})]),_:1}),t(L,{ref:"item_details",onAfterAddtocart:n.afterAddtocart},null,8,["onAfterAddtocart"]),t(D,{ref:"loader_dialog"},null,512)]),_:1})]),_:1},8,["onRefresh"])}var Qe=q(X,[["render",ae]]);export{Qe as default};
