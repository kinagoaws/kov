import{_ as L,ad as y,O as R,U,ae as $,X as x,l as k,m as s,Y as o,f as e,p as a,F as n,af as f,Q as C,S as i,R as l,n as b,ac as S,Z as v,P as _,$ as D,a0 as c,a1 as q,ah as P,bc as z,bd as A,b8 as B,ai as p}from"./index.c5b868f5.js";import{Q as N}from"./QToolbarTitle.4da9f270.js";import{Q as F}from"./QToolbar.9b15bf0e.js";import{Q as Y}from"./QHeader.b374650f.js";import{Q as I}from"./QSkeleton.11b8074a.js";import{Q as u}from"./QItemLabel.4665782c.js";import{Q as j}from"./QPage.528ab8a8.js";import{Q as H}from"./QFooter.51024c6d.js";import{Q as X}from"./QPullToRefresh.85618661.js";import{C as Z}from"./ClosePopup.32eeb9ff.js";import{u as G}from"./CartData.5b90ca7b.js";import"./QResizeObserver.3ed5059f.js";import"./TouchPan.5486290b.js";import"./touch.9135741d.js";import"./selection.65959ca5.js";import"./format.8ac60962.js";const J={name:"CartPage",components:{ItemsListCart:y(()=>p(()=>import("./ItemsListCart.d2973d2d.js"),["assets/ItemsListCart.d2973d2d.js","assets/index.c5b868f5.js","assets/index.7897e990.css","assets/QImg.79fcc1c6.js","assets/QItemLabel.4665782c.js","assets/QSlideItem.d86a998c.js","assets/TouchPan.5486290b.js","assets/touch.9135741d.js","assets/selection.65959ca5.js","assets/use-render-cache.3aae9b27.js","assets/QList.9b7158f1.js"])),AddressQuickList:y(()=>p(()=>import("./AddressQuickList.5f1f03da.js"),["assets/AddressQuickList.5f1f03da.js","assets/QSpace.24950ca6.js","assets/index.c5b868f5.js","assets/index.7897e990.css","assets/QSkeleton.11b8074a.js","assets/QList.9b7158f1.js","assets/QItemLabel.4665782c.js","assets/ClosePopup.32eeb9ff.js"])),OrderDetailsinfo:y(()=>p(()=>import("./OrderDetailsinfo.918e570a.js"),["assets/OrderDetailsinfo.918e570a.js","assets/QSpace.24950ca6.js","assets/index.c5b868f5.js","assets/index.7897e990.css","assets/QBtnToggle.f3167bc9.js","assets/QInnerLoading.ff23f6a9.js","assets/QSelect.65ab904e.js","assets/QItemLabel.4665782c.js","assets/QMenu.b5349f2e.js","assets/selection.65959ca5.js","assets/rtl.276c3f1b.js","assets/format.8ac60962.js","assets/ClosePopup.32eeb9ff.js"])),SimilarItems:y(()=>p(()=>import("./SimilarItems.30856d4a.js"),["assets/SimilarItems.30856d4a.js","assets/index.c5b868f5.js","assets/index.7897e990.css","assets/QSkeleton.11b8074a.js","assets/QImg.79fcc1c6.js","assets/swiper.75391432.js","assets/swiper.dbf2012b.css","assets/CartData.5b90ca7b.js"])),EmptyCart:y(()=>p(()=>import("./EmptyCart.f6c15225.js"),["assets/EmptyCart.f6c15225.js","assets/index.c5b868f5.js","assets/index.7897e990.css","assets/QSpace.24950ca6.js"]))},data(){return{loading:!0,refresh:!1,payload:["items","subtotal","distance_local","items_count","merchant_info"],params:{},is_guest:!1,item_viewed:!1}},setup(){const t=G(),d=R(),w=U();return{CartData:t,DataStorePersisted:d,SettingStore:w}},mounted(){this.is_guest=!$.authenticated(),this.params={cart_uuid:x.getStorage("cart_uuid"),local_id:this.DataStorePersisted.location_data.id,payload:this.payload,currency_code:this.DataStorePersisted.getUseCurrency()},this.Cart(),Object.keys(this.SettingStore.settings_data).length>0?Object.keys(this.SettingStore.format_transaction_data).length<=0&&this.SettingStore.formatTransaction():this.$watch(()=>this.SettingStore.$state.settings_data,(t,d)=>{this.SettingStore.formatTransaction()}),this.storeOpen()},methods:{onItemView(){console.log("onItemView"),this.item_viewed=!0},afterItemhide(){console.log("afterItemhide"),this.item_viewed=!1},storeOpen(){this.CartData.checkStoreOpen({whento_deliver:this.DataStorePersisted.whento_deliver,delivery_date:this.DataStorePersisted.delivery_date,delivery_time:this.DataStorePersisted.delivery_time_data})},printTime(){var t=new Date,d=t.toLocaleString();console.log(d)},async Cart(){this.loading=!0,this.params.local_id=this.DataStorePersisted.location_data.id,await this.CartData.getCart(this.params),this.loading=!1},async afterUpdatecart(){this.refresh=!0,this.params.local_id=this.DataStorePersisted.location_data.id,await this.CartData.getCart(this.params),this.refresh=!1},async refreshCart(t){this.refresh=!0,this.params.local_id=this.DataStorePersisted.location_data.id,await this.CartData.getCart(this.params),this.refresh=!1,t()},confirmDeleteCart(){this.$q.dialog({title:this.$t("Clear cart"),message:this.$t("Are your sure you want to clear your cart?"),cancel:!0,persistent:!0,ok:{unelevated:!0,color:"primary",rounded:!0,"text-color":"white",size:"md",label:this.$t("Yes clear cart"),"no-caps":!0},cancel:{unelevated:!0,rounded:!0,color:"grey-3","text-color":"black",size:"md",label:this.$t("Cancel"),"no-caps":!0}}).onOk(()=>{this.clearCart()}).onOk(()=>{}).onCancel(()=>{}).onDismiss(()=>{})},async clearCart(){this.refresh=!0,await this.CartData.clearCart(this.params),this.refresh=!1,this.afterUpdatecart(),this.CartData.getCartCount()},changeAddress(){console.log("is_guest",this.is_guest),this.is_guest?this.$router.push({path:"/location",query:{redirect:"/cart"}}):this.$refs.address_list.modal=!0},afterSelectaddress(t){console.log("afterSelectaddress"),this.DataStorePersisted.location_data=t,this.SettingStore.formatTransaction(),this.afterUpdatecart()},showOrderdetails(){this.$refs.order_details_info.modal=!0},afterSavetrans(){console.log("afterSavetrans"),this.storeOpen()}}},K={key:0,class:"q-pa-md"},M={class:"q-pa-md"},W={key:1,class:"bg-red-2 q-pa-sm radius8 text-dark q-mt-sm q-mb-sm radius10x rounded-borders line-one"},ee={class:"q-pl-md q-pr-md q-mt-sm"},te={class:"q-pl-md q-pr-md q-mt-sm q-pb-md"};function ae(t,d,w,r,g,m){const Q=k("ItemsListCart"),O=k("SimilarItems"),T=k("EmptyCart"),V=k("AddressQuickList"),E=k("OrderDetailsinfo");return s(),o(n,null,[e(X,{onRefresh:m.refreshCart},{default:a(()=>[e(Y,{reveal:"",class:f({"bg-mydark text-white":t.$q.dark.mode,"bg-white text-dark":!t.$q.dark.mode})},{default:a(()=>[e(F,null,{default:a(()=>[e(C,{onClick:d[0]||(d[0]=h=>t.$router.back()),round:"",dense:"",icon:"arrow_back",unelevated:"",color:t.$q.dark.mode?"grey":"mygrey","text-color":t.$q.dark.mode?"grey-9":"dark"},null,8,["color","text-color"]),e(N,{class:"text-weight-bold"},{default:a(()=>[i(l(t.$t("Your Order")),1)]),_:1}),r.CartData.hasCart&&!g.loading?(s(),b(C,{key:0,round:"",dense:"",icon:"o_delete",unelevated:"",color:"red-2","text-color":"red-9",onClick:m.confirmDeleteCart},null,8,["onClick"])):S("",!0)]),_:1})]),_:1},8,["class"]),e(j,null,{default:a(()=>[g.loading?(s(),o("div",K,[(s(),o(n,null,v(3,h=>e(I,{key:h,height:"50px",square:"",class:f(["radius10 q-mb-sm",{"bg-grey600":t.$q.dark.mode,"bg-mygrey":!t.$q.dark.mode}])},null,8,["class"])),64)),(s(),o(n,null,v(3,h=>e(I,{key:h,height:"180px",square:"",class:f(["radius10 q-mb-sm",{"bg-grey600":t.$q.dark.mode,"bg-mygrey":!t.$q.dark.mode}])},null,8,["class"])),64))])):(s(),o(n,{key:1},[r.CartData.hasCart?(s(),o(n,{key:0},[_("div",M,[_("div",{class:f(["radius10 q-mb-sm",{"bg-grey600 ":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}])},[e(D,{clickable:"",onClick:m.showOrderdetails},{default:a(()=>[e(c,{avatar:""},{default:a(()=>[e(q,{color:"primary","text-color":"white",icon:"schedule"})]),_:1}),e(c,null,{default:a(()=>[e(u,{caption:""},{default:a(()=>[i(l(t.$t("Order & Time")),1)]),_:1}),e(u,null,{default:a(()=>[i(l(r.SettingStore.getTransactionData.transaction),1)]),_:1}),e(u,{class:"text-caption"},{default:a(()=>[r.SettingStore.getTransactionData.time?(s(),o(n,{key:0},[i(l(r.SettingStore.getTransactionData.time),1)],64)):(s(),o(n,{key:1},[i(l(r.SettingStore.getTransactionData.date),1)],64))]),_:1})]),_:1}),e(c,{side:""},{default:a(()=>[e(P,{name:"chevron_right",color:"grey"})]),_:1})]),_:1},8,["onClick"])],2),r.SettingStore.getTransactionData.transaction_type=="delivery"?(s(),o("div",{key:0,class:f(["radius10 q-mb-sm",{"bg-grey600 ":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}])},[e(D,{clickable:"",onClick:m.changeAddress},{default:a(()=>[e(c,{avatar:""},{default:a(()=>[e(q,{color:"primary","text-color":"white",icon:"las la-map-marker"})]),_:1}),e(c,null,{default:a(()=>[e(u,{caption:""},{default:a(()=>[i(l(t.$t("Delivery address")),1)]),_:1}),r.DataStorePersisted.hasRecentAddress?(s(),o(n,{key:0},[e(u,null,{default:a(()=>[i(l(r.DataStorePersisted.location_data.addressLine1),1)]),_:1}),e(u,{class:"text-caption"},{default:a(()=>[i(l(r.DataStorePersisted.location_data.description),1)]),_:1})],64)):(s(),o(n,{key:1},[i(l(t.$t("Select your address")),1)],64))]),_:1}),e(c,{side:""},{default:a(()=>[e(P,{name:"chevron_right",color:"grey"})]),_:1})]),_:1},8,["onClick"])],2)):S("",!0),r.CartData.isCartError?(s(),o("div",W,[(s(!0),o(n,null,v(r.CartData.getCartErrors,h=>(s(),o(n,{key:h},[i(l(h),1),d[2]||(d[2]=_("br",null,null,-1))],64))),128))])):S("",!0),_("div",{class:f(["radius10 q-mb-sm",{"bg-grey600 ":t.$q.dark.mode,"bg-mygrey ":!t.$q.dark.mode}])},[e(D,{clickable:"",tag:"label"},{default:a(()=>[e(c,{avatar:""},{default:a(()=>[e(q,{color:"primary","text-color":"white",icon:"restaurant"})]),_:1}),e(c,null,{default:a(()=>[e(u,{caption:""},{default:a(()=>[i(l(t.$t("Cutlery")),1)]),_:1}),e(u,null,{default:a(()=>[i(l(t.$t("Include utensils, napkins, etc.")),1)]),_:1})]),_:1}),e(c,{side:""},{default:a(()=>[e(z,{modelValue:r.DataStorePersisted.include_utensil,"onUpdate:modelValue":d[1]||(d[1]=h=>r.DataStorePersisted.include_utensil=h),size:"lg","checked-icon":"check_box","unchecked-icon":"check_box",color:"yellow-9"},null,8,["modelValue"])]),_:1})]),_:1})],2)]),e(Q,{cart_loading:r.CartData.cart_loading,cart_uuid:r.CartData.cart_uuid,cart_items:r.CartData.cart_items,cart_subtotal:r.CartData.cart_subtotal,onAfterUpdatecart:m.afterUpdatecart},null,8,["cart_loading","cart_uuid","cart_items","cart_subtotal","onAfterUpdatecart"]),_("div",ee,[e(C,{flat:"",label:t.$t("Add more items"),"no-caps":"",color:"primary",to:"/menu"},null,8,["label"])]),e(A),_("div",te,[e(O,{ref:"similar_items",onAfterAddtocart:m.afterUpdatecart,onOnItemView:m.onItemView,onAfterItemhide:m.afterItemhide},null,8,["onAfterAddtocart","onOnItemView","onAfterItemhide"])])],64)):(s(),b(T,{key:1}))],64))]),_:1}),!g.loading&&r.CartData.hasCart&&!g.item_viewed?(s(),b(H,{key:0,class:f(["",{"bg-mydark text-white":t.$q.dark.mode,"bg-white text-black":!t.$q.dark.mode}])},{default:a(()=>[e(A),e(D,null,{default:a(()=>[e(c,null,{default:a(()=>[e(u,{class:"text-weight-medium"},{default:a(()=>[i(l(t.$t("Total Price")),1)]),_:1}),e(u,{class:f(["text-negativex text-weight-bold",{"text-grey300":t.$q.dark.mode,"text-negative":!t.$q.dark.mode}])},{default:a(()=>[i(l(r.CartData.getCartSubTotalValue),1)]),_:1},8,["class"])]),_:1}),e(c,null,{default:a(()=>[B(e(C,{unelevated:"",rounded:"",color:"primary","text-color":"white","no-caps":"",class:"full-width",label:t.$t("Checkout"),size:"17px",loading:g.refresh,to:{path:"/checkout",query:{redirect:"/checkout"}}},null,8,["label","loading"]),[[Z]])]),_:1})]),_:1})]),_:1},8,["class"])):S("",!0)]),_:1},8,["onRefresh"]),e(V,{ref:"address_list",redirect:"/cart",onAfterSelectaddress:m.afterSelectaddress},null,8,["onAfterSelectaddress"]),e(E,{ref:"order_details_info",onAfterSavetrans:m.afterSavetrans},null,8,["onAfterSavetrans"])],64)}var pe=L(J,[["render",ae]]);export{pe as default};
