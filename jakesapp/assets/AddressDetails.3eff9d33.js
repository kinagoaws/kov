import{_ as g,U as b,X as n,m as _,n as f,p as l,f as a,bh as c,b8 as y,Q as m,S as u,R as d,bg as v,ag as i,P as p,af as S,aX as k}from"./index.c5b868f5.js";import{Q}from"./QToolbarTitle.4da9f270.js";import{Q as q}from"./QToolbar.9b15bf0e.js";import{Q as V}from"./QSelect.65ab904e.js";import{Q as r}from"./QSpace.24950ca6.js";import{Q as D}from"./QBtnToggle.f3167bc9.js";import{Q as w}from"./QFooter.51024c6d.js";import{Q as A}from"./QForm.997d74f6.js";import{C as T}from"./ClosePopup.32eeb9ff.js";import"./QItemLabel.4665782c.js";import"./QMenu.b5349f2e.js";import"./selection.65959ca5.js";import"./rtl.276c3f1b.js";import"./format.8ac60962.js";import"./QResizeObserver.3ed5059f.js";const $={name:"AddressDetails",setup(){return{SettingStore:b()}},data(){return{loading:!1,modal:!1,formatted_address:"",address1:"",location_name:"101",delivery_options:this.$t("Leave it at my door"),delivery_instructions:"",address_label:"Home",delivery_options_data:[],address_label_data:[],location_data:"",latitude:"",longitude:"",place_id:""}},mounted(){Object.keys(this.SettingStore.settings_data).length>0?this.setFormData():this.$watch(()=>this.SettingStore.$state.settings_data,(e,s)=>{this.setFormData()})},watch:{location_data(e,s){this.address1=e.description,this.formatted_address=e.addressLine1,this.latitude=e.latitude,this.longitude=e.longitude,this.place_id=e.id,e.attributes&&(this.location_name=e.attributes.location_name,this.delivery_options=e.attributes.delivery_options,this.delivery_instructions=e.attributes.delivery_instructions,this.address_label=e.attributes.address_label)}},methods:{setFormData(){this.delivery_options_data=this.SettingStore.settings_data.addresss_delivery_option,this.address_label_data=this.SettingStore.settings_data.address_label},submit(){this.loading=!0;let e="formatted_address="+this.formatted_address;e+="&address1="+this.address1,e+="&location_name="+this.location_name,e+="&delivery_options="+this.delivery_options,e+="&delivery_instructions="+this.delivery_instructions,e+="&address_label="+this.address_label,e+="&latitude="+this.latitude,e+="&longitude="+this.longitude,e+="&place_id="+this.place_id,n.fetchDataByTokenPost("saveClientAddress",e).then(s=>{this.modal=!1,this.$emit("afterSaveaddress",{id:this.place_id,addressLine1:this.address1,description:this.formatted_address,latitude:this.latitude,longitude:this.longitude})}).catch(s=>{n.notify("negative",s,"error_outline",this.$q)}).then(s=>{this.loading=!1})}}},B={class:"text-body2 q-mb-sm"},U={class:"scroll bg-grey-2x radius20"};function C(e,s,F,z,o,h){return _(),f(k,{modelValue:o.modal,"onUpdate:modelValue":s[6]||(s[6]=t=>o.modal=t),persistent:"",maximized:!0,"transition-show":"slide-up","transition-hide":"slide-down",onBeforeShow:e.beforeShow},{default:l(()=>[a(c,null,{default:l(()=>[a(A,{onSubmit:h.submit},{default:l(()=>[a(q,null,{default:l(()=>[y(a(m,{round:"",dense:"",icon:"arrow_back",unelevated:"",color:e.$q.dark.mode?"grey":"mygrey","text-color":e.$q.dark.mode?"grey-9":"dark"},null,8,["color","text-color"]),[[T]]),a(Q,{class:"text-weight-bold text-darkx"},{default:l(()=>[u(d(e.$t("Address details")),1)]),_:1})]),_:1}),a(v,{class:"scroll card-small-medium"},{default:l(()=>[a(i,{modelValue:o.address1,"onUpdate:modelValue":s[0]||(s[0]=t=>o.address1=t),label:e.$t("Street name"),"stack-label":"",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),a(i,{modelValue:o.formatted_address,"onUpdate:modelValue":s[1]||(s[1]=t=>o.formatted_address=t),label:e.$t("Street number"),"stack-label":"",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),a(i,{modelValue:o.location_name,"onUpdate:modelValue":s[2]||(s[2]=t=>o.location_name=t),label:e.$t("Aparment, suite or floor"),"stack-label":"",rules:[t=>t&&t.length>0||this.$t("This field is required")]},null,8,["modelValue","label","rules"]),a(V,{label:e.$t("Delivery options"),"stack-label":"",modelValue:o.delivery_options,"onUpdate:modelValue":s[3]||(s[3]=t=>o.delivery_options=t),options:o.delivery_options_data,"transition-show":"scale","transition-hide":"scale","emit-value":"","map-options":""},null,8,["label","modelValue","options"]),a(r,{class:"q-pa-sm"}),a(i,{modelValue:o.delivery_instructions,"onUpdate:modelValue":s[4]||(s[4]=t=>o.delivery_instructions=t),autogrow:"","stack-label":"",label:e.$t("Add delivery instructions")},null,8,["modelValue","label"]),a(r,{class:"q-pa-sm"}),p("div",B,d(e.$t("Address label")),1),p("div",U,[a(D,{class:"rounded-group no-margin",modelValue:o.address_label,"onUpdate:modelValue":s[5]||(s[5]=t=>o.address_label=t),"toggle-color":e.$q.dark.mode?"grey600":e.dark,"no-caps":"",unelevated:"",options:o.address_label_data,"emit-value":"",size:"16px",color:e.$q.dark.mode?"grey":"mygrey","text-color":e.$q.dark.mode?"grey-9":"dark"},null,8,["modelValue","toggle-color","options","color","text-color"])]),a(r,{class:"q-pa-sm"})]),_:1}),a(w,{class:S(["bg-whitex q-pa-md border-top",{"bg-mydark text-white":e.$q.dark.mode,"bg-white text-dark":!e.$q.dark.mode}])},{default:l(()=>[a(m,{type:"submit",color:"primary","text-color":"white",size:"lg",rounded:"",unelevated:"","no-caps":"",class:"fit",loading:o.loading},{default:l(()=>[u(d(e.$t("Save Address")),1)]),_:1},8,["loading"])]),_:1},8,["class"])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","onBeforeShow"])}var W=g($,[["render",C]]);export{W as default};
