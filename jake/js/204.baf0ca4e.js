"use strict";(globalThis["webpackChunkcom_kinago_single"]=globalThis["webpackChunkcom_kinago_single"]||[]).push([[204],{204:(t,e,i)=>{i.r(e),i.d(e,{default:()=>q});var a=i(1758);const s={key:0},n={key:1,class:"relative-position"},l={class:"row inline q-mt-md q-col-gutter-sm"},o={class:""},d={class:""};function r(t,e,i,r,p,u){const c=(0,a.g2)("q-skeleton"),g=(0,a.g2)("q-btn-toggle"),h=(0,a.g2)("q-inner-loading"),m=(0,a.g2)("q-input"),_=(0,a.g2)("q-btn"),k=(0,a.g2)("q-form");return(0,a.uX)(),(0,a.CE)(a.FK,null,[p.is_loading?((0,a.uX)(),(0,a.CE)("div",s,[(0,a.bF)(c,{type:"QInput",height:"30px",class:"w-50"})])):((0,a.uX)(),(0,a.CE)("div",n,[(0,a.bF)(g,{modelValue:p.tips,"onUpdate:modelValue":[e[0]||(e[0]=t=>p.tips=t),u.updateTips],"toggle-color":"dark",color:"grey-11","text-color":"dark","no-caps":"",rounded:"",unelevated:"",class:"rounded-group2 small text-weight-bold line-1 q-pa-none",options:p.tips_data,dense:t.$q.screen.lt.sm},null,8,["modelValue","options","onUpdate:modelValue","dense"]),(0,a.bF)(h,{showing:p.inner_loading,label:"","label-class":"text-dark",color:"warning","label-style":"font-size: 1.1em"},null,8,["showing"])])),"fixed"===p.tips?((0,a.uX)(),(0,a.Wv)(k,{key:2,onSubmit:u.onApplyTips},{default:(0,a.k6)((()=>[(0,a.Lk)("div",l,[(0,a.Lk)("div",o,[(0,a.bF)(m,{dense:"","bg-color":"mygrey",color:"warning",outlined:"",modelValue:p.manual_tip,"onUpdate:modelValue":e[1]||(e[1]=t=>p.manual_tip=t),style:{"max-width":"100px"}},null,8,["modelValue"])]),(0,a.Lk)("div",d,[(0,a.bF)(_,{type:"submit",unelevated:"",dense:"",rounded:"",color:"warning","text-color":"black","no-caps":"",class:"q-pl-md q-pr-md",label:t.$t("Add tip"),size:"17px",loading:p.loading},null,8,["label","loading"])])])])),_:1},8,["onSubmit"])):(0,a.Q3)("",!0)],64)}i(7781),i(9526);var p=i(2911),u=i(1464),c=i(2532);const g={name:"Tips",props:["cart_loaded","cart_updated"],data(){return{tips:"",tips_data:[],manual_tip:0,is_loading:!0,loading:!1,inner_loading:!1}},setup(t){const e=(0,u.Q)(),i=(0,c.t)();return{DataStorePersisted:e,transactionStore:i}},watch:{cart_loaded(t,e){0==t&&this.loadTips()},cart_updated(t,e){0==t&&this.loadTips()}},methods:{loadTips(t){t||(this.is_loading=!0),p.A.fetchDataPost("loadTips","currency_code="+this.DataStorePersisted.getUseCurrency()+"&cart_uuid="+p.A.getStorage("cart_uuid")).then((t=>{this.tips=t.details.tips,this.tips_data=t.details.data,this.setOther()})).catch((t=>{})).then((t=>{this.is_loading=!1}))},updateTips(t){"fixed"===t||this.checkoutAddTips(t,2)},onApplyTips(){this.checkoutAddTips(this.manual_tip,1)},checkoutAddTips(t,e){1===e?this.loading=!0:this.inner_loading=!0;const i={cart_uuid:p.A.getStorage("cart_uuid"),value:t,is_manual:1==e};p.A.checkoutAddTips(i).then((t=>{this.$emit("afterApplytips")})).catch((t=>{p.A.notify("negative",t,"error_outline",this.$q)})).then((t=>{1===e?this.loading=!1:this.inner_loading=!1}))},setOther(){if(this.tips>0){let t=!1;this.tips_data.forEach(((e,i)=>{this.tips===e.value&&(t=!0)})),t||(this.manual_tip=this.tips,this.tips="fixed")}}}};var h=i(2807),m=i(3820),_=i(8975),k=i(9035),b=i(9200),A=i(9270),y=i(6384),T=i(8582),v=i.n(T);const f=(0,h.A)(g,[["render",r]]),q=f;v()(g,"components",{QSkeleton:m.Ay,QBtnToggle:_.A,QInnerLoading:k.A,QForm:b.A,QInput:A.A,QBtn:y.A})}}]);