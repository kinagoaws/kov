"use strict";(globalThis["webpackChunkcom_kinago_single"]=globalThis["webpackChunkcom_kinago_single"]||[]).push([[4523],{4523:(e,t,a)=>{a.r(t),a.d(t,{default:()=>D});var n=a(1758),l=a(8790);const s={class:"row justify-center q-pa-md"},o={class:"col-md-9 col-12"},i={class:"row"},r={key:0,class:"col-md-4 col-sm-4 col-xs-12"},c={class:"col-md-8 col-sm-8 col-xs-12"},d={class:"text-weight-bold"},p={key:1,class:"text-weight-bold text-warning"},m={class:"q-pt-md q-pl-md q-pr-md"},u={class:"q-pa-md",style:{"min-height":"calc(50vh)"}},y={key:0,style:{height:"calc(35vh)"},class:"flex flex-center text-grey text-body2"},f={key:0,style:{height:"calc(35vh)"},class:"flex flex-center relative-position"},g={key:1,class:"row justify-center absolute-bottom"};function h(e,t,a,h,b,A){const k=(0,n.g2)("StickyBack"),_=(0,n.g2)("LocationNav"),P=(0,n.g2)("AccountNav"),$=(0,n.g2)("q-item-label"),C=(0,n.g2)("q-item-section"),F=(0,n.g2)("q-inner-loading"),v=(0,n.g2)("q-btn"),S=(0,n.g2)("q-item"),q=(0,n.g2)("q-separator"),w=(0,n.g2)("WalletBunos"),W=(0,n.g2)("q-tab"),x=(0,n.g2)("q-tabs"),L=(0,n.g2)("q-list"),Q=(0,n.g2)("q-spinner-dots"),T=(0,n.g2)("q-infinite-scroll"),V=(0,n.g2)("q-card"),X=(0,n.g2)("WalletTopupform"),B=(0,n.g2)("WalletTopupreceipt"),D=(0,n.g2)("StripeComponents"),E=(0,n.g2)("RazorpayComponents"),z=(0,n.g2)("PaypalComponents"),R=(0,n.g2)("MercadopagoComponents"),I=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(I,{padding:""},{default:(0,n.k6)((()=>[A.isMobile?((0,n.uX)(),(0,n.Wv)(k,{key:0,url:"/account/menu",label:"Back"})):((0,n.uX)(),(0,n.Wv)(_,{key:1})),(0,n.Lk)("div",s,[(0,n.Lk)("div",o,[(0,n.Lk)("div",i,[A.isMobile?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",r,[(0,n.bF)(P)])),(0,n.Lk)("div",c,[(0,n.bF)(V,{flat:"",class:"fit"},{default:(0,n.k6)((()=>[(0,n.bF)(S,null,{default:(0,n.k6)((()=>[(0,n.bF)(C,null,{default:(0,n.k6)((()=>[(0,n.bF)($,{class:"text-weight-bold"},{default:(0,n.k6)((()=>[(0,n.Lk)("h5",d,(0,l.v_)(e.$t("Available Balance")),1)])),_:1}),(0,n.bF)($,{caption:""},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.$t("Your wallet transaction history")),1)])),_:1})])),_:1}),(0,n.bF)(C,{side:"",top:""},{default:(0,n.k6)((()=>[(0,n.bF)($,null,{default:(0,n.k6)((()=>[b.loading_balance?((0,n.uX)(),(0,n.Wv)(F,{key:0,showing:!0,size:"md",color:"warning"})):((0,n.uX)(),(0,n.CE)("h4",p,(0,l.v_)(b.balance),1))])),_:1})])),_:1}),(0,n.bF)(C,{side:""},{default:(0,n.k6)((()=>[(0,n.bF)(v,{round:"",color:"blue",icon:"add",onClick:t[0]||(t[0]=e=>this.$refs.topup.dialog=!0)})])),_:1})])),_:1}),(0,n.bF)(q),(0,n.Lk)("div",m,[(0,n.bF)(w)]),(0,n.Lk)("div",u,[(0,n.bF)(x,{modelValue:b.tab,"onUpdate:modelValue":[t[1]||(t[1]=e=>b.tab=e),A.tabChange],dense:"","active-color":"dark","indicator-color":"warning",align:"justify","narrow-indicator":"","no-caps":"",class:(0,l.C4)([{"text-grey300":e.$q.dark.mode,"text-dark":!e.$q.dark.mode},"bg-grey-2 rounded-borders"]),breakpoint:0},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(b.tabList,(e=>((0,n.uX)(),(0,n.Wv)(W,{key:e,name:e.value,label:e.label,"no-caps":"","content-class":"text-weight-500 "},null,8,["name","label"])))),128))])),_:1},8,["modelValue","class","onUpdate:modelValue"]),(0,n.bF)(T,{ref:"nscroll",onLoad:A.getWalletTransaction,offset:350},{default:(0,n.k6)((()=>[A.hasData||b.loading?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",y,(0,l.v_)(e.$t("No data available")),1)),(0,n.bF)(L,{class:"q-mt-md"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(A.getData,(e=>((0,n.uX)(),(0,n.CE)(n.FK,{key:e},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e,(e=>((0,n.uX)(),(0,n.CE)(n.FK,{key:e.transaction_date},[(0,n.bF)(S,null,{default:(0,n.k6)((()=>[(0,n.bF)(C,null,{default:(0,n.k6)((()=>[(0,n.bF)($,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.transaction_description),1)])),_:2},1024),(0,n.bF)($,{caption:""},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.transaction_date),1)])),_:2},1024)])),_:2},1024),(0,n.bF)(C,{side:""},{default:(0,n.k6)((()=>[(0,n.bF)($,{class:(0,l.C4)(["text-weight-bold",{"text-green":"credit"==e.transaction_type,"text-red":"debit"==e.transaction_type}])},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(e.transaction_amount),1)])),_:2},1032,["class"])])),_:2},1024)])),_:2},1024),(0,n.bF)(q,{spaced:"",inset:""})],64)))),128))],64)))),128))])),_:1})])),loading:(0,n.k6)((()=>[b.page<=1?((0,n.uX)(),(0,n.CE)("div",f,[(0,n.bF)(F,{showing:!0,color:"warning",size:"md","label-class":"dark",class:"transparent"})])):b.page>2?((0,n.uX)(),(0,n.CE)("div",g,[(0,n.bF)(Q,{color:"warning",size:"40px"})])):(0,n.Q3)("",!0)])),_:1},8,["onLoad"])])])),_:1})])])])]),(0,n.bF)(X,{ref:"topup",onAfterPreparepayment:A.afterPreparepayment},null,8,["onAfterPreparepayment"]),(0,n.bF)(B,{ref:"receipt",data:b.receipt_data,onAfterReceiptclose:A.afterReceiptclose},null,8,["data","onAfterReceiptclose"]),(0,n.bF)(D,{ref:"stripe",payment_code:"stripe",title:e.$t("Add Stripe"),label:{submit:e.$t("Add Stripe"),notes:e.$t("Add your card account")},payment_credentials:b.credentials,onAfterAddpayment:e.afterAddpayment,onAfterCancelPayment:e.AfterCancelPayment,onAfterSuccessfulpayment:A.afterSuccessfulpayment,onAfterFailedpayment:e.afterFailedpayment,onClosePayment:A.closePayment},null,8,["title","label","payment_credentials","onAfterAddpayment","onAfterCancelPayment","onAfterSuccessfulpayment","onAfterFailedpayment","onClosePayment"]),(0,n.bF)(E,{ref:"razorpay",payment_code:"razorpay",title:e.$t("Add Razorpay"),label:{submit:e.$t("Submit"),notes:e.$t("Pay using your Razorpay account")},payment_credentials:b.credentials,onAfterAddpayment:e.afterAddpayment,onAfterCancelPayment:e.AfterCancelPayment,onAfterSuccessfulpayment:A.afterSuccessfulpayment,onAfterFailedpayment:e.afterFailedpayment,onClosePayment:A.closePayment},null,8,["title","label","payment_credentials","onAfterAddpayment","onAfterCancelPayment","onAfterSuccessfulpayment","onAfterFailedpayment","onClosePayment"]),(0,n.bF)(z,{ref:"paypal",payment_code:"paypal",title:e.$t("Add Paypal"),label:{submit:e.$t("Add Paypal"),notes:e.$t("Pay using your paypal account"),payment_title:e.$t("Pay using Paypal"),payment_subtitle:e.$t("You will re-direct to paypal account to login to your account.")},payment_credentials:b.credentials,onAfterAddpayment:e.afterAddpayment,onAfterCancelPayment:e.AfterCancelPayment,onAfterSuccessfulpayment:A.afterSuccessfulpayment,onAfterFailedpayment:e.afterFailedpayment,onClosePayment:A.closePayment},null,8,["title","label","payment_credentials","onAfterAddpayment","onAfterCancelPayment","onAfterSuccessfulpayment","onAfterFailedpayment","onClosePayment"]),(0,n.bF)(R,{ref:"mercadopago",payment_code:"mercadopago",title:e.$t("Add Mercadopago"),label:{submit:e.$t("Add Mercadopago"),notes:e.$t("Pay using your mercadopago account")},payment_credentials:b.credentials,onAfterAddpayment:e.afterAddpayment,onAfterCancelPayment:e.AfterCancelPayment,onAfterSuccessfulpayment:A.afterSuccessfulpayment,onAfterFailedpayment:e.afterFailedpayment,onClosePayment:A.closePayment},null,8,["title","label","payment_credentials","onAfterAddpayment","onAfterCancelPayment","onAfterSuccessfulpayment","onAfterFailedpayment","onClosePayment"])])),_:1})}var b=a(2911),A=a(2302);const k={name:"Payments",components:{LocationNav:(0,n.$V)((()=>Promise.all([a.e(4121),a.e(996),a.e(7691)]).then(a.bind(a,5897)))),AccountNav:(0,n.$V)((()=>a.e(996).then(a.bind(a,8275)))),AddressesSkeleton:(0,n.$V)((()=>Promise.all([a.e(4121),a.e(996)]).then(a.bind(a,2171)))),StickyBack:(0,n.$V)((()=>Promise.all([a.e(4121),a.e(996)]).then(a.bind(a,7763)))),WalletBunos:(0,n.$V)((()=>Promise.all([a.e(4121),a.e(303)]).then(a.bind(a,303)))),WalletTopupform:(0,n.$V)((()=>Promise.all([a.e(4121),a.e(4891)]).then(a.bind(a,4891)))),WalletTopupreceipt:(0,n.$V)((()=>a.e(7086).then(a.bind(a,7086)))),StripeComponents:(0,n.$V)((()=>Promise.all([a.e(4121),a.e(996)]).then(a.bind(a,5478)))),RazorpayComponents:(0,n.$V)((()=>Promise.all([a.e(4121),a.e(996)]).then(a.bind(a,7731)))),PaypalComponents:(0,n.$V)((()=>Promise.all([a.e(4121),a.e(996)]).then(a.bind(a,9754)))),MercadopagoComponents:(0,n.$V)((()=>Promise.all([a.e(4121),a.e(996)]).then(a.bind(a,2386))))},data(){return{data:[],credentials:[],loading:!0,tab:"all",tabList:[{value:"all",label:this.$t("All")},{value:"order",label:this.$t("Orders")},{value:"refund",label:this.$t("Refunds")},{value:"topup",label:this.$t("Top-ups")},{value:"cashback",label:this.$t("Cashbacks")},{value:"adjustment",label:this.$t("Adjustment")}],page:0,is_refresh:void 0,balance:0,loading_balance:!0,receipt_data:[]}},setup(e){const t=(0,A.C)();return{SettingsStore:t}},async mounted(){Object.keys(this.SettingsStore.settings_data).length>0?this.getSettings():this.$watch((()=>this.SettingsStore.$state.settings_data),((e,t)=>{this.getSettings()}))},computed:{hasData(){return this.data.length>0},getData(){return this.data},hasData(){return Object.keys(this.data).length>0},isMobile(){return!!this.$q.screen.lt.md}},methods:{async getSettings(){const e=await this.SettingsStore.getAsyncSettings();e.digitalwallet_enabled?(this.getWalletBalance(),this.getPaymentCredentials(),this.resetPagination()):this.$router.push("/home")},getPaymentCredentials(){b.A.fetchDataByTokenPost("getPaymentCredentials").then((e=>{this.credentials=e.details})).catch((e=>{})).then((e=>{}))},getWalletBalance(){this.loading_balance=!0,b.A.fetchDataByTokenPost("getWalletBalance").then((e=>{1==e.code?this.balance=e.details.total:this.balance=0})).catch((e=>{})).then((e=>{this.loading_balance=!1}))},getWalletTransaction(e,t){this.loading=!0,this.page=e;b.A.fetchDataByTokenPost("getWalletTransaction","page="+e+"&transaction_type="+this.tab).then((e=>{1==e.code?this.data.push(e.details.data):this.$refs.nscroll&&this.$refs.nscroll.stop()})).catch((e=>{this.$refs.nscroll&&this.$refs.nscroll.stop()})).then((e=>{this.loading=!1,t(),b.A.empty(this.is_refresh)||this.is_refresh()}))},tabChange(){this.resetPagination()},resetPagination(){this.page=0,this.data=[],this.$refs.nscroll.reset(),this.$refs.nscroll.resume(),this.$refs.nscroll.trigger()},afterPreparepayment(e){try{this.$refs[e.payment_code].Dopayment(e.data,e)}catch(e){b.A.notify("dark",e,"error",this.$q)}},afterSuccessfulpayment(e){this.receipt_data=e,this.$refs.topup.dialog=!1,this.$refs.receipt.dialog=!0},afterReceiptclose(){this.getWalletBalance(),this.resetPagination()},afterCancelPayment(e){b.A.empty(e)||b.A.notify("dark",e,"error",this.$q)},closePayment(){this.$refs.topup.dialog=!1}}};var _=a(2807),P=a(7716),$=a(3316),C=a(124),F=a(5173),v=a(3796),S=a(9035),q=a(6384),w=a(386),W=a(2980),x=a(9761),L=a(8049),Q=a(3999),T=a(9198),V=a(8582),X=a.n(V);const B=(0,_.A)(k,[["render",h]]),D=B;X()(k,"components",{QPage:P.A,QCard:$.A,QItem:C.A,QItemSection:F.A,QItemLabel:v.A,QInnerLoading:S.A,QBtn:q.A,QSeparator:w.A,QTabs:W.A,QTab:x.A,QInfiniteScroll:L.A,QList:Q.A,QSpinnerDots:T.A})}}]);