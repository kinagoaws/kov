"use strict";(globalThis["webpackChunkcom_kinago_single"]=globalThis["webpackChunkcom_kinago_single"]||[]).push([[3614],{1233:(e,a,t)=>{t.r(a),t.d(a,{default:()=>ce});var i=t(1758),s=t(8790);const r={class:"row justify-center q-pa-md"},d={class:"col-md-9 col-12"},l={class:"row"},o={key:0,class:"col-md-4 col-sm-4 col-xs-12"},n={class:"col-md-8 col-sm-8 col-xs-12"},c={class:"text-center"},u={class:"no-margin text-weight-bold q-pb-sm"},_={class:"m-auto relative-position"},h={class:"q-mb-sm"},g={class:"row"},m={class:"col no-padding"},k={key:0,class:"no-margin text-weight-bold"},v={class:"no-margin font11 text-grey"},b={class:"col no-padding text-right"},w={class:"no-margin"},p={class:"q-mt-md"},f={class:"no-margin font12"},y={class:"no-margin font12"},A={class:"row items-center"},F={class:"col-11"},q={class:"no-margin font12 text-weight-thin"},C={key:0},x={class:"col-1"},$={key:0,class:"q-pa-sm flex flex-center text-caption text-grey"},L={class:"text-weight-bold"},Q={key:0,class:"q-mt-md"},S={class:"no-margin"},W={class:"font11 text-grey"},X={key:0,class:"text-center"},V={key:1,class:"text-body2 text-grey"},E={class:"text-h5 text-weight-bold"};function O(e,a,t,O,B,z){const P=(0,i.g2)("StickyBack"),T=(0,i.g2)("LocationNav"),D=(0,i.g2)("AccountNav"),H=(0,i.g2)("OrderSkeleton"),I=(0,i.g2)("q-icon"),K=(0,i.g2)("q-input"),M=(0,i.g2)("q-badge"),R=(0,i.g2)("q-item-section"),j=(0,i.g2)("q-item"),N=(0,i.g2)("q-separator"),U=(0,i.g2)("q-list"),Y=(0,i.g2)("q-menu"),G=(0,i.g2)("q-btn"),J=(0,i.g2)("q-card-section"),Z=(0,i.g2)("q-item-label"),ee=(0,i.g2)("q-rating"),ae=(0,i.g2)("q-card"),te=(0,i.g2)("OrderSummary"),ie=(0,i.g2)("q-dialog"),se=(0,i.g2)("CancelOrder"),re=(0,i.g2)("q-space"),de=(0,i.g2)("WriteReview"),le=(0,i.g2)("q-page"),oe=(0,i.gN)("close-popup");return(0,i.uX)(),(0,i.Wv)(le,{padding:""},{default:(0,i.k6)((()=>[z.isMobile?((0,i.uX)(),(0,i.Wv)(P,{key:0,url:"/account/menu",label:"Back"})):((0,i.uX)(),(0,i.Wv)(T,{key:1})),(0,i.Lk)("div",r,[(0,i.Lk)("div",d,[(0,i.Lk)("div",l,[z.isMobile?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",o,[(0,i.bF)(D)])),(0,i.Lk)("div",n,[B.loading?((0,i.uX)(),(0,i.Wv)(H,{key:0})):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.Lk)("div",c,[(0,i.Lk)("h4",u,(0,s.v_)(e.$t("We like each other")),1),(0,i.Lk)("p",null,(0,s.v_)(e.$t("Let's not change this"))+"!",1)]),(0,i.Lk)("div",_,[(0,i.Lk)("div",h,[(0,i.bF)(K,{class:"text-search",outlined:"",rounded:"",modelValue:B.q,"onUpdate:modelValue":a[0]||(a[0]=e=>B.q=e),label:e.$t("Search order"),"bg-color":"white","label-color":"grey",loading:B.awaitingSearch,clearable:"",dense:""},{prepend:(0,i.k6)((()=>[(0,i.bF)(I,{name:"ion-search"})])),_:1},8,["modelValue","label","loading"])]),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(B.data,(t=>((0,i.uX)(),(0,i.CE)(i.FK,{key:t},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t,(t=>((0,i.uX)(),(0,i.Wv)(ae,{key:t.order_id_raw,flat:"",class:"q-mb-md"},{default:(0,i.k6)((()=>[(0,i.bF)(J,null,{default:(0,i.k6)((()=>[(0,i.Lk)("div",g,[(0,i.Lk)("div",m,[B.services[t.service_code]?((0,i.uX)(),(0,i.CE)("h6",k,(0,s.v_)(B.services[t.service_code].service_name),1)):(0,i.Q3)("",!0),(0,i.Lk)("p",v,(0,s.v_)(t.date_created),1)]),(0,i.Lk)("div",b,[(0,i.Lk)("p",w,(0,s.v_)(t.total),1)])]),(0,i.Lk)("div",p,[(0,i.Lk)("p",f,[(0,i.eW)((0,s.v_)(t.order_id)+" ",1),(0,i.bF)(M,{label:B.status[t.status].status,class:"q-ml-sm",style:(0,s.Tr)(`background-color:${B.status[t.status].background_color_hex};color:${B.status[t.status].font_color_hex};`)},null,8,["label","style"])]),(0,i.Lk)("p",y,[(0,i.bF)(M,{color:"warning"},{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(t.total_items),1)])),_:2},1024)]),(0,i.Lk)("div",A,[(0,i.Lk)("div",F,[(0,i.Lk)("p",q,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.items,(e=>((0,i.uX)(),(0,i.CE)("span",{key:e.item_id,class:"q-mr-sm"},[(0,i.eW)((0,s.v_)(B.items[e.item_id])+" ",1),B.size[e.item_size_id]?((0,i.uX)(),(0,i.CE)("span",C,"("+(0,s.v_)(B.size[e.item_size_id])+")",1)):(0,i.Q3)("",!0),a[4]||(a[4]=(0,i.eW)(" , "))])))),128))])]),(0,i.Lk)("div",x,[(0,i.bF)(G,{color:"grey-5",round:"",loading:t.is_loading,dense:"",unelevated:"",padding:"2px",icon:"more_horiz"},{default:(0,i.k6)((()=>[(0,i.bF)(Y,{"transition-show":"scale","transition-hide":"scale",offset:[120,5],"auto-close":""},{default:(0,i.k6)((()=>[(0,i.bF)(U,{style:{"min-width":"180px"}},{default:(0,i.k6)((()=>[(0,i.bF)(j,{clickable:"",onClick:e=>z.orderDetails(t.order_uuid)},{default:(0,i.k6)((()=>[(0,i.bF)(R,null,{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(e.$t("View order")),1)])),_:1})])),_:2},1032,["onClick"]),(0,i.bF)(j,{clickable:"",onClick:e=>z.orderBuyagain(t)},{default:(0,i.k6)((()=>[(0,i.bF)(R,null,{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(e.$t("Buy again")),1)])),_:1})])),_:2},1032,["onClick"]),(0,i.bF)(j,{clickable:"",to:{path:"/account/trackorder",query:{order_uuid:t.order_uuid}},disable:!!B.status_allowed_review.includes(t.status)},{default:(0,i.k6)((()=>[(0,i.bF)(R,null,{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(e.$t("Track")),1)])),_:1})])),_:2},1032,["to","disable"]),(0,i.bF)(j,{clickable:"",href:B.api_base_url+"/print/pdfdownload/?order_uuid="+t.order_uuid,target:"_blank"},{default:(0,i.k6)((()=>[(0,i.bF)(R,null,{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(e.$t("Download PDF")),1)])),_:1})])),_:2},1032,["href"]),(0,i.bF)(N),(0,i.bF)(j,{clickable:B.status_allowed_cancelled.includes(t.status),disable:!B.status_allowed_cancelled.includes(t.status),onClick:e=>this.$refs.cancel_order.showModal(t.order_uuid)},{default:(0,i.k6)((()=>[(0,i.bF)(R,null,{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(e.$t("Cancel order")),1)])),_:1})])),_:2},1032,["clickable","disable","onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["loading"])])])])])),_:2},1024),B.status_allowed_review.includes(t.status)?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.bF)(N),B.reviews[t.order_id_raw]?((0,i.uX)(),(0,i.CE)("div",$,[(0,i.eW)((0,s.v_)(e.$t("You have rated this"))+" ",1),(0,i.bF)(I,{name:"star",size:"2em",color:"yellow-9"}),(0,i.Lk)("span",L,(0,s.v_)(B.reviews[t.order_id_raw]),1)])):((0,i.uX)(),(0,i.Wv)(j,{key:1},{default:(0,i.k6)((()=>[(0,i.bF)(R,{avatar:""},{default:(0,i.k6)((()=>[(0,i.bF)(Z,{caption:""},{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(e.$t("Tap to rate")),1)])),_:1})])),_:1}),(0,i.bF)(R,null,{default:(0,i.k6)((()=>[(0,i.bF)(ee,{"model-value":B.rate_value[t.order_uuid],size:"2em",max:5,color:"grey-5","color-selected":"warning",class:"q-mb-xs","onUpdate:modelValue":e=>z.setRateValue(e,t.order_uuid)},null,8,["model-value","onUpdate:modelValue"])])),_:2},1024),(0,i.bF)(R,{side:""})])),_:2},1024))],64)):(0,i.Q3)("",!0)])),_:2},1024)))),128))],64)))),128)),B.search_error?((0,i.uX)(),(0,i.CE)("div",Q,[(0,i.Lk)("h6",S,(0,s.v_)(e.$t("No results")),1),(0,i.Lk)("p",W,(0,s.v_)(e.$t("Sorry, no order matched your search. Please try again"))+". ",1)])):(0,i.Q3)("",!0),B.loading?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[""==B.q?((0,i.uX)(),(0,i.CE)("div",X,[B.show_next_page?((0,i.uX)(),(0,i.Wv)(G,{key:0,unelevated:"",rounded:"",color:"warning","text-color":"black","no-caps":"",loading:B.load_more,onClick:a[1]||(a[1]=e=>z.loadMoreOrders(B.page)),style:{"letter-spacing":"2px"}},{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(e.$t("Load more")),1)])),_:1},8,["loading"])):((0,i.uX)(),(0,i.CE)("p",V,(0,s.v_)(e.$t("end of results")),1))])):(0,i.Q3)("",!0)],64))])],64))])])])]),(0,i.bF)(ie,{modelValue:B.drawer,"onUpdate:modelValue":a[2]||(a[2]=e=>B.drawer=e),persistent:"",onBeforeShow:z.onShoworderdetails,position:this.$q.screen.lt.md?"bottom":"standard"},{default:(0,i.k6)((()=>[(0,i.bF)(ae,{class:(0,s.C4)({"card-medium-width1":!this.$q.screen.lt.md})},{default:(0,i.k6)((()=>[(0,i.bF)(te,{ref:"order_details",loading:B.loading_order,order_data:B.order_data,onOrderBuyagain:z.orderBuyagain},null,8,["loading","order_data","onOrderBuyagain"])])),_:1},8,["class"])])),_:1},8,["modelValue","onBeforeShow","position"]),(0,i.bF)(se,{ref:"cancel_order",onAfterCancelorder:z.afterCancelorder},null,8,["onAfterCancelorder"]),(0,i.bF)(ie,{modelValue:B.modal_review,"onUpdate:modelValue":a[3]||(a[3]=e=>B.modal_review=e),persistent:""},{default:(0,i.k6)((()=>[(0,i.bF)(ae,{class:(0,s.C4)({"card-medium-width1":!this.$q.screen.lt.md})},{default:(0,i.k6)((()=>[(0,i.bF)(J,{class:"row items-center q-pb-none"},{default:(0,i.k6)((()=>[(0,i.Lk)("div",E,(0,s.v_)(e.$t("Write A Review")),1),(0,i.bF)(re),(0,i.bo)((0,i.bF)(G,{icon:"close",flat:"",round:"",dense:""},null,512),[[oe]])])),_:1}),(0,i.bF)(de,{ref:"review",order_uuid:B.order_uuid,initital_rate:B.initital_rate,onAfterAddreview:z.afterAddreview},null,8,["order_uuid","initital_rate","onAfterAddreview"])])),_:1},8,["class"])])),_:1},8,["modelValue"])])),_:1})}t(7781),t(9526);var B=t(2911),z=(t(9818),t(3414));const P={name:"Orders",components:{LocationNav:(0,i.$V)((()=>Promise.all([t.e(4121),t.e(996),t.e(72)]).then(t.bind(t,5897)))),OrderSummary:(0,i.$V)((()=>Promise.all([t.e(4121),t.e(6011)]).then(t.bind(t,6011)))),CancelOrder:(0,i.$V)((()=>t.e(3739).then(t.bind(t,3739)))),WriteReview:(0,i.$V)((()=>Promise.all([t.e(4121),t.e(996)]).then(t.bind(t,3185)))),OrderSkeleton:(0,i.$V)((()=>Promise.all([t.e(4121),t.e(7522)]).then(t.bind(t,7522)))),StickyBack:(0,i.$V)((()=>Promise.all([t.e(4121),t.e(996)]).then(t.bind(t,7763)))),AccountNav:(0,i.$V)((()=>t.e(996).then(t.bind(t,8275))))},data(){return{loading:!1,show_next_page:!1,load_more:!1,drawer:!1,q:"",page:0,data:[],items:[],size:[],status:[],services:[],status_allowed_cancelled:[],status_allowed_review:[],buyagain_loading:!1,modal_review:!1,order_uuid:"",star_rating:"",reviews:[],awaitingSearch:!1,search_error:"",search_found:!1,loading_order:!1,order_data:[],api_base_url:z.A.api_base_url,rate_value:[],initital_rate:0}},computed:{hasData(){return this.data.length>0},isMobile(){return!!this.$q.screen.lt.md}},unmounted(){},mounted(){this.orderHistory(0)},watch:{q(e,a){if(!this.awaitingSearch){if(B.A.empty(this.q))return this.search_error="",this.search_found=!1,this.orderHistory(0),!1;setTimeout((()=>{B.A.orderHistory(0,this.q).then((e=>{this.search_found=!0,this.search_error="",this.data=[],this.data.push(e.details.data.data),this.items=this.addObjectToArray(this.items,e.details.data.items),this.size=e.details.data.size,this.services=e.details.data.services,this.status=e.details.data.status,this.show_next_page=e.details.show_next_page,this.page=e.details.page,this.reviews=e.details.data.reviews})).catch((e=>{this.data=[],this.search_error=e,this.search_found=!1})).then((e=>{this.loading=!1,this.load_more=!1,this.awaitingSearch=!1}))}),1e3),this.awaitingSearch=!0}}},methods:{orderHistory(e){this.load_more||(this.loading=!0),B.A.orderHistory(e,"").then((e=>{this.data.push(e.details.data.data),this.items=this.addObjectToArray(this.items,e.details.data.items),this.size=e.details.data.size,this.services=e.details.data.services,this.status=e.details.data.status,this.show_next_page=e.details.show_next_page,this.page=e.details.page,this.reviews=e.details.data.reviews,this.status_allowed_review=e.details.data.status_allowed_review,this.status_allowed_cancelled=e.details.data.status_allowed_cancelled})).catch((e=>{})).then((e=>{this.loading=!1,this.load_more=!1}))},addObjectToArray(e,a){const t={};return Object.entries(e).forEach((([e,a])=>{t[e]=a})),Object.entries(a).forEach((([e,a])=>{t[e]=a})),t},loadMoreOrders(e){this.load_more=!0,this.orderHistory(e)},orderDetails(e){this.drawer=!0,this.order_uuid=e},onShoworderdetails(){this.loading_order=!0,B.A.orderDetails(this.order_uuid).then((e=>{this.order_data=e.details})).catch((e=>{this.drawer=!1,B.A.notify("negative",e,"error_outline",this.$q)})).then((e=>{this.loading_order=!1}))},orderBuyagain(e){e.is_loading=!0;const a={cart_uuid:B.A.getStorage("cart_uuid"),order_uuid:e.order_uuid};this.buyagain_loading=!0,B.A.orderBuyAgain(a).then((e=>{B.A.setStorage("cart_uuid",e.details.cart_uuid),this.$router.push({name:"menu",params:{addcart:!0}})})).catch((e=>{B.A.notify("negative",e,"error_outline",this.$q)})).then((a=>{this.buyagain_loading=!1,e.is_loading=!1}))},afterCancelorder(){this.page=0,this.data=[],this.orderHistory(this.page)},showReview(e){this.order_uuid=e,this.modal_review=!0},afterAddreview(){this.order_uuid="",this.modal_review=!1,this.page=0,this.data=[],this.orderHistory(this.page)},setRateValue(e,a){this.order_uuid=a,this.initital_rate=e,this.modal_review=!0}}};var T=t(2807),D=t(7716),H=t(9270),I=t(492),K=t(3316),M=t(4189),R=t(3954),j=t(6384),N=t(9519),U=t(3999),Y=t(124),G=t(5173),J=t(386),Z=t(3796),ee=t(1816),ae=t(4703),te=t(6056),ie=t(8958),se=t(2156),re=t(3676),de=t(8672),le=t(8582),oe=t.n(le);const ne=(0,T.A)(P,[["render",O]]),ce=ne;oe()(P,"components",{QPage:D.A,QInput:H.A,QIcon:I.A,QCard:K.A,QCardSection:M.A,QBadge:R.A,QBtn:j.A,QMenu:N.A,QList:U.A,QItem:Y.A,QItemSection:G.A,QSeparator:J.A,QItemLabel:Z.A,QRating:ee.A,QPageScroller:ae.A,QDrawer:te.A,QScrollArea:ie.A,QDialog:se.A,QSpace:re.A}),oe()(P,"directives",{ClosePopup:de.A})}}]);