"use strict";(globalThis["webpackChunkcom_kinago_single"]=globalThis["webpackChunkcom_kinago_single"]||[]).push([[8643],{1024:(e,l,a)=>{a.r(l),a.d(l,{default:()=>N});var o=a(1758),t=a(8790);const i={class:"row justify-center q-pa-md"},r={class:"col-md-9 col-12"},n={class:"row"},s={key:0,class:"col-md-4 col-sm-4 col-xs-12"},d={class:"col-md-8 col-sm-8 col-xs-12"},u={class:"text-weight-bold"},c={class:"no-margin font12 text-weight-thin"},m={class:"text-caption q-mb-md"},g={class:"bg-white text-dark q-pl-sm q-pr-sm border-grey row items-center"},p={class:"col-2"},b={class:"col"},h={class:"flex justify-start q-col-gutter-x-md"},f=["src"],k={class:"absolute-right",style:{"margin-right":"-10px","margin-top":"-5px"}},_={key:1,class:"bg-myyellow q-pa-sm radius8"};function y(e,l,a,y,v,F){const q=(0,o.g2)("StickyBack"),$=(0,o.g2)("LocationNav"),A=(0,o.g2)("AccountNav"),x=(0,o.g2)("q-inner-loading"),w=(0,o.g2)("q-btn"),L=(0,o.g2)("q-item-section"),Q=(0,o.g2)("q-item"),U=(0,o.g2)("q-separator"),C=(0,o.g2)("q-item-label"),j=(0,o.g2)("q-list"),V=(0,o.g2)("q-input"),X=(0,o.g2)("q-space"),B=(0,o.g2)("q-icon"),D=(0,o.g2)("q-uploader-add-trigger"),S=(0,o.g2)("q-uploader"),W=(0,o.g2)("q-form"),E=(0,o.g2)("q-card"),I=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(I,{padding:""},{default:(0,o.k6)((()=>[this.$q.screen.lt.md?((0,o.uX)(),(0,o.Wv)(q,{key:0,url:"/account/menu",label:"Back"})):((0,o.uX)(),(0,o.Wv)($,{key:1})),(0,o.Lk)("div",i,[(0,o.Lk)("div",r,[(0,o.Lk)("div",n,[this.$q.screen.lt.md?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",s,[(0,o.bF)(A)])),(0,o.Lk)("div",d,[(0,o.bF)(E,{flat:"",class:"fit"},{default:(0,o.k6)((()=>[(0,o.bF)(x,{showing:v.upload_loading,color:"warning"},null,8,["showing"]),(0,o.bF)(Q,null,{default:(0,o.k6)((()=>[this.$q.screen.lt.md?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(L,{key:0,avatar:""},{default:(0,o.k6)((()=>[e.isMobile?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(w,{key:0,dense:"",flat:"",color:"dark",icon:"arrow_back_ios",to:"/account/orders","no-caps":"",label:e.$t("Back"),class:"no-margin"},null,8,["label"]))])),_:1})),(0,o.bF)(L,null,{default:(0,o.k6)((()=>[(0,o.Lk)("h5",u,(0,t.v_)(e.$t("Upload Proof of Payment")),1),(0,o.Lk)("p",c,(0,t.v_)(e.$t("Please enter the details of your bank deposit payment below.")),1)])),_:1})])),_:1}),(0,o.bF)(U),(0,o.bF)(W,{onSubmit:F.onSubmit,class:"q-pa-md"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",m,(0,t.v_)(e.$t("Failure to provide accurate information may cause delays in processing or invalidation of your payment")),1),v.loading_get?((0,o.uX)(),(0,o.Wv)(x,{key:0,showing:!0,color:"warning"})):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[F.hasData?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.bF)(j,null,{default:(0,o.k6)((()=>[(0,o.bF)(Q,null,{default:(0,o.k6)((()=>[(0,o.bF)(L,null,{default:(0,o.k6)((()=>[(0,o.bF)(C,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,t.v_)(e.$t("Order#"))+": ",1)])),_:1})])),_:1}),(0,o.bF)(L,{side:""},{default:(0,o.k6)((()=>[(0,o.bF)(C,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,t.v_)(v.order_info.order_id),1)])),_:1})])),_:1})])),_:1}),(0,o.bF)(Q,null,{default:(0,o.k6)((()=>[(0,o.bF)(L,null,{default:(0,o.k6)((()=>[(0,o.bF)(C,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,t.v_)(e.$t("Amount"))+": ",1)])),_:1})])),_:1}),(0,o.bF)(L,{side:""},{default:(0,o.k6)((()=>[(0,o.bF)(C,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,t.v_)(v.order_info.total),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.bF)(V,{modelValue:v.account_name,"onUpdate:modelValue":l[0]||(l[0]=e=>v.account_name=e),label:e.$t("Account name"),outlined:"","lazy-rules":"","bg-color":e.$q.dark.mode?"grey600":"input","label-color":e.$q.dark.mode?"grey300":"grey",borderless:"",class:"input-borderless",rules:[e=>e&&e.length>0||this.$t("This field is required")]},null,8,["modelValue","label","bg-color","label-color","rules"]),(0,o.bF)(V,{modelValue:v.amount,"onUpdate:modelValue":l[1]||(l[1]=e=>v.amount=e),label:e.$t("Amount"),outlined:"","lazy-rules":"","bg-color":e.$q.dark.mode?"grey600":"input","label-color":e.$q.dark.mode?"grey300":"grey",borderless:"",class:"input-borderless",rules:[e=>e>0||"Amount must be greater than zero"]},null,8,["modelValue","label","bg-color","label-color","rules"]),(0,o.bF)(V,{modelValue:v.reference_number,"onUpdate:modelValue":l[2]||(l[2]=e=>v.reference_number=e),label:e.$t("Reference Number"),outlined:"","bg-color":e.$q.dark.mode?"grey600":"input","label-color":e.$q.dark.mode?"grey300":"grey",borderless:"",class:"input-borderless"},null,8,["modelValue","label","bg-color","label-color"]),(0,o.bF)(X,{class:"q-pa-sm"}),(0,o.Lk)("div",g,[(0,o.Lk)("div",p,[(0,o.bF)(w,{unelevated:"",round:"",color:e.$q.dark.mode?"grey600":"mygrey","text-color":e.$q.dark.mode?"grey300":"grey",onClick:F.pickFiles,dense:""},{default:(0,o.k6)((()=>[(0,o.bF)(B,{name:"attach_file",class:"rotate-45"})])),_:1},8,["color","text-color","onClick"])]),(0,o.Lk)("div",b,[(0,o.bF)(S,{url:v.upload_api_url,multiple:"","max-files":"1",ref:"uploader",flat:"",accept:".jpg, image/*","max-total-size":"10485760","field-name":"file",onAdded:F.afterAddedFiles,onRemoved:F.afterRemoveFiles,onRejected:F.onRejectedFiles,onUploading:F.onUploadingFiles,onUploaded:F.afterUploaded,onFinish:F.afterFinishUpload,class:"full-width"},{header:(0,o.k6)((()=>[(0,o.bF)(D)])),list:(0,o.k6)((e=>[(0,o.Lk)("div",h,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.files,(l=>((0,o.uX)(),(0,o.CE)("div",{key:l.__key,class:"relative-position"},[(0,o.Lk)("img",{src:l.__img.src,style:{"max-width":"60px",height:"60px"},class:"radius10"},null,8,f),(0,o.Lk)("div",k,[(0,o.bF)(w,{unelevated:"",round:"",color:"blue",icon:"close",size:"xs",onClick:a=>e.removeFile(l)},null,8,["onClick"])])])))),128))])])),_:1},8,["url","onAdded","onRemoved","onRejected","onUploading","onUploaded","onFinish"])])]),(0,o.bF)(X,{class:"q-pa-sm"}),(0,o.bF)(w,{type:"submit",unelevated:"",rounded:"",color:"warning","text-color":"black","no-caps":"",class:"full-width",label:e.$t("Submit"),size:"17px",loading:v.loading,dense:e.$q.screen.lt.sm},null,8,["label","loading","dense"])],64)):((0,o.uX)(),(0,o.CE)("div",_,(0,t.v_)(e.$t("No data available")),1))],64))])),_:1},8,["onSubmit"])])),_:1})])])])])])),_:1})}a(7781),a(9526);var v=a(2911),F=a(3414);const q={name:"ChangePassword",components:{LocationNav:(0,o.$V)((()=>Promise.all([a.e(4121),a.e(996),a.e(7691)]).then(a.bind(a,5897)))),AccountNav:(0,o.$V)((()=>a.e(996).then(a.bind(a,8275)))),StickyBack:(0,o.$V)((()=>Promise.all([a.e(4121),a.e(996)]).then(a.bind(a,7763))))},data(){return{loading:!1,order_uuid:"",account_name:"",amount:0,reference_number:"",upload_api_url:F.A.api_base_url+"/partnerapi/uploadimage",files:{},file_name:"",upload_loading:!1,loading_get:!1,data:[],order_info:[]}},mounted(){this.order_uuid=this.$route.query.order_uuid,this.getBankDeposit()},computed:{hasData(){return Object.keys(this.order_info).length>0}},methods:{getBankDeposit(){this.loading_get=!0,v.A.fetchDataByTokenPost("getBankDeposit","order_uuid="+this.order_uuid).then((e=>{this.data=e.details.data,this.order_info=e.details.order_info,Object.keys(this.data).length>0&&(this.account_name=this.data.account_name,this.amount=this.data.amount,this.reference_number=this.data.reference_number)})).catch((e=>{v.A.notify("dark",e,"error",this.$q)})).then((e=>{this.loading_get=!1}))},onSubmit(){Object.keys(this.files).length>0?this.$refs.uploader.upload():this.uploadDeposit()},pickFiles(){this.$refs.uploader.pickFiles()},onRejectedFiles(e){console.log(e),v.A.notify("dark",this.$t("Invalid file type"),"error",this.$q)},afterAddedFiles(e){Object.entries(e).forEach((([e,l])=>{this.files[l.name]={name:l.name}}))},afterRemoveFiles(e){Object.entries(e).forEach((([e,l])=>{delete this.files[l.name]}))},onUploadingFiles(e){this.upload_loading=!0},afterUploaded(e){if(console.log(e),200==e.xhr.status){let l=JSON.parse(e.xhr.response),a=l.code||!1,o=l.details||[],t=l.msg||"";1==a?(this.file_name=o.file_name,this.uploadDeposit()):(v.A.notify("dark",t,"error",this.$q),this.$refs.uploader.reset())}else v.A.notify("dark",this.$t("IError uploading files"),"error",this.$q),this.$refs.uploader.reset()},afterFinishUpload(){this.upload_loading=!1},uploadDeposit(){this.loading=!0;let e="order_uuid="+this.order_uuid;e+="&account_name="+this.account_name,e+="&amount="+this.amount,e+="&reference_number="+this.reference_number,e+="&file_name="+this.file_name,v.A.fetchDataByTokenPost("uploadBankDeposit",e).then((e=>{v.A.notify("positive",e.msg,"check_circle",this.$q),setTimeout((()=>{this.$router.push("/account/orders")}),200)})).catch((e=>{v.A.notify("negative",e,"error_outline",this.$q)})).then((e=>{this.loading=!1}))}}};var $=a(2807),A=a(7716),x=a(3316),w=a(9035),L=a(124),Q=a(5173),U=a(6384),C=a(386),j=a(9200),V=a(3999),X=a(3796),B=a(9270),D=a(3676),S=a(492),W=a(2415),E=a(9101),I=a(8582),P=a.n(I);const R=(0,$.A)(q,[["render",y]]),N=R;P()(q,"components",{QPage:A.A,QCard:x.A,QInnerLoading:w.A,QItem:L.A,QItemSection:Q.A,QBtn:U.A,QSeparator:C.A,QForm:j.A,QList:V.A,QItemLabel:X.A,QInput:B.A,QSpace:D.A,QIcon:S.A,QUploader:W.A,QUploaderAddTrigger:E.A})}}]);