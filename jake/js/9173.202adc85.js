"use strict";(globalThis["webpackChunkcom_kinago_single"]=globalThis["webpackChunkcom_kinago_single"]||[]).push([[9173],{9173:(t,e,s)=>{s.r(e),s.d(e,{default:()=>L});var n=s(1758),i=s(8790);const o={class:"row justify-center q-pa-md"},a={class:"col-md-9 col-12"},l={class:"text-center"},r={class:"no-margin text-weight-bold q-pb-sm"},u={class:"text-left q-mt-md q-mb-md"},d={class:"text-weight-bold no-margin font11"},c={key:1,class:"font11 q-ma-none no-margin"};function g(t,e,s,g,h,m){const _=(0,n.g2)("q-input"),b=(0,n.g2)("q-btn"),p=(0,n.g2)("q-form"),k=(0,n.g2)("q-inner-loading"),v=(0,n.g2)("q-card-section"),f=(0,n.g2)("q-card"),q=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(q,{padding:""},{default:(0,n.k6)((()=>[(0,n.Lk)("div",o,[(0,n.Lk)("div",a,[(0,n.Lk)("div",l,[(0,n.Lk)("h4",r,(0,i.v_)(t.$t("Your almost there")),1),(0,n.Lk)("p",null,(0,i.v_)(t.$t("we need to confirm your not a robot"))+" :)",1)]),(0,n.bF)(f,{flat:"",class:"w-50 margin-auto"},{default:(0,n.k6)((()=>[(0,n.bF)(v,{class:"relative-position"},{default:(0,n.k6)((()=>[(0,n.bF)(p,{onSubmit:m.onSubmit},{default:(0,n.k6)((()=>[(0,n.bF)(_,{"bg-color":"mygrey",color:"warning",outlined:"",modelValue:h.code,"onUpdate:modelValue":e[0]||(e[0]=t=>h.code=t),label:t.$t("Code"),maxlength:"6","lazy-rules":"",rules:[t=>t&&t.length>0||"Code is required"]},null,8,["modelValue","label","rules"]),(0,n.Lk)("div",u,[(0,n.Lk)("p",d,(0,i.v_)(h.sent_message2),1),0===h.counter?((0,n.uX)(),(0,n.Wv)(b,{key:0,onClick:m.resendCode,flat:"",dense:"",color:"dark","no-caps":"",class:"font11 q-ma-none"},{default:(0,n.k6)((()=>[(0,n.Lk)("u",null,(0,i.v_)(t.$t("Resend Code")),1)])),_:1},8,["onClick"])):((0,n.uX)(),(0,n.CE)("p",c,[(0,n.Lk)("u",null,(0,i.v_)(t.$t("Resend Code in {counter}",{counter:h.counter})),1)]))]),(0,n.bF)(b,{type:"submit",unelevated:"",rounded:"",color:"warning","text-color":"black","no-caps":"",class:"full-width q-mb-md",label:t.$t("Next"),size:"17px",disabled:m.hasCode,loading:h.loading},null,8,["label","disabled","loading"])])),_:1},8,["onSubmit"]),(0,n.bF)(k,{showing:h.visible,label:t.$t("Please wait..."),"label-class":"text-warning","label-style":"font-size: 1.1em",color:"warning"},null,8,["showing","label"])])),_:1})])),_:1})])])])),_:1})}var h=s(2911),m=s(9818);const _={name:"AccountVerify",data(){return{loading:!1,visible:!1,code:"",counter:20,timer:void 0,sent_message2:"",settings:[],data:[],settings_resent_counter:0}},mounted(){this.startTimer(),this.getAccountStatus()},computed:{hasCode(){return!!h.A.empty(this.code)}},watch:{counter(t,e){t<=0&&this.stopTimer()},show_modal(t,e){t&&this.startTimer()},sent_message(t,e){this.sent_message2=t}},methods:{getAccountStatus(){this.loading=!0,h.A.getAccountStatus(this.$route.query.uuid).then((t=>{this.sent_message2=t.msg,this.data=t.details.data,this.settings=t.details.settings,this.counter=t.details.settings.signup_resend_counter,this.settings_resent_counter=this.counter})).catch((t=>{h.A.notify("negative",t,"error_outline",this.$q),this.$router.push("/login")})).then((t=>{this.loading=!1}))},onSubmit(){let t=!0;"1"===this.settings.enabled_verification&&"google"===this.data.social_strategy&&(t=!1),"1"===this.settings.enabled_verification&&"facebook"===this.data.social_strategy&&(t=!1);const e={auto_login:t,client_uuid:this.$route.query.uuid,verification_code:this.code,local_id:h.A.getStorage("local_id")};this.loading=!0,h.A.verifyCodeSignup(e).then((e=>{t?(m.A.setUser(e.details.user_data),m.A.setToken(e.details.user_token),this.$router.push("/menu")):this.$router.push({path:"/account/complete-registration",query:{uuid:this.$route.query.uuid}})})).catch((t=>{h.A.notify("negative",t,"error_outline",this.$q)})).then((t=>{this.loading=!1}))},stopTimer(){clearInterval(this.timer)},startTimer(){this.stopTimer(),this.counter=this.settings_resent_counter>0?this.settings_resent_counter:20,this.timer=setInterval((()=>{this.counter--}),1e3)},resendCode(){this.loading=!0,h.A.requestCode(this.$route.query.uuid).then((t=>{this.sent_message2=t.msg,this.startTimer()})).catch((t=>{h.A.notify("negative",t,"error_outline",this.$q)})).then((t=>{this.loading=!1}))}}};var b=s(2807),p=s(7716),k=s(3316),v=s(4189),f=s(9200),q=s(9270),y=s(6384),A=s(9035),w=s(8582),C=s.n(w);const $=(0,b.A)(_,[["render",g]]),L=$;C()(_,"components",{QPage:p.A,QCard:k.A,QCardSection:v.A,QForm:f.A,QInput:q.A,QBtn:y.A,QInnerLoading:A.A})}}]);