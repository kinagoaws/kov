"use strict";(globalThis["webpackChunkcom_kinago_single"]=globalThis["webpackChunkcom_kinago_single"]||[]).push([[8666],{8666:(e,s,t)=>{t.r(s),t.d(s,{default:()=>C});var o=t(1758),l=t(8790);const a={class:"row justify-center q-pa-md"},n={class:"col-md-9 col-12"},i={class:"text-center q-mb-md"},r={class:"no-margin text-weight-bold q-pb-sm"},u={class:"text-weight-thin"},d={class:"q-mb-lg"},c={class:"text-center"},m={key:1,class:"font11 q-ma-none"},g={class:"q-mt-lg"};function h(e,s,t,h,p,b){const k=(0,o.g2)("LocationNav"),w=(0,o.g2)("q-input"),f=(0,o.g2)("q-btn"),_=(0,o.g2)("q-form"),q=(0,o.g2)("q-card-section"),v=(0,o.g2)("q-card"),$=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)($,{padding:""},{default:(0,o.k6)((()=>[(0,o.bF)(k),(0,o.Lk)("div",a,[(0,o.Lk)("div",n,[(0,o.bF)(v,{flat:"",class:"w-75",style:{margin:"auto"}},{default:(0,o.k6)((()=>[(0,o.bF)(q,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",i,[(0,o.Lk)("h4",r,(0,l.v_)(e.$t("Password Reset")),1),(0,o.Lk)("p",u,(0,l.v_)(p.message),1)]),(0,o.bF)(_,{onSubmit:b.onSubmit},{default:(0,o.k6)((()=>[(0,o.bF)(w,{"bg-color":"mygrey",color:"warning",outlined:"",modelValue:p.otp,"onUpdate:modelValue":s[0]||(s[0]=e=>p.otp=e),label:e.$t("OTP"),mask:"######","lazy-rules":"",rules:[s=>s&&s.length>0||e.$t("This field is required")]},null,8,["modelValue","label","rules"]),(0,o.bF)(w,{"bg-color":"mygrey",color:"warning",outlined:"",modelValue:p.newpassword,"onUpdate:modelValue":s[1]||(s[1]=e=>p.newpassword=e),label:e.$t("New Password"),"lazy-rules":"",rules:[s=>s&&s.length>0||e.$t("This field is required")]},null,8,["modelValue","label","rules"]),(0,o.bF)(w,{"bg-color":"mygrey",color:"warning",outlined:"",modelValue:p.confirmpassword,"onUpdate:modelValue":s[2]||(s[2]=e=>p.confirmpassword=e),label:e.$t("Confirm Password"),"lazy-rules":"",rules:[s=>s&&s.length>0||e.$t("This field is required")]},null,8,["modelValue","label","rules"]),(0,o.Lk)("div",d,[(0,o.bF)(f,{type:"submit",unelevated:"",rounded:"",color:"warning","text-color":"black","no-caps":"",class:"full-width",label:e.$t("Reset Password"),size:"lg",dense:e.$q.screen.lt.sm,loading:p.loading},null,8,["label","dense","loading"])])])),_:1},8,["onSubmit"]),(0,o.Lk)("div",c,[0===p.counter?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.bF)(f,{onClick:b.resendEmail,flat:"",dense:"",color:"myblue","no-caps":"",class:"font13 q-ma-none q-mr-md"},{default:(0,o.k6)((()=>[(0,o.Lk)("u",null,(0,l.v_)(e.$t("Resend reset email")),1)])),_:1},8,["onClick"]),(0,o.bF)(f,{to:"/forgotpassword",flat:"",dense:"",color:"warning","no-caps":"",class:"font13 q-ma-none"},{default:(0,o.k6)((()=>[(0,o.Lk)("u",null,(0,l.v_)(e.$t("Enter email again")),1)])),_:1})],64)):((0,o.uX)(),(0,o.CE)("p",m,[(0,o.Lk)("u",null,(0,l.v_)(e.$t("Resend Code in {counter}",{counter:p.counter})),1)]))]),(0,o.Lk)("div",g,[(0,o.bF)(f,{flat:"",ripple:!1,"text-color":"negative","no-caps":"",class:"full-width no-hover",dense:e.$q.screen.lt.sm,to:"/login"},{default:(0,o.k6)((()=>[(0,o.Lk)("u",null,(0,l.v_)(e.$t("Back to login")),1)])),_:1},8,["dense"])])])),_:1})])),_:1})])])])),_:1})}var p=t(2911),b=t(9818);const k={name:"ResetPassword",components:{LocationNav:(0,o.$V)((()=>Promise.all([t.e(4121),t.e(996),t.e(7691)]).then(t.bind(t,5897))))},data(){return{loading:!1,email_address:"bastikikang@gmail.com",request_success:!1,customer_uuid:[],message:"",steps:1,maxCounter:20,counter:this.maxCounter,timer:void 0,newpassword:"",confirmpassword:"",otp:""}},created(){this.request_success=!0,this.message=this.$route.query.msg,this.customer_uuid=this.$route.query.uuid,this.startTimer()},watch:{counter(e,s){e<=0&&this.stopTimer()}},beforeUnmount(){this.stopTimer()},methods:{stopTimer(){clearInterval(this.timer)},startTimer(){this.stopTimer(),this.counter=this.maxCounter,this.timer=setInterval((()=>{this.counter--}),1e3)},onSubmit(){this.loading=!0,p.A.fetchDataPost("ResetPassword","newpassword="+this.newpassword+"&confirmpassword="+this.confirmpassword+"&uuid="+this.customer_uuid+"&otp="+this.otp).then((e=>{p.A.notify("positive",e.msg,"check_circle",this.$q),console.log(e.details.user_token),console.log(e.details.user_data),b.A.setUser(e.details.user_data),b.A.setToken(e.details.user_token),this.$router.push("/menu")})).catch((e=>{p.A.notify("negative",e,"error_outline",this.$q)})).then((e=>{this.loading=!1}))},resendEmail(){this.loading=!0,p.A.fetchDataPost("resendResetEmail","customer_uuid="+this.customer_uuid).then((e=>{this.request_success=!0,this.message=e.msg,this.startTimer()})).catch((e=>{this.loading=!1,this.message="",p.A.notify("negative",e,"error_outline",this.$q)})).then((e=>{this.loading=!1}))}}};var w=t(2807),f=t(7716),_=t(3316),q=t(4189),v=t(9200),$=t(9270),y=t(6384),A=t(8582),L=t.n(A);const T=(0,w.A)(k,[["render",h]]),C=T;L()(k,"components",{QPage:f.A,QCard:_.A,QCardSection:q.A,QForm:v.A,QInput:$.A,QBtn:y.A})}}]);