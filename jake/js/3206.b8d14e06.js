"use strict";(globalThis["webpackChunkcom_kinago_single"]=globalThis["webpackChunkcom_kinago_single"]||[]).push([[3206],{3206:(t,e,a)=>{a.r(e),a.d(e,{default:()=>E});var s=a(1758),n=a(8790);const l={class:"row justify-center q-pa-md"},i={class:"col-md-9 col-12"},o={class:"row"},r={key:0,class:"col-md-4 col-sm-4 col-xs-12"},c={class:"col-md-8 col-sm-8 col-xs-12"},d={class:"text-weight-bold"},u={key:1,class:"text-weight-bold text-warning"},b={class:"q-pa-md"},g={class:"text-bold text-green"},h={key:0,class:"q-pa-xl"},k={key:1,class:"row justify-center absolute-bottom"};function _(t,e,a,_,p,m){const f=(0,s.g2)("StickyBack"),v=(0,s.g2)("LocationNav"),y=(0,s.g2)("AccountNav"),F=(0,s.g2)("q-item-label"),A=(0,s.g2)("q-item-section"),$=(0,s.g2)("q-inner-loading"),q=(0,s.g2)("q-item"),P=(0,s.g2)("q-separator"),w=(0,s.g2)("q-tab"),C=(0,s.g2)("q-tabs"),L=(0,s.g2)("q-list"),x=(0,s.g2)("q-spinner-dots"),X=(0,s.g2)("q-infinite-scroll"),S=(0,s.g2)("q-card"),Q=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(Q,{padding:""},{default:(0,s.k6)((()=>[m.isMobile?((0,s.uX)(),(0,s.Wv)(f,{key:0,url:"/account/menu",label:"Back"})):((0,s.uX)(),(0,s.Wv)(v,{key:1})),(0,s.Lk)("div",l,[(0,s.Lk)("div",i,[(0,s.Lk)("div",o,[m.isMobile?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",r,[(0,s.bF)(y)])),(0,s.Lk)("div",c,[(0,s.bF)(S,{flat:"",class:"fit"},{default:(0,s.k6)((()=>[(0,s.bF)(q,null,{default:(0,s.k6)((()=>[(0,s.bF)(A,null,{default:(0,s.k6)((()=>[(0,s.bF)(F,{class:"text-weight-bold"},{default:(0,s.k6)((()=>[(0,s.Lk)("h5",d,(0,n.v_)(t.$t("Available Points")),1)])),_:1}),(0,s.bF)(F,{caption:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(t.$t("Your points transaction history")),1)])),_:1})])),_:1}),(0,s.bF)(A,{side:"",top:""},{default:(0,s.k6)((()=>[(0,s.bF)(F,null,{default:(0,s.k6)((()=>[p.loading_balance?((0,s.uX)(),(0,s.Wv)($,{key:0,showing:!0,size:"md",color:"warning"})):((0,s.uX)(),(0,s.CE)("h4",u,(0,n.v_)(p.balance),1))])),_:1})])),_:1})])),_:1}),(0,s.bF)(P),(0,s.Lk)("div",b,[(0,s.bF)(C,{modelValue:p.tab,"onUpdate:modelValue":[e[0]||(e[0]=t=>p.tab=t),m.tabChange],dense:"","active-color":"dark","indicator-color":"warning",align:"justify","narrow-indicator":"","no-caps":"",class:(0,n.C4)([{"text-grey300":t.$q.dark.mode,"text-dark":!t.$q.dark.mode},"bg-grey-2 rounded-borders"]),breakpoint:0},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(p.tabList,(t=>((0,s.uX)(),(0,s.Wv)(w,{key:t,name:t.value,label:t.label,"no-caps":"","content-class":"text-weight-500 "},null,8,["name","label"])))),128))])),_:1},8,["modelValue","class","onUpdate:modelValue"]),(0,s.bF)(X,{ref:"nscroll",onLoad:m.getPointsTransaction,offset:350},{default:(0,s.k6)((()=>[(0,s.bF)(L,{class:"q-mt-md"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(m.getData,(t=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t,(t=>((0,s.uX)(),(0,s.CE)(s.FK,{key:t.transaction_date},["transaction"==p.tab?((0,s.uX)(),(0,s.Wv)(q,{key:0},{default:(0,s.k6)((()=>[(0,s.bF)(A,null,{default:(0,s.k6)((()=>[(0,s.bF)(F,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(t.transaction_description),1)])),_:2},1024),(0,s.bF)(F,{caption:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(t.transaction_date),1)])),_:2},1024)])),_:2},1024),(0,s.bF)(A,{side:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",{class:(0,n.C4)(["text-bold",{"text-green":"credit"==t.transaction_type,"text-red":"debit"==t.transaction_type}])},(0,n.v_)(t.transaction_amount),3)])),_:2},1024)])),_:2},1024)):((0,s.uX)(),(0,s.Wv)(q,{key:1},{default:(0,s.k6)((()=>[(0,s.bF)(A,null,{default:(0,s.k6)((()=>[(0,s.bF)(A,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(t.restaurant_name),1)])),_:2},1024)])),_:2},1024),(0,s.bF)(A,{side:""},{default:(0,s.k6)((()=>[(0,s.bF)(A,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",g,(0,n.v_)(t.total_earning),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)),(0,s.bF)(P,{spaced:"",inset:""})],64)))),128))],64)))),128))])),_:1})])),loading:(0,s.k6)((()=>[p.page<=1?((0,s.uX)(),(0,s.CE)("div",h,[(0,s.bF)($,{showing:!0,color:"warning",size:"md","label-class":"dark",class:"transparent"})])):p.page>2?((0,s.uX)(),(0,s.CE)("div",k,[(0,s.bF)(x,{color:"secondary",size:"40px"})])):(0,s.Q3)("",!0)])),_:1},8,["onLoad"])])])),_:1})])])])])])),_:1})}var p=a(2911),m=a(2302);const f={name:"Payments",components:{LocationNav:(0,s.$V)((()=>Promise.all([a.e(4121),a.e(996),a.e(7691)]).then(a.bind(a,5897)))),AccountNav:(0,s.$V)((()=>a.e(996).then(a.bind(a,8275)))),AddressesSkeleton:(0,s.$V)((()=>Promise.all([a.e(4121),a.e(996)]).then(a.bind(a,2171)))),StickyBack:(0,s.$V)((()=>Promise.all([a.e(4121),a.e(996)]).then(a.bind(a,7763))))},data(){return{data:[],loading:!1,tab:"transaction",tabList:[{value:"transaction",label:this.$t("Transactions")},{value:"points_merchant",label:this.$t("Points by merchant")}],page:0,is_refresh:void 0,balance:0,loading_balance:!0}},setup(t){const e=(0,m.C)();return{SettingsStore:e}},async mounted(){Object.keys(this.SettingsStore.settings_data).length>0?this.SettingsStore.settings_data.points_enabled?this.getAvailablePoints():this.$router.push("/home"):this.$watch((()=>this.SettingsStore.$state.settings_data),((t,e)=>{t.points_enabled?this.getAvailablePoints():this.$router.push("/home")}))},computed:{hasData(){return this.data.length>0},getData(){return this.data},isMobile(){return!!this.$q.screen.lt.md}},methods:{getAvailablePoints(){this.loading_balance=!0,p.A.fetchDataByTokenPost("getAvailablePoints").then((t=>{1==t.code?this.balance=t.details.total:this.balance=0})).catch((t=>{})).then((t=>{this.loading_balance=!1}))},getPointsTransaction(t,e){this.loading=!0,this.page=t;const a="transaction"==this.tab?"getPointsTransaction":"getPointsTransactionMerchant";p.A.fetchDataByTokenPost(a,"page="+t).then((t=>{1==t.code?this.data.push(t.details.data):this.$refs.nscroll&&this.$refs.nscroll.stop()})).catch((t=>{this.$refs.nscroll&&this.$refs.nscroll.stop()})).then((t=>{this.loading=!1,e(),p.A.empty(this.is_refresh)||this.is_refresh()}))},tabChange(){this.resetPagination()},resetPagination(){this.page=0,this.data=[],this.$refs.nscroll.reset(),this.$refs.nscroll.resume(),this.$refs.nscroll.trigger()}}};var v=a(2807),y=a(7716),F=a(3316),A=a(124),$=a(5173),q=a(3796),P=a(9035),w=a(386),C=a(2980),L=a(9761),x=a(8049),X=a(3999),S=a(9198),Q=a(8582),T=a.n(Q);const W=(0,v.A)(f,[["render",_]]),E=W;T()(f,"components",{QPage:y.A,QCard:F.A,QItem:A.A,QItemSection:$.A,QItemLabel:q.A,QInnerLoading:P.A,QSeparator:w.A,QTabs:C.A,QTab:L.A,QInfiniteScroll:x.A,QList:X.A,QSpinnerDots:S.A})}}]);