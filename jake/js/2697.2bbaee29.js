"use strict";(globalThis["webpackChunkcom_kinago_single"]=globalThis["webpackChunkcom_kinago_single"]||[]).push([[2697],{2697:(e,t,s)=>{s.r(t),s.d(t,{default:()=>U});var i=s(1758),a=s(8790);const n={class:"row justify-center q-pa-md"},o={class:"col-md-9 col-12"},l={class:"text-center q-mb-md"},r={class:"no-margin text-weight-bold q-pb-sm"},c={class:"text-weight-thin"},g={class:"w-75 margin-auto"},d={class:"q-mb-xs"},u={class:"q-mb-xs"},p={class:"q-mb-lg"},h={key:0,class:"q-mb-md"},_={class:"q-mb-lg"},b={class:"text-center q-mb-md"},m={class:"no-margin"},S={key:0,class:"q-mb-lg"},y={key:0,class:"q-mb-lg"},k={key:3,class:"q-pl-md q-pr-md q-pt-sm"},f=["innerHTML"];function v(e,t,s,v,w,$){const q=(0,i.g2)("LocationNav"),F=(0,i.g2)("q-input"),L=(0,i.g2)("q-icon"),x=(0,i.g2)("q-btn"),A=(0,i.g2)("componentsRecaptcha"),C=(0,i.g2)("q-form"),Q=(0,i.g2)("componentsFacebook"),V=(0,i.g2)("componentsGoogleLogin"),E=(0,i.g2)("q-card-section"),R=(0,i.g2)("q-card"),T=(0,i.g2)("q-page");return(0,i.uX)(),(0,i.Wv)(T,{padding:""},{default:(0,i.k6)((()=>[(0,i.bF)(q),(0,i.Lk)("div",n,[(0,i.Lk)("div",o,[(0,i.bF)(R,{flat:"",class:"w-75",style:{margin:"auto"}},{default:(0,i.k6)((()=>[(0,i.bF)(E,null,{default:(0,i.k6)((()=>[(0,i.Lk)("div",l,[(0,i.Lk)("h4",r,(0,a.v_)(e.$t("Sign In")),1),(0,i.Lk)("p",c,(0,a.v_)(e.$t("Sign in to your account"))+".",1)]),(0,i.Lk)("div",g,[(0,i.bF)(C,{onSubmit:$.onSubmit},{default:(0,i.k6)((()=>[(0,i.Lk)("div",d,[(0,i.bF)(F,{"bg-color":"mygrey",color:"warning",outlined:"",modelValue:w.username,"onUpdate:modelValue":t[0]||(t[0]=e=>w.username=e),label:e.$t("Mobile number or email"),"lazy-rules":"",rules:[t=>t&&t.length>0||e.$t("This field is required")]},null,8,["modelValue","label","rules"])]),(0,i.Lk)("div",u,[(0,i.bF)(F,{"bg-color":"mygrey",color:"warning",type:w.password_type.type,outlined:"",modelValue:w.password,"onUpdate:modelValue":t[1]||(t[1]=e=>w.password=e),label:e.$t("Password"),"lazy-rules":"",rules:[t=>t&&t.length>0||e.$t("This field is required")]},{append:(0,i.k6)((()=>[(0,i.bF)(L,{name:w.password_type.icon,onClick:$.changeFieldType,class:"cursor-pointer"},null,8,["name","onClick"])])),_:1},8,["type","modelValue","label","rules"])]),(0,i.Lk)("div",p,[(0,i.bF)(x,{flat:"",ripple:!1,"text-color":"negative","no-caps":"",class:"full-width no-hover text-weight-bold",dense:"",to:"/forgotpassword"},{default:(0,i.k6)((()=>[(0,i.Lk)("u",null,(0,a.v_)(e.$t("Forgot your password"))+"?",1)])),_:1})]),v.SettingsStore.loading_settings?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",h,[(0,i.bF)(A,{ref:"recapcha",sitekey:v.SettingsStore.settings_data.captcha_site_key,is_enabled:v.SettingsStore.settings_data.captcha_enabled,language_code:v.SettingsStore.settings_data.captcha_lang,size:"normal",theme:"light",tabindex:0,onVerify:$.recaptchaVerified,onExpire:$.recaptchaExpired,onFail:$.recaptchaFailed},null,8,["sitekey","is_enabled","language_code","onVerify","onExpire","onFail"])])),(0,i.Lk)("div",_,[(0,i.bF)(x,{type:"submit",unelevated:"",rounded:"",color:"warning","text-color":"black","no-caps":"",class:"full-width",label:e.$t("Sign in"),size:"lg",loading:w.loading,dense:e.$q.screen.lt.sm},null,8,["label","loading","dense"])])])),_:1},8,["onSubmit"]),(0,i.Lk)("div",b,[(0,i.Lk)("p",m,(0,a.v_)(e.$t("Don't have an account"))+"?",1),(0,i.bF)(x,{flat:"",ripple:!1,"text-color":"negative","no-caps":"",class:"full-width no-hover text-weight-bold",label:e.$t("Sign up"),dense:"",to:"/signup"},null,8,["label"])]),v.SettingsStore.settings_data.enabled_guest?((0,i.uX)(),(0,i.Wv)(x,{key:0,color:"grey-2","text-color":"grey-5","no-caps":"",class:"q-mb-lg fit",label:e.$t("Continue as guest"),to:"/guest",rounded:"",unelevated:"",size:"lg"},null,8,["label"])):(0,i.Q3)("",!0),v.SettingsStore.loading_settings?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[1==v.SettingsStore.settings_data.social_settings.fb_flag?((0,i.uX)(),(0,i.CE)("div",S,[(0,i.bF)(Q,{ref:"facebook",title:e.$t("Login with Facebook"),app_id:v.SettingsStore.settings_data.social_settings.fb_app_id,verification:v.SettingsStore.settings_data.social_settings.enabled_verification,button_width:250,version:"v13.0",onSocialRegistration:$.socialRegistration,errors:{user_cancelled:e.$t("User cancelled login or did not fully authorize.")}},null,8,["title","app_id","verification","onSocialRegistration","errors"])])):(0,i.Q3)("",!0)],64)),v.SettingsStore.loading_settings?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)(i.FK,{key:2},[1==v.SettingsStore.settings_data.social_settings.google_login_enabled?((0,i.uX)(),(0,i.CE)("div",y,[(0,i.bF)(V,{ref:"googlelogin",title:e.$t("Login with Google"),show_button:v.SettingsStore.settings_data.social_settings.google_login_enabled,client_id:v.SettingsStore.settings_data.social_settings.google_client_id,verification:v.SettingsStore.settings_data.social_settings.enabled_verification,button_width:250,cookiepolicy:"single_host_origin",scope:"profile",redirect_to:"",onSocialRegistration:$.socialRegistration,errors:{user_cancelled:e.$t("User cancelled login or did not fully authorize.")}},null,8,["title","show_button","client_id","verification","onSocialRegistration","errors"])])):(0,i.Q3)("",!0)],64)),1==w.settings.signup_enabled_terms?((0,i.uX)(),(0,i.CE)("div",k,[(0,i.Lk)("p",{class:"font12 text-weight-thin",innerHTML:w.settings.signup_terms},null,8,f)])):(0,i.Q3)("",!0)])])),_:1})])),_:1})])])])),_:1})}var w=s(2911),$=s(9818),q=s(2302);const F={name:"Login",components:{LocationNav:(0,i.$V)((()=>Promise.all([s.e(4121),s.e(996),s.e(7691)]).then(s.bind(s,5897)))),componentsRecaptcha:(0,i.$V)((()=>s.e(3281).then(s.bind(s,3281)))),componentsFacebook:(0,i.$V)((()=>s.e(4997).then(s.bind(s,7378)))),componentsGoogleLogin:(0,i.$V)((()=>Promise.all([s.e(4121),s.e(4339)]).then(s.bind(s,4339))))},data(){return{loading:!1,loading_settings:!1,settings:[],username:"",password:"",password_type:{type:"password",icon:"visibility"},recaptcha_response:""}},setup(){const e=(0,q.C)();return{SettingsStore:e}},mounted(){$.A.authenticated()&&this.$router.push("/menu"),Object.keys(this.SettingsStore.settings_data).length>0?this.getSettings():this.$watch((()=>this.SettingsStore.$state.settings_data),((e,t)=>{this.getSettings()}))},methods:{async getSettings(){const e=await this.SettingsStore.getAsyncSettings();Object.keys(e).length>0&&console.log("respx",e)},changeFieldType(){"password"===this.password_type.type?this.password_type={type:"text",icon:"visibility_off"}:this.password_type={type:"password",icon:"visibility"}},onSubmit(){this.loading=!0;const e={username:this.username,password:this.password,local_id:w.A.getStorage("local_id"),recaptcha_response:this.recaptcha_response};w.A.userLogin(e).then((e=>{$.A.setUser(e.details.user_data),$.A.setToken(e.details.user_token),"true"===this.$route.query.checkout?this.$router.push("/checkout"):this.$router.push("/menu")})).catch((e=>{this.loading=!1,w.A.notify("negative",e,"error_outline",this.$q),this.SettingsStore.settings_data.captcha_enabled&&this.$refs.recapcha&&this.$refs.recapcha.reset()})).then((e=>{this.loading=!1}))},recaptchaVerified(e){this.recaptcha_response=e},recaptchaExpired(){this.SettingsStore.settings_data.captcha_enabled&&this.$refs.recapcha&&this.$refs.recapcha.reset()},recaptchaFailed(){},socialRegistration(e){e.local_id=w.A.getStorage("local_id"),w.A.socialRegistration(e).then((e=>{"verify"===e.details.redirect.page?this.$router.push({path:"/account/verify",query:{uuid:e.details.redirect.uuid}}):"complete-registration"===e.details.redirect.page?this.$router.push({path:"/account/complete-registration",query:{uuid:e.details.redirect.uuid}}):($.A.setUser(e.details.user_data),$.A.setToken(e.details.user_token),this.$router.push("/menu"))})).catch((e=>{w.A.notify("negative",e,"error_outline",this.$q)})).then((e=>{}))}}};var L=s(2807),x=s(7716),A=s(3316),C=s(4189),Q=s(9200),V=s(9270),E=s(492),R=s(6384),T=s(8582),X=s.n(T);const z=(0,L.A)(F,[["render",v]]),U=z;X()(F,"components",{QPage:x.A,QCard:A.A,QCardSection:C.A,QForm:Q.A,QInput:V.A,QIcon:E.A,QBtn:R.A})}}]);