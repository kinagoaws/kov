"use strict";(globalThis["webpackChunkcom_kinago_single"]=globalThis["webpackChunkcom_kinago_single"]||[]).push([[4386],{4386:(t,a,e)=>{e.r(a),e.d(a,{default:()=>S});var l=e(1758),s=e(8790);const i={class:"relative-position"},o={class:"q-pa-sm bg-grey-2 radius10 text-dark text-weight-thin"};function n(t,a,e,n,r,d){const c=(0,l.g2)("q-icon"),u=(0,l.g2)("q-item-section"),g=(0,l.g2)("q-skeleton"),_=(0,l.g2)("q-item-label"),h=(0,l.g2)("q-checkbox"),p=(0,l.g2)("q-item"),m=(0,l.g2)("q-list"),w=(0,l.g2)("q-inner-loading");return(0,l.uX)(),(0,l.CE)("div",i,[(0,l.bF)(m,null,{default:(0,l.k6)((()=>[(0,l.bF)(p,{tag:"label"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{avatar:"",top:""},{default:(0,l.k6)((()=>[(0,l.bF)(c,{color:"yellow-9",name:"o_account_balance_wallet"})])),_:1}),(0,l.bF)(u,null,{default:(0,l.k6)((()=>[(0,l.bF)(_,null,{default:(0,l.k6)((()=>[r.loading?((0,l.uX)(),(0,l.Wv)(g,{key:0,type:"QBadge"})):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.eW)((0,s.v_)(d.getData.balance),1)],64))])),_:1}),(0,l.bF)(_,{lines:"2",caption:"",class:"font11"},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(t.$t("Digital Wallet Balance")),1)])),_:1}),r.message?((0,l.uX)(),(0,l.Wv)(_,{key:0,caption:""},{default:(0,l.k6)((()=>[(0,l.Lk)("div",o,(0,s.v_)(r.message),1)])),_:1})):(0,l.Q3)("",!0)])),_:1}),(0,l.bF)(u,{side:""},{default:(0,l.k6)((()=>[(0,l.bF)(h,{modelValue:r.use_wallet,"onUpdate:modelValue":[a[0]||(a[0]=t=>r.use_wallet=t),d.applyDigitalWallet],val:"1",color:"yellow-9",disable:!d.canUseWallet},null,8,["modelValue","disable","onUpdate:modelValue"])])),_:1})])),_:1})])),_:1}),(0,l.bF)(w,{showing:r.loading,color:"warning",size:"md"},null,8,["showing"])])}var r=e(2911),d=e(1464),c=e(8904),u=e(2532);const g={name:"WalletComponents",props:["cart_loaded","cart_updated"],data(){return{use_wallet:!1,data:[],loading:!1,message:""}},setup(){const t=(0,d.Q)(),a=(0,c.x)(),e=(0,u.t)();return{DataStorePersisted:t,cartStore:a,transactionStore:e}},watch:{cart_loaded(t,a){0==t&&this.getCartWallet()},cart_updated(t,a){0==t&&this.getCartWallet()}},computed:{canUseWallet(){return Object.keys(this.data).length>0&&this.data.balance_raw>0},getData(){return this.data}},methods:{getCartWallet(){this.loading=!0;let t=r.A.empty(this.cartStore.cart_total)?null:this.cartStore.cart_total.raw;r.A.fetchDataByTokenPost("getCartWallet","cart_uuid="+r.A.getStorage("cart_uuid")+"&currency_code="+this.DataStorePersisted.getUseCurrency()+"&amount_to_pay="+t).then((t=>{this.data=t.details,this.use_wallet=t.details.use_wallet,this.use_wallet&&(this.$emit("afterApplywallet",t.details.apply_wallet_data),t.details.apply_wallet_data.amount_due_raw>0&&(this.message=t.details.apply_wallet_data.message))})).catch((t=>{this.data=[],this.use_wallet=!1})).then((t=>{this.loading=!1}))},applyDigitalWallet(t){this.loading=!0;let a=t?1:0,e=r.A.empty(this.cartStore.cart_total)?null:this.cartStore.cart_total.raw;r.A.fetchDataByTokenPost("applyDigitalWallet","cart_uuid="+r.A.getStorage("cart_uuid")+"&currency_code="+this.DataStorePersisted.getUseCurrency()+"&use_wallet="+a+"&amount_to_pay="+e).then((t=>{this.message=a?t.msg:"",this.$emit("afterApplywallet",t.details)})).catch((t=>{this.use_wallet=!1,this.message="",r.A.notify("dark",t,"error",this.$q)})).then((t=>{this.loading=!1}))}}};var _=e(2807),h=e(3999),p=e(124),m=e(5173),w=e(492),y=e(3796),k=e(3820),b=e(460),A=e(9035),f=e(8582),W=e.n(f);const v=(0,_.A)(g,[["render",n]]),S=v;W()(g,"components",{QList:h.A,QItem:p.A,QItemSection:m.A,QIcon:w.A,QItemLabel:y.A,QSkeleton:k.Ay,QCheckbox:b.A,QInnerLoading:A.A})}}]);