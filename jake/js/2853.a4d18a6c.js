"use strict";(globalThis["webpackChunkcom_kinago_single"]=globalThis["webpackChunkcom_kinago_single"]||[]).push([[2853],{2853:(e,t,s)=>{s.r(t),s.d(t,{default:()=>E});var a=s(1758),n=s(8790);const i={id:"reservation",class:"row justify-center q-pa-md"},l={class:"col-md-9 col-12"},r={key:1,class:"text-center"},o={class:"row items-center q-pa-sm"},c={class:"col-xs-12 col-md-6"},d={class:"row inline items-center q-gutter-sm"},u={class:"q-ma-none"},_={class:"text-grey font12"},v={class:"col-xs-12 col-md-6 text-right"},h={class:"row q-col-gutter-md"},m={class:"col-xs-12 col-sm-12 col-md-6"},p={class:"q-ma-none"},g={class:"col-xs-12 col-sm-12 col-md-6"},k={class:"q-ma-none"},b={class:"text-red"};function f(e,t,s,f,q,y){const F=(0,a.g2)("LocationNav"),L=(0,a.g2)("q-inner-loading"),C=(0,a.g2)("q-step"),x=(0,a.g2)("q-stepper"),A=(0,a.g2)("q-img"),$=(0,a.g2)("q-btn"),w=(0,a.g2)("q-space"),Q=(0,a.g2)("q-item"),W=(0,a.g2)("q-list"),S=(0,a.g2)("q-item-label"),R=(0,a.g2)("q-item-section"),X=(0,a.g2)("q-card-section"),D=(0,a.g2)("q-card"),I=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(I,{padding:""},{default:(0,a.k6)((()=>[(0,a.bF)(F),(0,a.Lk)("div",i,[(0,a.Lk)("div",l,[q.loading?((0,a.uX)(),(0,a.Wv)(L,{key:0,showing:q.loading,color:"warning"},null,8,["showing"])):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[q.steps<=3?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[e.$q.screen.gt.xs?((0,a.uX)(),(0,a.Wv)(x,{key:0,modelValue:q.steps,"onUpdate:modelValue":t[0]||(t[0]=e=>q.steps=e),ref:"stepper",color:"primary",animated:"","active-icon":"las la-check","active-color":"warning","done-color":"warning",flat:"",class:"bg-grey-2"},{default:(0,a.k6)((()=>[(0,a.bF)(C,{name:1,title:e.$t("Pending"),icon:"las la-check",done:e.step>1||q.steps>=2},null,8,["title","done"]),(0,a.bF)(C,{name:2,title:e.$t("Confirm"),icon:"las la-check",done:e.step>2||q.steps>=3},null,8,["title","done"]),(0,a.bF)(C,{name:3,title:e.$t("Completed"),icon:"las la-check",done:e.step>3},null,8,["title","done"])])),_:1},8,["modelValue"])):((0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",{class:(0,n.C4)(["h5",y.bookingStatus])},(0,n.v_)(q.data.status_pretty),3)]))],64)):((0,a.uX)(),(0,a.Wv)(x,{key:1,modelValue:q.steps,"onUpdate:modelValue":t[1]||(t[1]=e=>q.steps=e),ref:"stepper",color:"primary",animated:"","active-icon":"las la-times","active-color":"red",flat:"",class:"bg-grey-2"},{default:(0,a.k6)((()=>[(0,a.bF)(C,{name:4,title:e.$t("Reservation Cancelled"),icon:"las la-times",done:e.step>4},null,8,["title","done"])])),_:1},8,["modelValue"])),(0,a.Lk)("div",o,[(0,a.Lk)("div",c,[(0,a.Lk)("div",d,[(0,a.bF)(A,{src:q.merchant.logo,style:{height:"60px",width:"60px"},class:"circle","spinner-color":"grey","spinner-size":"sm"},null,8,["src"]),(0,a.Lk)("div",null,[(0,a.Lk)("h5",u,(0,n.v_)(q.merchant.restaurant_name),1),(0,a.Lk)("div",_,(0,n.v_)(q.merchant.address),1)])])]),(0,a.Lk)("div",v,[y.CanCancelReservation?((0,a.uX)(),(0,a.Wv)($,{key:0,type:"submit",unelevated:"",color:"red","text-color":"white","no-caps":"",label:e.$t("Cancel Reservation"),size:"17px",rounded:"",to:{name:"reservation-cancel",query:{id:this.id}},class:(0,n.C4)({"full-width q-mt-md q-mb-sm":e.$q.screen.lt.sm})},null,8,["label","to","class"])):(0,a.Q3)("",!0)])]),(0,a.bF)(D,{flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(X,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",h,[(0,a.Lk)("div",m,[(0,a.Lk)("h5",p,(0,n.v_)(e.$t("Reservation Details")),1),(0,a.bF)(w,{class:"q-pa-sm"}),(0,a.bF)(W,{separator:""},{default:(0,a.k6)((()=>[(0,a.bF)(Q,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t("Reservation ID"))+": "+(0,n.v_)(q.data.reservation_id),1)])),_:1}),(0,a.bF)(Q,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(q.data.guest_number),1)])),_:1}),(0,a.bF)(Q,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(q.data.reservation_date),1)])),_:1}),(0,a.bF)(Q,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(q.data.reservation_time),1)])),_:1})])),_:1})]),(0,a.Lk)("div",g,[(0,a.Lk)("h5",k,(0,n.v_)(e.$t("Your Details")),1),(0,a.bF)(w,{class:"q-pa-sm"}),(0,a.bF)(W,{separator:""},{default:(0,a.k6)((()=>[(0,a.bF)(Q,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(q.data.full_name),1)])),_:1}),(0,a.bF)(Q,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(q.data.email_address),1)])),_:1}),(0,a.bF)(Q,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(q.data.contact_phone),1)])),_:1}),(0,a.bF)(Q,null,{default:(0,a.k6)((()=>[(0,a.bF)(R,null,{default:(0,a.k6)((()=>[(0,a.bF)(S,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t("Special Request")),1)])),_:1}),(0,a.bF)(S,{caption:""},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(q.data.special_request),1)])),_:1}),q.data.cancellation_reason?((0,a.uX)(),(0,a.Wv)(S,{key:0},{default:(0,a.k6)((()=>[(0,a.Lk)("span",b,(0,n.v_)(e.$t("CANCELLATION NOTES"))+" = "+(0,n.v_)(q.data.cancellation_reason),1)])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1})])),_:1})])]),(0,a.bF)(w,{class:"q-pa-sm"}),y.CanCancelReservation?((0,a.uX)(),(0,a.Wv)($,{key:0,type:"submit",unelevated:"",color:"warning","text-color":"dark","no-caps":"",class:"full-width","aria-setsize":"",label:e.$t("Modify Reservation"),to:{name:"reservation-update",query:{id:this.id}},size:this.$q.screen.lt.md?"15px":"17px",rounded:""},null,8,["label","to","size"])):(0,a.Q3)("",!0)])),_:1})])),_:1})],64))])])])),_:1})}var q=s(2911);const y={name:"TrackReservation",components:{LocationNav:(0,a.$V)((()=>Promise.all([s.e(4121),s.e(996),s.e(7691)]).then(s.bind(s,5897))))},data(){return{id:"",steps:1,loading:!1,data:[],merchant:[],cancel_link:"",update_link:"",cancel_reservation_stats:[],pending_reservation_stats:[],confirm_reservation_stats:[],completed_reservation_stats:[],cancel_reservation_stats2:[]}},created(){this.getBookingDetails()},computed:{hasData(){return Object.keys(this.data).length>0},hasMerchant(){return Object.keys(this.merchant).length>0},CanCancelReservation(){return!0!==this.cancel_reservation_stats.includes(this.data.status)},bookingStatus(){return!0===this.cancel_reservation_stats2.includes(this.data.status)?"text-red":!0===this.pending_reservation_stats.includes(this.data.status)?"text-blue":!0===this.completed_reservation_stats.includes(this.data.status)?"text-orange":"text-green"}},methods:{getBookingDetails(){this.id=this.$route.query.id,this.loading=!0,q.A.fetchDataPostTableToken("BookingDetails","id="+this.id).then((e=>{this.data=e.details.data,this.merchant=e.details.merchant,this.cancel_reservation_stats=e.details.cancel_reservation_stats,this.cancel_reservation_stats2=e.details.cancel_reservation_stats2,this.pending_reservation_stats=e.details.pending_reservation_stats,this.confirm_reservation_stats=e.details.confirm_reservation_stats,this.completed_reservation_stats=e.details.completed_reservation_stats,this.setSteps()})).catch((e=>{q.A.notify("negative",e,"error_outline",this.$q),this.data=[],this.merchant=[],this.cancel_link="",this.update_link="",this.cancel_reservation_stats=[],this.pending_reservation_stats=[],this.confirm_reservation_stats=[],this.completed_reservation_stats=[]})).then((e=>{this.loading=!1}))},setSteps(){!0===this.confirm_reservation_stats.includes(this.data.status)?this.steps=2:!0===this.completed_reservation_stats.includes(this.data.status)?this.steps=3:!0===this.cancel_reservation_stats.includes(this.data.status)?this.steps=4:this.steps=1}}};var F=s(2807),L=s(7716),C=s(9035),x=s(7222),A=s(8577),$=s(2665),w=s(6384),Q=s(3316),W=s(4189),S=s(3676),R=s(3999),X=s(124),D=s(5173),I=s(3796),T=s(8582),V=s.n(T);const z=(0,F.A)(y,[["render",f]]),E=z;V()(y,"components",{QPage:L.A,QInnerLoading:C.A,QStepper:x.A,QStep:A.A,QImg:$.A,QBtn:w.A,QCard:Q.A,QCardSection:W.A,QSpace:S.A,QList:R.A,QItem:X.A,QItemSection:D.A,QItemLabel:I.A})}}]);