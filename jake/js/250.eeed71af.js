"use strict";(globalThis["webpackChunkcom_kinago_single"]=globalThis["webpackChunkcom_kinago_single"]||[]).push([[250],{250:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_e});var s=a(1758),i=a(8790),l=a(9104);const r={id:"menu",class:"row justify-center"},o={class:"col-md-11 col-12"},d={class:"row fit justify-start items-center q-col-gutter-md"},n={class:"row justify-between items-center q-mb-sm"},c={class:"col"},_=["id"],m={key:0,class:"col-2 text-right"},u={key:0,class:"row fit q-col-gutter-md"},g={key:0,class:"col-md-6 col-sm-6 col-xs-12"},h=["innerHTML"],y=["innerHTML"],p={class:"q-gutter-x-xs"},k=["src"],f={class:"row items-center"},b={class:"col text-weight-medium"},v={key:0,class:"q-mr-sm"},C={key:1,class:"q-mr-sm"},A={class:"text-grey"},F={class:"col-3 text-right"},w={key:1,class:"row fit justify-start items-center q-col-gutter-md"},S={key:0,class:"col-lg-3 col-md-4 col-sm-4 col-xs-12"},X={key:0,class:"absolute-bottom flex justify-end q-mb-xs q-mr-xs q-gutter-x-xs",style:{"z-index":"1"}},L=["src"],q=["innerHTML"],x=["innerHTML"],E={key:0,class:"q-mr-sm"},$={key:1,class:"q-mr-s zm"},Q={class:"text-grey"},M=["innerHTML"],I=["innerHTML"],T={key:0,class:"q-mr-sm"},D={key:1,class:"q-mr-s zm"},P={class:"text-grey"};function z(e,t,a,z,W,K){const H=(0,s.g2)("CategoryNav"),V=(0,s.g2)("CategoryDialog"),N=(0,s.g2)("q-skeleton"),j=(0,s.g2)("SkeletonItem"),B=(0,s.g2)("q-btn"),R=(0,s.g2)("q-img"),O=(0,s.g2)("q-item-section"),U=(0,s.g2)("q-item-label"),G=(0,s.g2)("q-avatar"),J=(0,s.g2)("q-item"),Y=(0,s.g2)("q-card"),Z=(0,s.g2)("ProductDetails"),ee=(0,s.g2)("AddressNeededModal"),te=(0,s.g2)("AllergensDetails"),ae=(0,s.g2)("LocationModal"),se=(0,s.g2)("q-page"),ie=(0,s.gN)("scroll");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(H,{ref:"category_nav",onShowCategory:K.showCategory,onAfterCategoryselected:K.afterCategoryselected,selected_category:W.selected_category},null,8,["onShowCategory","onAfterCategoryselected","selected_category"]),(0,s.bF)(V,{ref:"category_dialog",data:W.data_category,onAfterCategoryselected:K.afterCategoryselected},null,8,["data","onAfterCategoryselected"]),(0,s.bF)(se,{padding:"",class:"q-pt-xs-none"},{default:(0,s.k6)((()=>[(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",r,[(0,s.Lk)("div",o,[W.loading?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},(0,s.pI)(2,(e=>(0,s.Lk)("section",{key:e,class:"q-mb-md"},[(0,s.bF)(N,{type:"rect",width:"200px",class:"q-mb-sm"}),(0,s.Lk)("div",d,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(4,(e=>(0,s.Lk)("div",{key:e,class:"col-lg-2 col-md-3 col-sm-4 col-xs-12 q-mb-md q-mb-sm-none"},[(0,s.bF)(j)]))),64))])]))),64)):((0,s.uX)(!0),(0,s.CE)(s.FK,{key:1},(0,s.pI)(W.data_category,((t,a)=>((0,s.uX)(),(0,s.CE)("section",{key:t.cat_id,class:"q-mb-md"},[(0,s.Lk)("div",n,[(0,s.Lk)("div",c,[(0,s.Lk)("h4",{id:t.category_uiid,ref_for:!0,ref:K.setItemRef,class:"no-margin text-weight-bold q-pb-sm"},(0,i.v_)(t.category_name),9,_)]),0==a?((0,s.uX)(),(0,s.CE)("div",m,[(0,s.bF)(B,{round:"",color:"white","text-color":"dark",icon:"column"==z.DataStorePersisted.menu_type?"o_view_agenda":"grid_view",unelevated:"",onClick:K.changeMenuType},null,8,["icon","onClick"])])):(0,s.Q3)("",!0)]),"list"==z.DataStorePersisted.menu_type?((0,s.uX)(),(0,s.CE)("div",u,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.items,(e=>((0,s.uX)(),(0,s.CE)(s.FK,{key:e},[W.data_items[e]?((0,s.uX)(),(0,s.CE)("div",g,[(0,s.bF)(Y,{flat:"",bordered:"false",class:"q-pa-sm"},{default:(0,s.k6)((()=>[(0,s.bF)(J,null,{default:(0,s.k6)((()=>[(0,s.bF)(O,{avatar:""},{default:(0,s.k6)((()=>[(0,s.bF)(R,{src:W.data_items[e].url_image,style:{height:"120px",width:"120px"},loading:"lazy",fit:"cover","spinner-color":"warning","spinner-size":"sm"},null,8,["src"])])),_:2},1024),(0,s.bF)(O,{top:""},{default:(0,s.k6)((()=>[(0,s.bF)(U,null,{default:(0,s.k6)((()=>[(0,s.Lk)("span",{innerHTML:W.data_items[e].item_name},null,8,h)])),_:2},1024),(0,s.bF)(U,{caption:"",class:"ellipsis-3-lines"},{default:(0,s.k6)((()=>[(0,s.Lk)("span",{innerHTML:W.data_items[e].item_description},null,8,y)])),_:2},1024),W.data_items[e].dish?((0,s.uX)(),(0,s.Wv)(U,{key:0},{default:(0,s.k6)((()=>[(0,s.Lk)("div",p,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(W.data_items[e].dish,(e=>((0,s.uX)(),(0,s.CE)(s.FK,{key:e},[W.dish[e]?((0,s.uX)(),(0,s.Wv)(G,{key:0,size:"md",style:{border:"2px solid white"},class:"bg-yellow-9"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:W.dish[e].url_image},null,8,k)])),_:2},1024)):(0,s.Q3)("",!0)],64)))),128))])])),_:2},1024)):(0,s.Q3)("",!0)])),_:2},1024)])),_:2},1024),(0,s.Lk)("div",null,[(0,s.bF)(J,null,{default:(0,s.k6)((()=>[(0,s.bF)(O,{avatar:"",style:{width:"120px"}},{default:(0,s.k6)((()=>[W.data_items[e].total_allergens>0?((0,s.uX)(),(0,s.Wv)(B,{key:0,round:"",unelevated:"",color:"mygrey","text-color":"dark",size:"sm",icon:"o_info",onClick:(0,l.D$)((t=>K.showAllergens(e)),["stop"])},null,8,["onClick"])):(0,s.Q3)("",!0)])),_:2},1024),(0,s.bF)(O,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",f,[(0,s.Lk)("div",b,[W.data_items[e].price[0]?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[W.data_items[e].price[0].discount<=0?((0,s.uX)(),(0,s.CE)("span",v,(0,i.v_)(W.data_items[e].price[0].size_name)+" "+(0,i.v_)(W.data_items[e].price[0].pretty_price),1)):((0,s.uX)(),(0,s.CE)("span",C,[(0,s.eW)((0,i.v_)(W.data_items[e].price[0].size_name)+" ",1),(0,s.Lk)("del",A,(0,i.v_)(W.data_items[e].price[0].pretty_price),1),(0,s.eW)(" "+(0,i.v_)(W.data_items[e].price[0].pretty_price_after_discount),1)]))],64)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",F,[(0,s.bF)(B,{round:"",color:K.itemAvailable(e,t.cat_id)?"warning":"grey-3",icon:"add",unelevated:"",size:"12px",disable:!K.itemAvailable(e,t.cat_id),onClick:(0,l.D$)((a=>K.ShowItems(W.data_items[e].slug,t.cat_id,W.data_items[e].item_uuid)),["stop"])},null,8,["color","disable","onClick"])])])])),_:2},1024)])),_:2},1024)])])),_:2},1024)])):(0,s.Q3)("",!0)],64)))),128))])):((0,s.uX)(),(0,s.CE)("div",w,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.items,(a=>((0,s.uX)(),(0,s.CE)(s.FK,{key:a},[W.data_items[a]?((0,s.uX)(),(0,s.CE)("div",S,[(0,s.bF)(Y,{flat:"",bordered:"false"},{default:(0,s.k6)((()=>[(0,s.bF)(J,null,{default:(0,s.k6)((()=>[(0,s.bF)(O,{class:"relative-position"},{default:(0,s.k6)((()=>[W.data_items[a].dish?((0,s.uX)(),(0,s.CE)("div",X,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(W.data_items[a].dish,(e=>((0,s.uX)(),(0,s.CE)(s.FK,{key:e},[W.dish[e]?((0,s.uX)(),(0,s.Wv)(G,{key:0,size:"md",style:{border:"2px solid white"},class:"bg-yellow-9"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:W.dish[e].url_image},null,8,L)])),_:2},1024)):(0,s.Q3)("",!0)],64)))),128))])):(0,s.Q3)("",!0),(0,s.bF)(R,{src:W.data_items[a].url_image,style:{height:"120px"},loading:"lazy",fit:"cover",class:"full-width","spinner-color":"warning","spinner-size":"sm"},null,8,["src"])])),_:2},1024),this.$q.screen.lt.sm?((0,s.uX)(),(0,s.Wv)(O,{key:0,top:""},{default:(0,s.k6)((()=>[(0,s.bF)(U,{class:"ellipsis-2-lines"},{default:(0,s.k6)((()=>[(0,s.Lk)("span",{innerHTML:W.data_items[a].item_name},null,8,q)])),_:2},1024),(0,s.bF)(U,{caption:"",class:"ellipsis-2-lines"},{default:(0,s.k6)((()=>[(0,s.Lk)("span",{innerHTML:W.data_items[a].item_description},null,8,x)])),_:2},1024),(0,s.bF)(U,null,{default:(0,s.k6)((()=>[W.data_items[a].price[0]?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[W.data_items[a].price[0].discount<=0?((0,s.uX)(),(0,s.CE)("span",E,(0,i.v_)(W.data_items[a].price[0].size_name)+" "+(0,i.v_)(W.data_items[a].price[0].pretty_price),1)):((0,s.uX)(),(0,s.CE)("span",$,[(0,s.eW)((0,i.v_)(W.data_items[a].price[0].size_name)+" ",1),(0,s.Lk)("del",Q,(0,i.v_)(W.data_items[a].price[0].pretty_price),1),(0,s.eW)(" "+(0,i.v_)(W.data_items[a].price[0].pretty_price_after_discount),1)]))],64)):(0,s.Q3)("",!0)])),_:2},1024),W.data_items[a].total_allergens>0?((0,s.uX)(),(0,s.Wv)(U,{key:0},{default:(0,s.k6)((()=>[(0,s.bF)(B,{round:"",unelevated:"",color:"mygrey","text-color":"dark",size:"sm",icon:"o_info",onClick:(0,l.D$)((e=>K.showAllergens(a)),["stop"])},null,8,["onClick"])])),_:2},1024)):(0,s.Q3)("",!0)])),_:2},1024)):(0,s.Q3)("",!0)])),_:2},1024),this.$q.screen.lt.sm?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(J,{key:0},{default:(0,s.k6)((()=>[(0,s.bF)(O,null,{default:(0,s.k6)((()=>[(0,s.bF)(U,{class:"ellipsis-2-lines"},{default:(0,s.k6)((()=>[(0,s.Lk)("span",{innerHTML:W.data_items[a].item_name},null,8,M)])),_:2},1024)])),_:2},1024),W.data_items[a].total_allergens>0?((0,s.uX)(),(0,s.Wv)(O,{key:0,side:""},{default:(0,s.k6)((()=>[(0,s.bF)(B,{round:"",unelevated:"",color:"mygrey","text-color":"dark",size:"sm",icon:"o_info",onClick:(0,l.D$)((e=>K.showAllergens(a)),["stop"])},null,8,["onClick"])])),_:2},1024)):(0,s.Q3)("",!0)])),_:2},1024)),this.$q.screen.lt.sm?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(J,{key:1,class:"item-min-height"},{default:(0,s.k6)((()=>[(0,s.bF)(O,null,{default:(0,s.k6)((()=>[(0,s.bF)(U,{caption:"",class:"ellipsis-2-lines"},{default:(0,s.k6)((()=>[(0,s.Lk)("span",{innerHTML:W.data_items[a].item_description},null,8,I)])),_:2},1024)])),_:2},1024)])),_:2},1024)),this.$q.screen.lt.sm?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(J,{key:2,class:"item-min-height"},{default:(0,s.k6)((()=>[(0,s.bF)(O,null,{default:(0,s.k6)((()=>[W.data_items[a].price[0]?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[W.data_items[a].price[0].discount<=0?((0,s.uX)(),(0,s.CE)("span",T,(0,i.v_)(W.data_items[a].price[0].size_name)+" "+(0,i.v_)(W.data_items[a].price[0].pretty_price),1)):((0,s.uX)(),(0,s.CE)("span",D,[(0,s.eW)((0,i.v_)(W.data_items[a].price[0].size_name)+" ",1),(0,s.Lk)("del",P,(0,i.v_)(W.data_items[a].price[0].pretty_price),1),(0,s.eW)(" "+(0,i.v_)(W.data_items[a].price[0].pretty_price_after_discount),1)]))],64)):(0,s.Q3)("",!0)])),_:2},1024)])),_:2},1024)),(0,s.bF)(J,null,{default:(0,s.k6)((()=>[(0,s.bF)(O,null,{default:(0,s.k6)((()=>[(0,s.bF)(B,{unelevated:"",rounded:"",color:K.itemAvailable(a,t.cat_id)?"warning":"grey-3",disable:!K.itemAvailable(a,t.cat_id),"text-color":"black","no-caps":"",class:"full-width",label:K.itemAvailable(a,t.cat_id)?e.$t("Add to cart"):e.$t("Not available"),onClick:(0,l.D$)((e=>K.ShowItems(W.data_items[a].slug,t.cat_id,W.data_items[a].item_uuid)),["stop"])},null,8,["color","disable","label","onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])):(0,s.Q3)("",!0)],64)))),128))]))])))),128))])])),[[ie,K.onScroll]]),(0,s.bF)(Z,{ref:"product_details",onAfterAddtocart:K.afterAddtocart},null,8,["onAfterAddtocart"]),(0,s.bF)(ee,{ref:"address_needed"},null,512),(0,s.bF)(te,{ref:"allergens",merchant_id:W.merchant_id,allergens_item_id:W.allergens_item_id},null,8,["merchant_id","allergens_item_id"]),W.is_guest?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(ae,{key:0,ref:"location_modal",enabled_search:!1,title:e.$t("Choose location"),onAfterSelectaddress:e.afterSelectaddress,onAfterSetplaceid:K.afterSetplaceid},null,8,["title","onAfterSelectaddress","onAfterSetplaceid"]))])),_:1})],64)}var W=a(2911),K=a(8336),H=a(2302),V=a(2532),N=a(1464),j=a(3634),B=a(9818);const{getScrollTarget:R,setVerticalScrollPosition:O,getVerticalScrollPosition:U}=K.Ay,G={name:"Menu",components:{CategoryNav:(0,s.$V)((()=>Promise.all([a.e(4121),a.e(8344)]).then(a.bind(a,8344)))),SkeletonItem:(0,s.$V)((()=>a.e(7836).then(a.bind(a,7836)))),CategoryDialog:(0,s.$V)((()=>Promise.all([a.e(4121),a.e(1496)]).then(a.bind(a,1496)))),ProductDetails:(0,s.$V)((()=>Promise.all([a.e(4121),a.e(9281)]).then(a.bind(a,9281)))),AddressNeededModal:(0,s.$V)((()=>Promise.all([a.e(4121),a.e(2380)]).then(a.bind(a,2380)))),AllergensDetails:(0,s.$V)((()=>Promise.all([a.e(4121),a.e(5350)]).then(a.bind(a,5350)))),LocationModal:(0,s.$V)((()=>Promise.all([a.e(4121),a.e(996)]).then(a.bind(a,5985))))},data(){return{drawer:!1,data:[],data_category:[],data_items:[],loading:!1,category_seleted:"",itemRefs:[],category_position:[],items_not_available:[],category_not_available:[],trans_type:"",merchant_id:"",allergens_item_id:"",selected_category:"default",is_guest:!1,menu_type:1,dish:[]}},setup(){const e=(0,H.C)(),t=(0,V.t)(),a=(0,N.Q)(),s=(0,j.c)();return{SettingsStore:e,transactionStore:t,DataStorePersisted:a,ifstoreAvailable:s}},created(){this.$watch((()=>this.transactionStore.$state.change_currency),((e,t)=>{this.getMenu(!0)}))},mounted(){this.selected_category=this.$route.query.cat_id,W.A.empty(this.selected_category)||setTimeout((()=>{this.afterCategoryselected(this.selected_category)}),800),Object.keys(this.SettingsStore.settings_data).length>0?(this.menu_type=this.SettingsStore.settings_data.menu_type,this.getMenu(!1)):this.$watch((()=>this.SettingsStore.$state.settings_data),((e,t)=>{this.menu_type=e.menu_type,this.getMenu(!1)})),this.is_guest=!0,B.A.authenticated()&&(this.is_guest=!1),this.is_guest?this.showAddressIfNeeded():this.showAddressBook()},methods:{showAddressBook(){W.A.empty(this.DataStorePersisted.local_id)&&"delivery"==this.DataStorePersisted.transaction_type&&setTimeout((()=>{this.$refs.location_modal.show_modal=!0}),1e3)},showAddressIfNeeded(){W.A.empty(this.DataStorePersisted.local_id)&&"delivery"==this.DataStorePersisted.transaction_type&&setTimeout((()=>{this.$refs.address_needed.modal=!0}),1e3)},itemAvailable(e,t){return!1===this.items_not_available.includes(parseInt(e))&&!1===this.category_not_available.includes(parseInt(t))},getMenu(e){e||(this.loading=!0),W.A.geStoreMenu(this.DataStorePersisted.getUseCurrency()).then((e=>{this.merchant_id=e.details.merchant_id,this.data_category=e.details.data.category,this.data_items=e.details.data.items,this.items_not_available=e.details.data.items_not_available,this.category_not_available=e.details.data.category_not_available,this.dish=e.details.data.dish})).catch((e=>{console.debug(e),this.this.items_not_available=[],this.this.category_not_available=[]})).then((e=>{this.loading=!1}))},showCategory(){this.$refs.category_dialog.show_modal=!0},afterCategoryselected(e){this.$refs.category_dialog.show_modal=!1,this.$refs.category_dialog.category=e,this.scrollToElement(e)},setItemRef(e){e&&this.itemRefs.push(e)},onScroll(e){},scrollToElement(e){const t=document.getElementById(e);if(!W.A.empty(t)){const e=R(t),a=t.offsetTop,s=500;O(e,a,s)}},ShowItems(e,t,a){1==this.menu_type?this.$router.push({name:"product",params:{slug:e,cat_id:t,item_uuid:a}}):this.itemModal(t,a)},itemModal(e,t){this.$refs.product_details.showItem(e,t)},afterAddtocart(){this.ifstoreAvailable.after_addtocart=!0},showAllergens(e){this.allergens_item_id=e,this.$refs.allergens.dialog=!0},afterSetplaceid(e){console.log("afterSetplaceid",e),this.ifstoreAvailable.after_addtocart=!0},changeMenuType(){this.DataStorePersisted.menu_type="column"==this.DataStorePersisted.menu_type?"list":"column"}}};var J=a(2807),Y=a(7716),Z=a(3820),ee=a(6384),te=a(3316),ae=a(124),se=a(5173),ie=a(2665),le=a(3796),re=a(3952),oe=a(7235),de=a(8582),ne=a.n(de);const ce=(0,J.A)(G,[["render",z]]),_e=ce;ne()(G,"components",{QPage:Y.A,QSkeleton:Z.Ay,QBtn:ee.A,QCard:te.A,QItem:ae.A,QItemSection:se.A,QImg:ie.A,QItemLabel:le.A,QAvatar:re.A}),ne()(G,"directives",{Scroll:oe.A})}}]);