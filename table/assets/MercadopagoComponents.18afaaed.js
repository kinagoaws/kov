import{Q as g}from"./QSpace.aa134d93.js";import{_ as k,n as h,p as y,q as a,f as e,ae as b,ad as w,af as d,X as f,a0 as C,al as P,Y as q,bc as x,aj as B,b0 as Q,V as m}from"./index.e99838a1.js";import{Q as $}from"./QCircularProgress.bceb8870.js";import{C as v}from"./ClosePopup.05834fd1.js";import{l as V}from"./index.4f152a18.js";import"./format.2cae61da.js";const S={name:"MercadopagoComponents",props:["title","payment_code","payment_credentials","payment_details"],data(){return{modal:!1,loading:!1}},setup(){return{}},mounted(){V("https://sdk.mercadopago.com/js/v2").then(()=>{}).catch(()=>{})},methods:{initiatePayment(){this.modal=!0;const s=new MercadoPago(this.payment_credentials.attr1,{locale:"en"}).bricks();(async p=>{const t={initialization:{amount:parseFloat(this.payment_details.total)*100,preferenceId:this.payment_details.payment_reference,payer:{firstName:"",lastName:"",email:""}},customization:{visual:{style:{theme:"default"}},paymentMethods:{creditCard:"all",bankTransfer:"all",onboarding_credits:"all",debitCard:"all",maxInstallments:1}},callbacks:{onReady:()=>{console.log("ready"),this.loading=!1},onSubmit:({selectedPaymentMethod:o,formData:n})=>new Promise((_,u)=>{let l=this.payment_details;l.payment_code=this.payment_code,l.key=this.payment_credentials.attr2,n.payment_details=l,m.PaymentPost(this.payment_code,"processPayment",n).then(r=>{_(),this.$emit("paymentCompleted",{transaction_id:r.details.payment_id,payment_code:this.payment_code})}).catch(r=>{u(),m.notify(this.$q,this.$t("Error"),r,"myerror","highlight_off","bottom")}).then(r=>{})}),onError:o=>{console.error(o),m.notify(this.$q,this.$t("Error"),o,"myerror","highlight_off","bottom")}}};window.paymentBrickController=await p.create("payment","paymentBrick_container",t)})(s)}}},z={class:"text-h6 text-weight-bold"},M={ref:"payment_brick",id:"paymentBrick_container"};function N(i,s,c,p,t,o){return h(),y(Q,{modelValue:t.modal,"onUpdate:modelValue":s[0]||(s[0]=n=>t.modal=n),persistent:"","transition-show":"scale","transition-hide":"scale",position:this.$q.screen.gt.sm?"standard":"bottom","full-width":!this.$q.screen.gt.sm},{default:a(()=>[e(b,{style:{width:"500px","max-width":"80vw"},class:w({"bg-grey600 text-white":i.$q.dark.mode})},{default:a(()=>[e(d,{class:"row items-center q-pb-none"},{default:a(()=>[f("div",z,C(c.title),1),e(g),P(e(q,{icon:"close",flat:"",round:"",dense:""},null,512),[[v]])]),_:1}),e(x,{spaced:""}),t.loading?(h(),y(d,{key:0,class:"q-pa-md flex flex-center"},{default:a(()=>[e($,{indeterminate:"",size:i.$q.screen.gt.sm?"60px":"md",thickness:.3,rounded:"",color:"primary","track-color":"grey-3",class:"q-ma-md"},null,8,["size"])]),_:1})):B("",!0),e(d,{class:"q-pa-md"},{default:a(()=>[f("div",M,null,512)]),_:1})]),_:1},8,["class"])]),_:1},8,["modelValue","position","full-width"])}var R=k(S,[["render",N]]);export{R as default};
