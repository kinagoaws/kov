import{_ as r,V as n,n as i,Z as s,X as d}from"./index.e99838a1.js";import{l as p}from"./index.4f152a18.js";const m={name:"StripeComponents",props:["title","payment_code","payment_credentials","payment_details"],data(){return{modal:!1,loading:!1}},setup(){return{}},mounted(){p("https://checkout.razorpay.com/v1/checkout.js").then(()=>{}).catch(()=>{})},methods:{initiatePayment(){n.showLoadingBox(this.$t("Creating orders")+"..",this.$q);let e=this.payment_details;e.payment_code=this.payment_code,e.key=this.payment_credentials.attr1,e.secret=this.payment_credentials.attr2,n.PaymentPost(this.payment_code,"createOrder",e).then(t=>{console.log("data",t.details),this.renderPayment(t.details)}).catch(t=>{n.notify(this.$q,this.$t("Error"),t,"myerror","highlight_off","bottom")}).then(t=>{n.hideLoadingBox(this.$q)})},renderPayment(e){console.log("renderPayment",e);let t={key:this.payment_credentials.attr1,amount:e.amount,name:this.payment_details.name,description:this.payment_details.payment_description,order_id:e.order_id,handler:a=>{this.$emit("paymentCompleted",{transaction_id:a.razorpay_payment_id,payment_code:this.payment_code})}};var o=new Razorpay(t);o.on("payment.failed",a=>{console.log("failed",a),n.notify("dark",a.error.description,"error_outline",this.$q)}),o.open()}}},c={class:"hidden",ref:"rzp_payment",id:"rzp-button1"};function l(e,t,o,a,h,_){return i(),s("div",null,[d("button",c,null,512)])}var u=r(m,[["render",l]]);export{u as default};
