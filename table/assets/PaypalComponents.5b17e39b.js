import{Q as E}from"./QSpace.aa134d93.js";import{_ as x,V as h,n as b,p as y,q as l,f as u,ae as j,ad as C,af as w,X as p,a0 as v,al as O,Y as q,bc as k,bk as B,aj as Q,b0 as A}from"./index.e99838a1.js";import{Q as P}from"./QCircularProgress.bceb8870.js";import{C as T}from"./ClosePopup.05834fd1.js";import"./format.2cae61da.js";/*!
 * paypal-js v8.1.3 (2025-01-08T17:04:20.320Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(t,e){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r}function N(t,e){var r=document.querySelector('script[src="'.concat(t,'"]'));if(r===null)return null;var a=g(t,e),n=r.cloneNode();if(delete n.dataset.uidAuto,Object.keys(n.dataset).length!==Object.keys(a.dataset).length)return null;var o=!0;return Object.keys(n.dataset).forEach(function(s){n.dataset[s]!==a.dataset[s]&&(o=!1)}),o?r:null}function V(t){var e=t.url,r=t.attributes,a=t.onSuccess,n=t.onError,o=g(e,r);o.onerror=n,o.onload=a,document.head.insertBefore(o,document.head.firstElementChild)}function U(t){var e=t.sdkBaseUrl,r=t.environment,a=$(t,["sdkBaseUrl","environment"]),n=e||W(r),o=a,s=Object.keys(o).filter(function(c){return typeof o[c]!="undefined"&&o[c]!==null&&o[c]!==""}).reduce(function(c,d){var m=o[d].toString();return d=I(d),d.substring(0,4)==="data"||d==="crossorigin"?c.attributes[d]=m:c.queryParams[d]=m,c},{queryParams:{},attributes:{}}),i=s.queryParams,f=s.attributes;return i["merchant-id"]&&i["merchant-id"].indexOf(",")!==-1&&(f["data-merchant-id"]=i["merchant-id"],i["merchant-id"]="*"),{url:"".concat(n,"?").concat(D(i)),attributes:f}}function I(t){var e=function(r,a){return(a?"-":"")+r.toLowerCase()};return t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,e)}function D(t){var e="";return Object.keys(t).forEach(function(r){e.length!==0&&(e+="&"),e+=r+"="+t[r]}),e}function W(t){return t==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function g(t,e){e===void 0&&(e={});var r=document.createElement("script");return r.src=t,Object.keys(e).forEach(function(a){r.setAttribute(a,e[a]),a==="data-csp-nonce"&&r.setAttribute("nonce",e["data-csp-nonce"])}),r}function z(t,e){if(e===void 0&&(e=Promise),S(t,e),typeof document=="undefined")return e.resolve(null);var r=U(t),a=r.url,n=r.attributes,o=n["data-namespace"]||"paypal",s=_(o);return n["data-js-sdk-library"]||(n["data-js-sdk-library"]="paypal-js"),N(a,n)&&s?e.resolve(s):K({url:a,attributes:n},e).then(function(){var i=_(o);if(i)return i;throw new Error("The window.".concat(o," global variable is not available."))})}function K(t,e){e===void 0&&(e=Promise),S(t,e);var r=t.url,a=t.attributes;if(typeof r!="string"||r.length===0)throw new Error("Invalid url.");if(typeof a!="undefined"&&typeof a!="object")throw new Error("Expected attributes to be an object.");return new e(function(n,o){if(typeof document=="undefined")return n();V({url:r,attributes:a,onSuccess:function(){return n()},onError:function(){var s=new Error('The script "'.concat(r,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return o(s)}})})}function _(t){return window[t]}function S(t,e){if(typeof t!="object"||t===null)throw new Error("Expected an options object.");var r=t.environment;if(r&&r!=="production"&&r!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof e!="undefined"&&typeof e!="function")throw new Error("Expected PromisePonyfill to be a function.")}const Z={name:"PaypalComponents",props:["title","label","payment_code","payment_credentials","payment_details"],data(){return{data:[],loading:!1,modal:!1}},mounted(){},methods:{initiatePayment(){this.modal=!0},async Payment(){let t;this.loading=!0;try{t=await z({clientId:this.payment_credentials.attr1,currency:this.payment_details.currency_code})}catch{h.notify(this.$q,this.$t("Error"),this.$t("failed to load the PayPal JS SDK script"),"myerror","highlight_off","bottom")}if(t){this.loading=!1,this.payment_code;let e=this.payment_details;try{await t.Buttons({createOrder(r,a){return a.order.create({purchase_units:[{amount:{value:e.total}}]})},onApprove:(r,a)=>a.order.capture().then(n=>{let o=n.purchase_units[0].payments.captures[0];this.modal=!1,this.$emit("paymentCompleted",{transaction_id:o.id,order_id:n.id,payment_code:this.payment_code})})}).render(this.$refs.paypal_button)}catch{h.notify("dark",this.$t("failed to render the PayPal Buttons"),"error",this.$q)}}}}},H={class:"text-h6 text-weight-bold"},J={class:"text-body2"},L={ref:"paypal_button",class:"margin-auto full-width"};function M(t,e,r,a,n,o){return b(),y(A,{modelValue:n.modal,"onUpdate:modelValue":e[0]||(e[0]=s=>n.modal=s),persistent:"","transition-show":"scale","transition-hide":"scale",position:this.$q.screen.gt.sm?"standard":"bottom","full-width":!this.$q.screen.gt.sm,onShow:o.Payment},{default:l(()=>[u(j,{style:{width:"500px","max-width":"80vw"},class:C({"bg-grey600 text-white":t.$q.dark.mode})},{default:l(()=>[u(w,{class:"row items-center q-pb-none"},{default:l(()=>[p("div",H,v(r.label.payment_title),1),u(E),O(u(q,{icon:"close",flat:"",round:"",dense:""},null,512),[[T]])]),_:1}),u(w,{class:"q-pa-md"},{default:l(()=>[p("div",J,v(r.label.payment_subtitle),1)]),_:1}),u(k,{spaced:""}),u(B,{class:"text-center flex flex-center"},{default:l(()=>[n.loading?(b(),y(P,{key:0,indeterminate:"",size:"60px",thickness:.3,rounded:"",color:"primary","track-color":"grey-3",class:"q-ma-md"})):Q("",!0),p("div",L,null,512)]),_:1})]),_:1},8,["class"])]),_:1},8,["modelValue","position","full-width","onShow"])}var tt=x(Z,[["render",M]]);export{tt as default};
